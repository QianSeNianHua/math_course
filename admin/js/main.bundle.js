!function(t){var i={};function a(s){if(i[s])return i[s].exports;var e=i[s]={i:s,l:!1,exports:{}};return t[s].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=t,a.c=i,a.d=function(t,i,s){a.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,i){if(1&i&&(t=a(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var e in t)a.d(s,e,function(i){return t[i]}.bind(null,e));return s},a.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(i,"a",i),i},a.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},a.p="",a(a.s=2)}([function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),function(t){t.canvasID="myCanvas",t.colorBlackID="colorBlack",t.colorRedID="colorRed",t.colorBlueID="colorBlue",t.colorGreenID="colorGreen",t.colorYellowID="colorYellow",t.colorPurpleID="colorPurple",t.btnLetFlagID="flag",t.btnRubberID="rubber",t.btnRuleID="rule",t.btnProtractorID="protractor",t.btnCancleID="cancle",t.btnRotateID="rotate",t.btnPointID="point",t.btnSegmentID="segment",t.btnCircularID="circular",t.btnFanID="fan",t.btnRadiusID="radius",t.btnDiameterID="diameter",t.btnChordID="chord",t.btnTangentID="tangent",t.btnTextValueID="value",t.btnInputFlagID="inputFlag",t[t.propWitdh=3]="propWitdh",t.propNSStyle="rgba(128, 100, 162, 0.7)",t.propDSStyle="rgb(1, 1, 1)",t[t.propPointR=5]="propPointR",t.propNFStyle="rgba(128, 100, 162, 0.7)",t.propDFStyle="rgb(1, 1, 1)",t.propFont="bold 22px Arial",t.propTextAlign="center",t.propisChoosed="blue",t[t.unitProp=40]="unitProp",t[t.adsorption=20]="adsorption",t[t.adsorpChoosed=20]="adsorpChoosed",t[t.mouseOffset=0]="mouseOffset"}(i.Attribute||(i.Attribute={})),function(t){t.default="default",t.flag="flag",t.rule="rule",t.protractor="protractor",t.rotate="rotate"}(i.Auxiliary||(i.Auxiliary={})),function(t){t.default="rgba(0, 0, 0, 0)",t.black="rgba(0, 0, 0, 0.7)",t.red="rgba(255, 0, 0, 0.7)",t.blue="rgba(30, 144, 255, 0.7)",t.green="rgba(50, 205, 50, 0.7)",t.yellow="rgba(255, 255, 0, 0.7)",t.purple="rgba(128, 0, 128, 0.7)"}(i.Color||(i.Color={})),function(t){t.default="default",t.point="point",t.segment="segment",t.circular="circular",t.fan="fan",t.radius="radius",t.diameter="diameter",t.chord="chord",t.tangent="tangent",t.letterFlag="letterFlag"}(i.ToolsName||(i.ToolsName={}))},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=function(){function t(t,i){this.canvasData=t,this.intersect=i}return t.prototype.adsorpToXY=function(t,i,a){for(var e,n={x:t,y:i},h=s.Attribute.adsorption,o=0;o<this.canvasData.getData().length;o++){var r=this.canvasData.getData(o);switch(r.flag){case s.ToolsName.point:if(a&&1===a.length&&a[0]===o)break;(e=this.adPoint(t,i,r)).flag&&e.dist<=h&&(h=e.dist,n={x:e.x,y:e.y});break;case s.ToolsName.segment:if(a&&1===a.length&&a[0]===o)break;(e=this.adSegment(t,i,r)).flag&&e.dist<=h&&(h=e.dist,n={x:e.x,y:e.y});break;case s.ToolsName.circular:if(a&&1===a.length&&a[0]===o)break;if((e=this.adCircular(t,i,r)).flag&&e.dist<=h){h=e.dist,n={x:e.x,y:e.y};for(var l=0;l<r.fanAndRadius.length;l++){switch((y=r.fanAndRadius[l]).flag){case s.ToolsName.fan:if(a&&2===a.length&&a[1]===l)break;(e=this.adFan(t,i,y)).flag&&(h=e.dist,n={x:e.x,y:e.y});break;case s.ToolsName.radius:if(a&&2===a.length&&a[1]===l)break;(e=this.adRadius(t,i,y)).flag&&(h=e.dist,n={x:e.x,y:e.y});break;case s.ToolsName.diameter:if(a&&2===a.length&&a[1]===l)break;(e=this.adDiameter(t,i,y)).flag&&(h=e.dist,n={x:e.x,y:e.y});break;case s.ToolsName.tangent:if(a&&2===a.length&&a[1]===l)break;(e=this.adTangent(t,i,y)).flag&&(h=e.dist,n={x:e.x,y:e.y})}}}else for(l=0;l<r.fanAndRadius.length;l++){var y;if((y=r.fanAndRadius[l]).flag===s.ToolsName.tangent){if(a&&2===a.length&&a[1]===l)break;(e=this.adTangent(t,i,y)).flag&&(h=e.dist,n={x:e.x,y:e.y});break}}break;case s.ToolsName.letterFlag:case s.ToolsName.default:}}return(e=this.adIntePoint(t,i)).flag&&(n={x:e.x,y:e.y}),n},t.prototype.adPoint=function(t,i,a){var e=a,n=Math.sqrt(Math.pow(t-e.x,2)+Math.pow(i-e.y,2));return n<=s.Attribute.adsorption?{x:e.x,y:e.y,flag:!0,dist:n}:{x:t,y:i,flag:!1}},t.prototype.adSegment=function(t,i,a){var e=a,n=Math.sqrt(Math.pow(t-e.x,2)+Math.pow(i-e.y,2)),h=Math.atan2(i-e.y,t-e.x);h=h>=0?h:2*Math.PI+h;var o=Math.abs(Math.sin(Math.abs(e.angle-h))*n),r=Math.cos(Math.abs(e.angle-h))*n;return o<=s.Attribute.adsorption&&r>=0&&r<=e.r?{x:Math.cos(e.angle)*r+e.x,y:Math.sin(e.angle)*r+e.y,flag:!0,dist:o}:o<=s.Attribute.adsorption&&r>=-s.Attribute.adsorption&&r<0?{x:e.x,y:e.y,flag:!0,dist:o}:o<=s.Attribute.adsorption&&r>e.r&&r<=e.r+s.Attribute.adsorption?{x:Math.cos(e.angle)*e.r+e.x,y:Math.sin(e.angle)*e.r+e.y,flag:!0,dist:o}:{x:t,y:i,flag:!1}},t.prototype.adCircular=function(t,i,a){var e=a,n=Math.sqrt(Math.pow(t-e.x,2)+Math.pow(i-e.y,2)),h=Math.atan2(i-e.y,t-e.x);return h=h>=0?h:2*Math.PI+h,n<=s.Attribute.adsorption?{x:e.x,y:e.y,flag:!0,dist:n}:Math.abs(n-e.r)<=s.Attribute.adsorption?{x:Math.cos(h)*e.r+e.x,y:Math.sin(h)*e.r+e.y,flag:!0,dist:Math.abs(n-e.r)}:{x:t,y:i,flag:!1}},t.prototype.adFan=function(t,i,a){var e=a,n=Math.cos(e.startAngle)*e.r+e.x,h=Math.sin(e.startAngle)*e.r+e.y,o=Math.sqrt(Math.pow(t-n,2)+Math.pow(i-h,2)),r=Math.cos(e.endAngle)*e.r+e.x,l=Math.sin(e.endAngle)*e.r+e.y,y=Math.sqrt(Math.pow(t-r,2)+Math.pow(i-l,2));return o<=y?o<=s.Attribute.adsorption?{x:n,y:h,flag:!0,dist:o}:{x:t,y:i,flag:!1}:y<=s.Attribute.adsorption?{x:r,y:l,flag:!0,dist:o}:{x:t,y:i,flag:!1}},t.prototype.adRadius=function(t,i,a){var e=a,n=Math.cos(e.angle)*e.r+e.x,h=Math.sin(e.angle)*e.r+e.y,o=Math.sqrt(Math.pow(t-n,2)+Math.pow(i-h,2));return o<=s.Attribute.adsorption?{x:n,y:h,flag:!0,dist:o}:{x:t,y:i,flag:!1}},t.prototype.adDiameter=function(t,i,a){var e=a,n=Math.cos(e.angle)*e.r+e.x,h=Math.sin(e.angle)*e.r+e.y,o=Math.cos(e.angle+Math.PI)*e.r+e.x,r=Math.sin(e.angle+Math.PI)*e.r+e.y,l=Math.sqrt(Math.pow(t-n,2)+Math.pow(i-h,2)),y=Math.sqrt(Math.pow(t-o,2)+Math.pow(i-r,2));return l<=s.Attribute.adsorption?{x:n,y:h,flag:!0,dist:l}:y<=s.Attribute.adsorption?{x:o,y:r,flag:!0,dist:y}:{x:t,y:i,flag:!1}},t.prototype.adTangent=function(t,i,a){var e=a,n=Math.sqrt(Math.pow(t-e.insePointX,2)+Math.pow(i-e.insePointY,2)),h=Math.sqrt(Math.pow(t-e.x,2)+Math.pow(i-e.y,2)),o=Math.cos(e.angle)*e.r+e.x,r=Math.sin(e.angle)*e.r+e.y,l=Math.sqrt(Math.pow(t-o,2)+Math.pow(i-r,2)),y=Math.min(n,h,l);return y<=s.Attribute.adsorption?y===n?{x:e.insePointX,y:e.insePointY,flag:!0,dist:y}:y===h?{x:e.x,y:e.y,flag:!0,dist:y}:y===l?{x:o,y:r,flag:!0,dist:y}:void 0:{x:t,y:i,flag:!1}},t.prototype.adIntePoint=function(t,i){var a=this.intersect.getData(),e={x:t,y:i},n=s.Attribute.adsorption,h=!1;if(0===a.length)return{x:e.x,y:e.y,flag:!1};for(var o=0,r=a;o<r.length;o++){var l=r[o],y=Math.sqrt(Math.pow(t-l.x,2)+Math.pow(i-l.y,2));y<n&&(n=y,e=l,h=!0)}return h?{x:e.x,y:e.y,flag:!0,dist:n}:{x:e.x,y:e.y,flag:!1}},t}();i.Adsorption=e},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(3);window.MyCanvas=s.default},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=a(4),n=a(5),h=a(6),o=a(7),r=a(8),l=a(9),y=a(10),v=a(11),c=a(12),u=a(13),C=a(14),d=a(15),g=a(16),m=a(17),p=a(18),x=a(19),f=a(20),b=a(21),P=a(22),M=a(23),A=function(){function t(){this.eventClick=(this.isMobile(),"click"),this.eventStart=this.isMobile()?"touchstart":"mousedown",this.eventMove=this.isMobile()?"touchmove":"mousemove",this.eventEnd=this.isMobile()?"touchend":"mouseup",this.myCanvasNode=document.getElementById(s.Attribute.canvasID),this.myCanvas=this.myCanvasNode.getContext("2d"),this.myCanvas.fillStyle="white",this.myCanvas.fillRect(0,0,this.myCanvasNode.clientWidth,this.myCanvasNode.clientHeight),this.myCanvas.fill(),this.canvasData=new n.CanvasData,this.rePaint=new h.RePaint(this.myCanvas,this.myCanvasNode,this.canvasData.getData()),this.cvsClick=!1,this.canvasChoosed=new y.CanvasChoosed(this.isMobile(),this.canvasData,this.myCanvasNode),this.intersect=new M.Intersect(this.myCanvas,this.canvasChoosed,this.canvasData),this.buttonListen=new o.ButtonListen(this.eventClick,this.rePaint,this.canvasData,this.canvasChoosed,this.intersect),this.textBox=new d.TextBox(this.canvasChoosed,this.canvasData,this.rePaint,this.intersect),this.fillColor=new g.FillColor(this.eventClick,this.canvasChoosed,this.canvasData,this.rePaint),this.auxiliaryListen=new m.AuxiliaryListen(this.eventClick,this.canvasChoosed,this.canvasData,this.rePaint,this.intersect),this.moveGraph=new P.MoveGraph(this.myCanvasNode,this.isMobile(),this.rePaint,this.canvasChoosed,this.canvasData,this.intersect),this.newTools(),this.auxiTools(),this.buttonListen.init(this.auxiliaryListen,this.textBox),this.auxiliaryListen.init(this.buttonListen,this.textBox),this.textBox.init(this.auxiliaryListen,this.buttonListen),this.fillColor.init(this.auxiliaryListen,this.buttonListen)}return t.prototype.isMobile=function(){var t=navigator.userAgent.toLowerCase(),i=/ipad/i.test(t),a=/iphone os/i.test(t),s=/midp/i.test(t),e=/rv:1.2.3.4/i.test(t),n=/ucweb/i.test(t),h=/android/i.test(t),o=/windows ce/i.test(t),r=/windows mobile/i.test(t);return!!(i||a||s||e||n||h||o||r)},t.prototype.newTools=function(){this.point=new e.Point(this.isMobile(),this.myCanvas,this.myCanvasNode,this.rePaint,this.canvasData,this.buttonListen,this.intersect),this.segment=new r.Segment(this.isMobile(),this.myCanvas,this.myCanvasNode,this.rePaint,this.buttonListen,this.canvasData,this.intersect),this.circular=new l.Circular(this.isMobile(),this.myCanvas,this.myCanvasNode,this.rePaint,this.buttonListen,this.canvasData,this.intersect),this.fan=new v.Fan(this.isMobile(),this.myCanvas,this.myCanvasNode,this.rePaint,this.buttonListen,this.canvasData,this.canvasChoosed,this.intersect),this.radius=new c.Radius(this.isMobile(),this.myCanvas,this.myCanvasNode,this.rePaint,this.buttonListen,this.canvasData,this.canvasChoosed,this.intersect),this.diameter=new u.Diameter(this.isMobile(),this.myCanvas,this.myCanvasNode,this.rePaint,this.buttonListen,this.canvasData,this.canvasChoosed,this.intersect),this.tangent=new C.Tangent(this.isMobile(),this.myCanvas,this.myCanvasNode,this.rePaint,this.buttonListen,this.canvasData,this.canvasChoosed,this.intersect)},t.prototype.auxiTools=function(){this.rule=new p.Rule(this.isMobile(),this.myCanvas,this.myCanvasNode,this.rePaint,this.auxiliaryListen,this.canvasData,this.intersect),this.protractor=new x.Protractor(this.isMobile(),this.myCanvas,this.myCanvasNode,this.rePaint,this.auxiliaryListen,this.canvasData,this.intersect),this.rotate=new f.Rotate(this.isMobile(),this.myCanvas,this.myCanvasNode,this.rePaint,this.auxiliaryListen,this.canvasData,this.canvasChoosed,this.intersect),this.letterFlag=new b.LetterFlag(this.isMobile(),this.myCanvas,this.myCanvasNode,this.auxiliaryListen,this.canvasData)},t.prototype.initData=function(t){for(var i=0,a=t;i<a.length;i++){var s=a[i];this.canvasData.setData(s)}this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint()},t.prototype.getData=function(){return this.canvasData.getData()},t.prototype.startListen=function(){var t=this;this.myCanvasNode.addEventListener(this.eventStart,function(i){switch(i=i||window.event,t.cvsClick=!1,t.buttonListen.getButtonFlag()){case s.ToolsName.point:return void t.point.startCallBack(i);case s.ToolsName.segment:return void t.segment.startCallBack(i);case s.ToolsName.fan:return void t.fan.startCallBack(i);case s.ToolsName.circular:return void t.circular.startCallBack(i);case s.ToolsName.radius:return void t.radius.startCallBack(i);case s.ToolsName.diameter:return void t.diameter.startCallBack(i);case s.ToolsName.tangent:return void t.tangent.startCallBack(i);case s.ToolsName.default:t.cvsClick=!0;break;default:return}switch(t.cvsClick=!1,t.auxiliaryListen.getButtonFlag()){case s.Auxiliary.rule:return void t.rule.startCallback(i);case s.Auxiliary.flag:return void t.letterFlag.startCallback(i);case s.Auxiliary.protractor:return void t.protractor.startCallback(i);case s.Auxiliary.rotate:return void t.rotate.startCallback(i);case s.Auxiliary.default:t.cvsClick=!0;break;default:return}t.moveGraph.start(i)},!1)},t.prototype.moveListen=function(){var t=this;this.myCanvasNode.addEventListener(this.eventMove,function(i){switch(i=i||window.event,t.buttonListen.getButtonFlag()){case s.ToolsName.point:t.point.moveCallBack(i);break;case s.ToolsName.segment:t.segment.moveCallBack(i);break;case s.ToolsName.fan:t.fan.moveCallBack(i);break;case s.ToolsName.circular:t.circular.moveCallBack(i);break;case s.ToolsName.radius:t.radius.moveCallBack(i);break;case s.ToolsName.diameter:t.diameter.moveCallBack(i);break;case s.ToolsName.tangent:t.tangent.moveCallBack(i);break;case s.ToolsName.default:break;default:return}switch(t.auxiliaryListen.getButtonFlag()){case s.Auxiliary.rule:t.rule.moveCallback(i);break;case s.Auxiliary.flag:return void t.letterFlag.moveCallback(i);case s.Auxiliary.protractor:t.protractor.moveCallback(i);break;case s.Auxiliary.rotate:t.rotate.moveCallback(i);break;case s.Auxiliary.default:break;default:return}var a=t.canvasChoosed.getIndex();if(1===a.length)switch(t.canvasData.getData(a[0]).flag){case s.ToolsName.point:return void t.moveGraph.movePoint(i);case s.ToolsName.segment:return void t.moveGraph.moveSegment(i);case s.ToolsName.circular:return void t.moveGraph.moveCircular(i);case s.ToolsName.letterFlag:return void t.moveGraph.moveLetterFlag(i);case s.ToolsName.default:break;default:return}},!1)},t.prototype.endListen=function(){var t=this;this.myCanvasNode.addEventListener(this.eventEnd,function(i){switch(i=i||window.event,t.buttonListen.getButtonFlag()){case s.ToolsName.point:return void t.point.endCallBack(i);case s.ToolsName.segment:return void t.segment.endCallBack(i);case s.ToolsName.fan:return void t.fan.endCallBack(i);case s.ToolsName.circular:return void t.circular.endCallBack(i);case s.ToolsName.radius:return void t.radius.endCallBack(i);case s.ToolsName.diameter:return void t.diameter.endCallBack(i);case s.ToolsName.tangent:return void t.tangent.endCallBack(i);case s.ToolsName.default:break;default:return}switch(t.auxiliaryListen.getButtonFlag()){case s.Auxiliary.rule:return void t.rule.endCallback(i);case s.Auxiliary.flag:return void t.letterFlag.endCallback(i);case s.Auxiliary.protractor:return void t.protractor.endCallback(i);case s.Auxiliary.rotate:return void t.rotate.endCallback(i);case s.Auxiliary.default:break;default:return}t.moveGraph.end(i)&&(t.cvsClick=!1)},!1)},t.prototype.clickListen=function(){var t=this;this.myCanvasNode.addEventListener(this.eventClick,function(i){i=i||window.event,t.cvsClick&&(t.cvsClick=!1,t.canvasChoosed.canvasClick(i),t.rePaint.clearCanvas(),t.rePaint.rePaint(),t.intersect.repaintPoint())},!1)},t}();i.default=A},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=a(1),n=function(){function t(t,i,a,n,h,o,r){this.flag=s.ToolsName.point,this.isMobild=t,this.myCanvas=i,this.myCanvasNode=a,this.eventFlag=!1,this.canvasData=h,this.rePaint=n,this.buttonListen=o,this.isChoosed=!1,this.intersect=r,this.adsorption=new e.Adsorption(this.canvasData,this.intersect)}return t.prototype.startCallBack=function(t){this.eventFlag=!0;var i=0,a=0;if(this.isMobild){var e=t;i=e.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=e.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,a=n.clientY-this.myCanvasNode.getBoundingClientRect().top}i+=s.Attribute.mouseOffset;var h=this.adsorption.adsorpToXY(i,a);i=h.x,a=h.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.arc(i,a,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()},t.prototype.moveCallBack=function(t){if(this.eventFlag){var i=0,a=0;if(this.isMobild){var e=t;i=e.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=e.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,a=n.clientY-this.myCanvasNode.getBoundingClientRect().top}i+=s.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint();var h=this.adsorption.adsorpToXY(i,a);i=h.x,a=h.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.arc(i,a,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()}},t.prototype.endCallBack=function(t){if(this.eventFlag){if(this.isMobild){var i=t;this.x=i.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=i.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var a=t;this.x=a.clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=a.clientY-this.myCanvasNode.getBoundingClientRect().top}this.x+=s.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint();var e=this.adsorption.adsorpToXY(this.x,this.y);this.x=e.x,this.y=e.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.canvasData.setData(this.data()),this.buttonListen.recoverButtonFlag(),this.eventFlag=!1}},t.prototype.data=function(){return{flag:this.flag,isChoosed:this.isChoosed,lock:!1,x:this.x,y:this.y}},t}();i.Point=n},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(){this.data=[]}return t.prototype.setData=function(t){this.data.push(t)},t.prototype.getData=function(t){return void 0!==t&&t<this.data.length?this.data[t]:this.data},t.prototype.delData=function(t){if(!t||0===t.length)return this.data.pop();if(1===t.length&&t[0]<this.data.length){var i=this.getData(t[0]);return this.data.splice(t[0],1),i}if(2===t.length&&t[0]<this.data.length&&t[1]<this.data[t[0]].fanAndRadius.length){i=this.getData(t[0]).fanAndRadius[t[1]];return this.data[t[0]].fanAndRadius.splice(t[1],1),i}if(3===t.length&&t[0]<this.data.length&&t[1]<this.data[t[0]].fanAndRadius.length){i=this.getData(t[0]).fanAndRadius[t[1]].hasChord;return this.data[t[0]].fanAndRadius[t[1]].hasChord.isShow=!1,i}},t}();i.CanvasData=s},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=function(){function t(t,i,a){this.myCanvas=t,this.myCanvasNode=i,this.data=a}return t.prototype.paintPoint=function(t){this.myCanvas.beginPath(),t.isChoosed?this.myCanvas.fillStyle=s.Attribute.propisChoosed:this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.arc(t.x,t.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()},t.prototype.paintSegment=function(t){t.anticlockwise=!!t.anticlockwise&&t.anticlockwise;var i=Math.cos(t.angle)*t.r+t.x,a=Math.sin(t.angle)*t.r+t.y;this.myCanvas.beginPath(),t.isChoosed?(this.myCanvas.strokeStyle=s.Attribute.propisChoosed,this.myCanvas.fillStyle=s.Attribute.propisChoosed):(this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.strokeStyle=s.Attribute.propDSStyle),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(t.x,t.y),this.myCanvas.arc(t.x,t.y,t.r,t.angle,t.angle,t.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.moveTo(t.x,t.y),this.myCanvas.arc(t.x,t.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.moveTo(i,a),this.myCanvas.arc(i,a,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()},t.prototype.paintFan=function(t){t.anticlockwise=!!t.anticlockwise&&t.anticlockwise,this.myCanvas.beginPath(),t.isChoosed?this.myCanvas.strokeStyle=s.Attribute.propisChoosed:this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.fillStyle=t.fillStyle,this.myCanvas.moveTo(t.x,t.y),this.myCanvas.arc(t.x,t.y,t.r,t.startAngle,t.endAngle,t.anticlockwise),this.myCanvas.closePath(),this.myCanvas.fill(),this.myCanvas.stroke()},t.prototype.paintCircular=function(t){t.anticlockwise=!!t.anticlockwise&&t.anticlockwise,this.myCanvas.beginPath(),t.isChoosed?this.myCanvas.strokeStyle=s.Attribute.propisChoosed:this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.fillStyle=t.fillStyle,this.myCanvas.arc(t.x,t.y,t.r,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.stroke(),this.myCanvas.beginPath(),t.isChoosed?this.myCanvas.fillStyle=s.Attribute.propisChoosed:this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.arc(t.x,t.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()},t.prototype.paintRadius=function(t){t.anticlockwise=!!t.anticlockwise&&t.anticlockwise,this.myCanvas.beginPath(),t.isChoosed?this.myCanvas.strokeStyle=s.Attribute.propisChoosed:this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(t.x,t.y),this.myCanvas.arc(t.x,t.y,t.r,t.angle,t.angle,t.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke()},t.prototype.paintDiameter=function(t){t.anticlockwise=!!t.anticlockwise&&t.anticlockwise,this.myCanvas.beginPath(),t.isChoosed?this.myCanvas.strokeStyle=s.Attribute.propisChoosed:this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(t.x,t.y),this.myCanvas.arc(t.x,t.y,t.r,t.angle,t.angle,t.anticlockwise),this.myCanvas.moveTo(t.x,t.y),this.myCanvas.arc(t.x,t.y,t.r,t.angle+Math.PI,t.angle+Math.PI,t.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke()},t.prototype.paintChord=function(t){this.myCanvas.beginPath(),t.isChoosed?(this.myCanvas.strokeStyle=s.Attribute.propisChoosed,this.myCanvas.fillStyle=s.Attribute.propisChoosed):(this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.fillStyle=s.Attribute.propDFStyle),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(t.x,t.y),this.myCanvas.lineTo(t.endX,t.endY),this.myCanvas.stroke(),this.myCanvas.moveTo(t.x,t.y),this.myCanvas.arc(t.x,t.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.moveTo(t.endX,t.endY),this.myCanvas.arc(t.endX,t.endY,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()},t.prototype.paintTangent=function(t){var i=Math.cos(t.angle)*t.r+t.x,a=Math.sin(t.angle)*t.r+t.y;this.myCanvas.beginPath(),t.isChoosed?(this.myCanvas.strokeStyle=s.Attribute.propisChoosed,this.myCanvas.fillStyle=s.Attribute.propisChoosed):(this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.fillStyle=s.Attribute.propDFStyle),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(t.x,t.y),this.myCanvas.arc(t.x,t.y,t.r,t.angle,t.angle,t.anticlockwise),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.moveTo(t.insePointX,t.insePointY),this.myCanvas.arc(t.insePointX,t.insePointY,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.moveTo(t.x,t.y),this.myCanvas.arc(t.x,t.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.moveTo(i,a),this.myCanvas.arc(i,a,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()},t.prototype.paintLetterFlag=function(t){this.myCanvas.beginPath(),this.myCanvas.font=s.Attribute.propFont,t.isChoosed?this.myCanvas.fillStyle=s.Attribute.propisChoosed:this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.fillText(t.text,t.x,t.y)},t.prototype.rePaint=function(){for(var t=0,i=this.data;t<i.length;t++){var a=i[t];switch(a.flag){case s.ToolsName.point:this.paintPoint(a);break;case s.ToolsName.segment:this.paintSegment(a);break;case s.ToolsName.circular:this.paintCircular(a);for(var e=0,n=a.fanAndRadius;e<n.length;e++){var h=n[e];switch(h.flag){case s.ToolsName.fan:this.paintFan(h);var o=h.hasChord;o.isShow&&this.paintChord(o);break;case s.ToolsName.radius:this.paintRadius(h);break;case s.ToolsName.diameter:this.paintDiameter(h);break;case s.ToolsName.tangent:this.paintTangent(h)}}break;case s.ToolsName.letterFlag:this.paintLetterFlag(a)}}},t.prototype.clearCanvas=function(){this.myCanvas.clearRect(0,0,this.myCanvasNode.clientWidth,this.myCanvasNode.clientHeight-5),this.myCanvas.fillStyle="white",this.myCanvas.fillRect(0,0,this.myCanvasNode.clientWidth,this.myCanvasNode.clientHeight)},t}();i.RePaint=e},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=function(){function t(t,i,a,e,n){this.buttonFlag=s.ToolsName.default,this.eventClick=t,this.rePaint=i,this.canvasData=a,this.canvasChoosed=e,this.intersect=n,this.buttonPoint(),this.buttonSegment(),this.buttonCircular(),this.buttonFan(),this.buttonRadius(),this.buttonDiameter(),this.buttonChord(),this.buttonTangent()}return t.prototype.init=function(t,i){this.auxiliaryTools=t,this.textBox=i},t.prototype.buttonListen=function(t,i,a){var e=this;document.getElementById(t).addEventListener(i,function(t){if(t=t||window.event,e.buttonFlag===s.ToolsName.default&&e.auxiliaryTools.getButtonFlag()===s.Auxiliary.default&&!e.textBox.getTextFlag()){var i=e.canvasChoosed.getIndex();if(a===s.ToolsName.fan||a===s.ToolsName.radius||a===s.ToolsName.diameter||a===s.ToolsName.tangent){if(1!==i.length)return;if(e.canvasData.getData(i[0]).flag!==s.ToolsName.circular)return;e.canvasChoosed.cancleSelected(),e.buttonFlag=a,t.srcElement.className="choosed"}else if(a===s.ToolsName.chord){if(2!==i.length)return;if(e.canvasData.getData(i[0]).fanAndRadius[i[1]].flag!==s.ToolsName.fan)return;e.canvasData.getData(i[0]).fanAndRadius[i[1]].hasChord.isShow=!0,e.canvasChoosed.cancleSelected(),e.canvasChoosed.recoverIndex(),e.buttonFlag=s.ToolsName.default,t.srcElement.className="nochoosed"}else e.canvasChoosed.cancleSelected(),e.canvasChoosed.recoverIndex(),e.buttonFlag=a,t.srcElement.className="choosed";e.rePaint.clearCanvas(),e.rePaint.rePaint(),e.intersect.repaintPoint()}},!1)},t.prototype.buttonPoint=function(){this.buttonListen(s.Attribute.btnPointID,this.eventClick,s.ToolsName.point)},t.prototype.buttonSegment=function(){this.buttonListen(s.Attribute.btnSegmentID,this.eventClick,s.ToolsName.segment)},t.prototype.buttonCircular=function(){this.buttonListen(s.Attribute.btnCircularID,this.eventClick,s.ToolsName.circular)},t.prototype.buttonFan=function(){this.buttonListen(s.Attribute.btnFanID,this.eventClick,s.ToolsName.fan)},t.prototype.buttonRadius=function(){this.buttonListen(s.Attribute.btnRadiusID,this.eventClick,s.ToolsName.radius)},t.prototype.buttonDiameter=function(){this.buttonListen(s.Attribute.btnDiameterID,this.eventClick,s.ToolsName.diameter)},t.prototype.buttonChord=function(){this.buttonListen(s.Attribute.btnChordID,this.eventClick,s.ToolsName.chord)},t.prototype.buttonTangent=function(){this.buttonListen(s.Attribute.btnTangentID,this.eventClick,s.ToolsName.tangent)},t.prototype.getButtonFlag=function(){return this.buttonFlag},t.prototype.recoverButtonFlag=function(){this.buttonFlag=s.ToolsName.default,[s.Attribute.btnPointID,s.Attribute.btnSegmentID,s.Attribute.btnCircularID,s.Attribute.btnFanID,s.Attribute.btnRadiusID,s.Attribute.btnDiameterID,s.Attribute.btnChordID,s.Attribute.btnTangentID].forEach(function(t){document.getElementById(t.toString()).className="nochoosed"})},t}();i.ButtonListen=e},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=a(1),n=function(){function t(t,i,a,n,h,o,r){this.flag=s.ToolsName.segment,this.isMobild=t,this.myCanvas=i,this.myCanvasNode=a,this.eventFlag=!1,this.eventCount=0,this.anticlockwise=!1,this.canvasData=o,this.rePaint=n,this.buttonListen=h,this.isChoosed=!1,this.intersect=r,this.adsorption=new e.Adsorption(this.canvasData,this.intersect)}return t.prototype.startCallBack=function(t){if(this.eventFlag||0!==this.eventCount){if(this.eventFlag||2!==this.eventCount)return;this.eventFlag=!0;y=0,v=0;if(this.isMobild){var i=t;y=i.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,v=i.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var a=t;y=a.clientX-this.myCanvasNode.getBoundingClientRect().left,v=a.clientY-this.myCanvasNode.getBoundingClientRect().top}y+=s.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint(),y=(l=this.adsorption.adsorpToXY(y,v)).x,v=l.y;var e=parseFloat((Math.sqrt(Math.pow(Math.abs(y-this.x),2)+Math.pow(Math.abs(v-this.y),2))/s.Attribute.unitProp).toFixed(1)),n=Math.round(e*s.Attribute.unitProp);n<=4&&(e=.1,n=4);var h=Math.atan2(v-this.y,y-this.x);h=h>=0?h:2*Math.PI+h,h=Math.round(180/Math.PI*h)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,n,h,h,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.arc(this.x,this.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.arc(y,v,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(this.x,this.y);var o=this.rotatexy(this.x,this.y,0,20,h);this.myCanvas.lineTo(o.x,o.y),o=this.rotatexy(this.x,this.y,n,20,h),this.myCanvas.lineTo(o.x,o.y),o=this.rotatexy(this.x,this.y,n,0,h),this.myCanvas.lineTo(o.x,o.y),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=2;for(var r=10;r<n;r+=10)o=this.rotatexy(this.x,this.y,r,0,h),this.myCanvas.moveTo(o.x,o.y),o=this.rotatexy(this.x,this.y,r,5,h),this.myCanvas.lineTo(o.x,o.y),(r+=10)<n&&(o=this.rotatexy(this.x,this.y,r,0,h),this.myCanvas.moveTo(o.x,o.y),o=this.rotatexy(this.x,this.y,r,10,h),this.myCanvas.lineTo(o.x,o.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(this.x,this.y),this.myCanvas.rotate(h),this.myCanvas.font=s.Attribute.propFont,this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.fillText(e+"cm",n/2-22,-30),this.myCanvas.restore()}else{this.eventFlag=!0,this.eventCount=1;var l,y=0,v=0;if(this.isMobild){var c=t;y=c.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,v=c.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var u=t;y=u.clientX-this.myCanvasNode.getBoundingClientRect().left,v=u.clientY-this.myCanvasNode.getBoundingClientRect().top}y+=s.Attribute.mouseOffset,y=(l=this.adsorption.adsorpToXY(y,v)).x,v=l.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.arc(y,v,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()}},t.prototype.moveCallBack=function(t){if(this.eventFlag&&1===this.eventCount){var i=0,a=0;if(this.isMobild){var e=t;i=e.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=e.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,a=n.clientY-this.myCanvasNode.getBoundingClientRect().top}i+=s.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(r=this.adsorption.adsorpToXY(i,a)).x,a=r.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.arc(i,a,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()}else if(this.eventFlag||2!==this.eventCount){if(!this.eventFlag||2!==this.eventCount)return;i=0,a=0;if(this.isMobild){var h=t;i=h.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=h.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var o=t;i=o.clientX-this.myCanvasNode.getBoundingClientRect().left,a=o.clientY-this.myCanvasNode.getBoundingClientRect().top}i+=s.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(r=this.adsorption.adsorpToXY(i,a)).x,a=r.y;u=parseFloat((Math.sqrt(Math.pow(Math.abs(i-this.x),2)+Math.pow(Math.abs(a-this.y),2))/s.Attribute.unitProp).toFixed(1));(v=Math.round(u*s.Attribute.unitProp))<=.1*s.Attribute.unitProp&&(u=.1,v=.1*s.Attribute.unitProp),c=(c=Math.atan2(a-this.y,i-this.x))>=0?c:2*Math.PI+c,c=Math.round(180/Math.PI*c)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,v,c,c,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.arc(this.x,this.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),i=Math.cos(c)*v+this.x,a=Math.sin(c)*v+this.y,this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.arc(i,a,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(this.x,this.y);C=this.rotatexy(this.x,this.y,0,20,c);this.myCanvas.lineTo(C.x,C.y),C=this.rotatexy(this.x,this.y,v,20,c),this.myCanvas.lineTo(C.x,C.y),C=this.rotatexy(this.x,this.y,v,0,c),this.myCanvas.lineTo(C.x,C.y),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=2;for(d=10;d<v;d+=10)C=this.rotatexy(this.x,this.y,d,0,c),this.myCanvas.moveTo(C.x,C.y),C=this.rotatexy(this.x,this.y,d,5,c),this.myCanvas.lineTo(C.x,C.y),(d+=10)<v&&(C=this.rotatexy(this.x,this.y,d,0,c),this.myCanvas.moveTo(C.x,C.y),C=this.rotatexy(this.x,this.y,d,10,c),this.myCanvas.lineTo(C.x,C.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(this.x,this.y),this.myCanvas.rotate(c),this.myCanvas.font=s.Attribute.propFont,this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.fillText(u+"cm",v/2-22,-30),this.myCanvas.restore()}else{var r,i=0,a=0;if(this.isMobild){var l=t;i=l.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=l.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var y=t;i=y.clientX-this.myCanvasNode.getBoundingClientRect().left,a=y.clientY-this.myCanvasNode.getBoundingClientRect().top}i+=s.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(r=this.adsorption.adsorpToXY(i,a)).x,a=r.y;var v,c,u=parseFloat((Math.sqrt(Math.pow(Math.abs(i-this.x),2)+Math.pow(Math.abs(a-this.y),2))/s.Attribute.unitProp).toFixed(1));(v=Math.round(u*s.Attribute.unitProp))<=4&&(u=.1,v=4),c=(c=Math.atan2(a-this.y,i-this.x))>=0?c:2*Math.PI+c,c=Math.round(180/Math.PI*c)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,v,c,c,this.anticlockwise),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.arc(this.x,this.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),i=Math.cos(c)*v+this.x,a=Math.sin(c)*v+this.y,this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.arc(i,a,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(this.x,this.y);var C=this.rotatexy(this.x,this.y,0,20,c);this.myCanvas.lineTo(C.x,C.y),C=this.rotatexy(this.x,this.y,v,20,c),this.myCanvas.lineTo(C.x,C.y),C=this.rotatexy(this.x,this.y,v,0,c),this.myCanvas.lineTo(C.x,C.y),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=2;for(var d=10;d<v;d+=10)C=this.rotatexy(this.x,this.y,d,0,c),this.myCanvas.moveTo(C.x,C.y),C=this.rotatexy(this.x,this.y,d,5,c),this.myCanvas.lineTo(C.x,C.y),(d+=10)<v&&(C=this.rotatexy(this.x,this.y,d,0,c),this.myCanvas.moveTo(C.x,C.y),C=this.rotatexy(this.x,this.y,d,10,c),this.myCanvas.lineTo(C.x,C.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(this.x,this.y),this.myCanvas.rotate(c),this.myCanvas.font=s.Attribute.propFont,this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.fillText(u+"cm",v/2-22,-30),this.myCanvas.restore()}},t.prototype.endCallBack=function(t){if(this.eventFlag&&1===this.eventCount){if(this.eventFlag=!1,this.eventCount=2,this.isMobild){var i=t;this.x=i.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=i.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var a=t;this.x=a.clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=a.clientY-this.myCanvasNode.getBoundingClientRect().top}this.x+=s.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint();var e=this.adsorption.adsorpToXY(this.x,this.y);this.x=e.x,this.y=e.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()}else{if(!this.eventFlag||2!==this.eventCount)return;this.eventFlag=!1,this.eventCount=0;var n=0,h=0;if(this.isMobild){var o=t;n=o.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,h=o.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var r=t;n=r.clientX-this.myCanvasNode.getBoundingClientRect().left,h=r.clientY-this.myCanvasNode.getBoundingClientRect().top}n+=s.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint(),n=(e=this.adsorption.adsorpToXY(n,h)).x,h=e.y;var l=parseFloat((Math.sqrt(Math.pow(Math.abs(n-this.x),2)+Math.pow(Math.abs(h-this.y),2))/s.Attribute.unitProp).toFixed(1));this.r=Math.round(l*s.Attribute.unitProp),this.r<=4&&(l=.1,this.r=4);var y=Math.atan2(h-this.y,n-this.x);y=y>=0?y:2*Math.PI+y,this.angle=Math.round(180/Math.PI*y)*(Math.PI/180),this.intersect.pointEach(this.data(),this.canvasData),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.angle,this.angle,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),n=Math.cos(this.angle)*this.r+this.x,h=Math.sin(this.angle)*this.r+this.y,this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.arc(n,h,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.canvasData.setData(this.data()),this.buttonListen.recoverButtonFlag()}},t.prototype.data=function(){return{flag:this.flag,isChoosed:this.isChoosed,lock:!1,x:this.x,y:this.y,r:this.r,angle:this.angle,anticlockwise:this.anticlockwise}},t.prototype.rotatexy=function(t,i,a,s,e){return{x:a*Math.cos(e)+s*Math.sin(e)+t,y:a*Math.sin(e)-s*Math.cos(e)+i}},t}();i.Segment=n},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=a(1),n=function(){function t(t,i,a,n,h,o,r){this.flag=s.ToolsName.circular,this.isMobild=t,this.myCanvas=i,this.myCanvasNode=a,this.eventFlag=!1,this.eventCount=0,this.anticlockwise=!1,this.canvasData=o,this.rePaint=n,this.buttonListen=h,this.isChoosed=!1,this.fanAndRadius=[],this.fillStyle=s.Color.default,this.intersect=r,this.adsorption=new e.Adsorption(this.canvasData,this.intersect)}return t.prototype.startCallBack=function(t){if(this.eventFlag||0!==this.eventCount){if(this.eventFlag||2!==this.eventCount)return;this.eventFlag=!0;y=0,v=0;if(this.isMobild){var i=t;y=i.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,v=i.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var a=t;y=a.clientX-this.myCanvasNode.getBoundingClientRect().left,v=a.clientY-this.myCanvasNode.getBoundingClientRect().top}y+=s.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint(),y=(l=this.adsorption.adsorpToXY(y,v)).x,v=l.y;var e=parseFloat((Math.sqrt(Math.pow(Math.abs(y-this.x),2)+Math.pow(Math.abs(v-this.y),2))/s.Attribute.unitProp).toFixed(1)),n=Math.round(e*s.Attribute.unitProp);n<=4&&(e=.1,n=4);var h=Math.atan2(v-this.y,y-this.x);h=h>=0?h:2*Math.PI+h,h=Math.round(180/Math.PI*h)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,n,h,h,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.arc(this.x,this.y,n,0,2*Math.PI,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(this.x,this.y);var o=this.rotatexy(this.x,this.y,0,20,h);this.myCanvas.lineTo(o.x,o.y),o=this.rotatexy(this.x,this.y,n,20,h),this.myCanvas.lineTo(o.x,o.y),o=this.rotatexy(this.x,this.y,n,0,h),this.myCanvas.lineTo(o.x,o.y);for(var r=10;r<n;r+=10)o=this.rotatexy(this.x,this.y,r,0,h),this.myCanvas.moveTo(o.x,o.y),o=this.rotatexy(this.x,this.y,r,5,h),this.myCanvas.lineTo(o.x,o.y),(r+=10)<n&&(o=this.rotatexy(this.x,this.y,r,0,h),this.myCanvas.moveTo(o.x,o.y),o=this.rotatexy(this.x,this.y,r,10,h),this.myCanvas.lineTo(o.x,o.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(this.x,this.y),this.myCanvas.rotate(h),this.myCanvas.font="bold 22px Arial",this.myCanvas.fillStyle="black",this.myCanvas.fillText(e+"cm",n/2-22,-30),this.myCanvas.restore()}else{this.eventFlag=!0,this.eventCount=1,this.fanAndRadius=[];var l,y=0,v=0;if(this.isMobild){var c=t;y=c.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,v=c.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var u=t;y=u.clientX-this.myCanvasNode.getBoundingClientRect().left,v=u.clientY-this.myCanvasNode.getBoundingClientRect().top}y+=s.Attribute.mouseOffset,y=(l=this.adsorption.adsorpToXY(y,v)).x,v=l.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.arc(y,v,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()}},t.prototype.moveCallBack=function(t){if(this.eventFlag&&1===this.eventCount){var i=0,a=0;if(this.isMobild){var e=t;i=e.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=e.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,a=n.clientY-this.myCanvasNode.getBoundingClientRect().top}i+=s.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(r=this.adsorption.adsorpToXY(i,a)).x,a=r.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.arc(i,a,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()}else if(this.eventFlag||2!==this.eventCount){if(!this.eventFlag||2!==this.eventCount)return;i=0,a=0;if(this.isMobild){var h=t;i=h.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=h.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var o=t;i=o.clientX-this.myCanvasNode.getBoundingClientRect().left,a=o.clientY-this.myCanvasNode.getBoundingClientRect().top}i+=s.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(r=this.adsorption.adsorpToXY(i,a)).x,a=r.y;u=parseFloat((Math.sqrt(Math.pow(Math.abs(i-this.x),2)+Math.pow(Math.abs(a-this.y),2))/s.Attribute.unitProp).toFixed(1));(v=Math.round(u*s.Attribute.unitProp))<=4&&(u=.1,v=4),c=(c=Math.atan2(a-this.y,i-this.x))>=0?c:2*Math.PI+c,c=Math.round(180/Math.PI*c)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.arc(this.x,this.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,v,c,c,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.arc(this.x,this.y,v,0,2*Math.PI,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(this.x,this.y);C=this.rotatexy(this.x,this.y,0,20,c);this.myCanvas.lineTo(C.x,C.y),C=this.rotatexy(this.x,this.y,v,20,c),this.myCanvas.lineTo(C.x,C.y),C=this.rotatexy(this.x,this.y,v,0,c),this.myCanvas.lineTo(C.x,C.y);for(d=10;d<v;d+=10)C=this.rotatexy(this.x,this.y,d,0,c),this.myCanvas.moveTo(C.x,C.y),C=this.rotatexy(this.x,this.y,d,5,c),this.myCanvas.lineTo(C.x,C.y),(d+=10)<v&&(C=this.rotatexy(this.x,this.y,d,0,c),this.myCanvas.moveTo(C.x,C.y),C=this.rotatexy(this.x,this.y,d,10,c),this.myCanvas.lineTo(C.x,C.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(this.x,this.y),this.myCanvas.rotate(c),this.myCanvas.font="bold 22px Arial",this.myCanvas.fillStyle="black",this.myCanvas.fillText(u+"cm",v/2-22,-30),this.myCanvas.restore()}else{var r,i=0,a=0;if(this.isMobild){var l=t;i=l.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=l.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var y=t;i=y.clientX-this.myCanvasNode.getBoundingClientRect().left,a=y.clientY-this.myCanvasNode.getBoundingClientRect().top}i+=s.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(r=this.adsorption.adsorpToXY(i,a)).x,a=r.y;var v,c,u=parseFloat((Math.sqrt(Math.pow(Math.abs(i-this.x),2)+Math.pow(Math.abs(a-this.y),2))/s.Attribute.unitProp).toFixed(1));(v=Math.round(u*s.Attribute.unitProp))<=4&&(u=.1,v=4),c=(c=Math.atan2(a-this.y,i-this.x))>=0?c:2*Math.PI+c,c=Math.round(180/Math.PI*c)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.arc(this.x,this.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,v,c,c,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.arc(this.x,this.y,v,c,2*Math.PI+c,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(this.x,this.y);var C=this.rotatexy(this.x,this.y,0,20,c);this.myCanvas.lineTo(C.x,C.y),C=this.rotatexy(this.x,this.y,v,20,c),this.myCanvas.lineTo(C.x,C.y),C=this.rotatexy(this.x,this.y,v,0,c),this.myCanvas.lineTo(C.x,C.y);for(var d=10;d<v;d+=10)C=this.rotatexy(this.x,this.y,d,0,c),this.myCanvas.moveTo(C.x,C.y),C=this.rotatexy(this.x,this.y,d,5,c),this.myCanvas.lineTo(C.x,C.y),(d+=10)<v&&(C=this.rotatexy(this.x,this.y,d,0,c),this.myCanvas.moveTo(C.x,C.y),C=this.rotatexy(this.x,this.y,d,10,c),this.myCanvas.lineTo(C.x,C.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(this.x,this.y),this.myCanvas.rotate(c),this.myCanvas.font="bold 22px Arial",this.myCanvas.fillStyle="black",this.myCanvas.fillText(u+"cm",v/2-22,-30),this.myCanvas.restore()}},t.prototype.endCallBack=function(t){if(this.eventFlag&&1===this.eventCount){if(this.eventFlag=!1,this.eventCount=2,this.isMobild){var i=t;this.x=i.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=i.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var a=t;this.x=a.clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=a.clientY-this.myCanvasNode.getBoundingClientRect().top}this.x+=s.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint();var e=this.adsorption.adsorpToXY(this.x,this.y);this.x=e.x,this.y=e.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()}else{if(!this.eventFlag||2!==this.eventCount)return;this.eventFlag=!1,this.eventCount=0;var n=0,h=0;if(this.isMobild){var o=t;n=o.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,h=o.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var r=t;n=r.clientX-this.myCanvasNode.getBoundingClientRect().left,h=r.clientY-this.myCanvasNode.getBoundingClientRect().top}n+=s.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint(),n=(e=this.adsorption.adsorpToXY(n,h)).x,h=e.y;var l=parseFloat((Math.sqrt(Math.pow(Math.abs(n-this.x),2)+Math.pow(Math.abs(h-this.y),2))/s.Attribute.unitProp).toFixed(1));this.r=Math.round(l*s.Attribute.unitProp),this.r<=4&&(l=.1,this.r=4);var y=Math.atan2(h-this.y,n-this.x);y=y>=0?y:2*Math.PI+y,y=Math.round(180/Math.PI*y)*(Math.PI/180),this.intersect.pointEach(this.data(),this.canvasData),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.arc(this.x,this.y,this.r,0,2*Math.PI,!1),this.myCanvas.stroke(),this.canvasData.setData(this.data()),this.buttonListen.recoverButtonFlag()}},t.prototype.data=function(){return{flag:this.flag,isChoosed:this.isChoosed,lock:!1,x:this.x,y:this.y,r:this.r,anticlockwise:this.anticlockwise,fillStyle:this.fillStyle,fanAndRadius:this.fanAndRadius}},t.prototype.rotatexy=function(t,i,a,s,e){return{x:a*Math.cos(e)+s*Math.sin(e)+t,y:a*Math.sin(e)-s*Math.cos(e)+i}},t}();i.Circular=n},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=function(){function t(t,i,a){this.offset=20,this.index=[],this.isMobild=t,this.canvasData=i,this.myCanvasNode=a}return t.prototype.canvasClick=function(t){if(this.isMobild){var i=t;this.x=i.clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=i.clientY-this.myCanvasNode.getBoundingClientRect().top}else{var a=t;this.x=a.clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=a.clientY-this.myCanvasNode.getBoundingClientRect().top}this.isChoosed.call(this)},t.prototype.isChoosed=function(){var t=[];this.index=[];for(var i=this.canvasData.getData(),a=i.length-1;a>=0;a--){switch((y=i[a]).flag){case s.ToolsName.point:this.cirPoint(y)?t.push([a]):y.isChoosed=!1;break;case s.ToolsName.segment:this.cirSegment(y)?t.push([a]):y.isChoosed=!1;break;case s.ToolsName.circular:for(var e=y.fanAndRadius,n=e.length-1;n>=0;n--){var h=e[n];switch(h.flag){case s.ToolsName.fan:var o=h.hasChord;o.isShow&&(this.cirChord(o)?t.push([a,n,-1]):o.isChoosed=!1),this.cirFan(h)?t.push([a,n]):h.isChoosed=!1;break;case s.ToolsName.radius:this.cirRadius(h)?t.push([a,n]):h.isChoosed=!1;break;case s.ToolsName.diameter:this.cirDiameter(h)?t.push([a,n]):h.isChoosed=!1;break;case s.ToolsName.tangent:this.cirTangent(h)?t.push([a,n]):h.isChoosed=!1}}this.cirCircular(y)?t.push([a]):y.isChoosed=!1;break;case s.ToolsName.letterFlag:this.cirLetterFlag(y)?t.push([a]):y.isChoosed=!1}}a=0;for(var r=0,l=!1;0!==t.length;a++){a>t.length-1&&(a=0,r++);var y=t[a];if(0===r){if(l){this.indLen(y,i).isChoosed=!0,this.index=y;break}if(this.indLen(y,i).isChoosed){l=!0,this.indLen(y,i).isChoosed=!1;continue}}else if(r>0){this.indLen(y,i).isChoosed=!0,this.index=y;break}}},t.prototype.indLen=function(t,i){return 1===t.length?i[t[0]]:2===t.length?i[t[0]].fanAndRadius[t[1]]:3===t.length?i[t[0]].fanAndRadius[t[1]].hasChord:void 0},t.prototype.getIndex=function(){return this.index},t.prototype.recoverIndex=function(){this.index=[]},t.prototype.cancleSelected=function(){1===this.index.length?this.canvasData.getData(this.index[0]).isChoosed=!1:2===this.index.length?this.canvasData.getData(this.index[0]).fanAndRadius[this.index[1]].isChoosed=!1:3===this.index.length&&(this.canvasData.getData(this.index[0]).fanAndRadius[this.index[1]].hasChord.isChoosed=!1)},t.prototype.cirPoint=function(t){var i=t;return Math.sqrt(Math.pow(this.y-i.y,2)+Math.pow(this.x-i.x,2))<=s.Attribute.adsorpChoosed},t.prototype.cirSegment=function(t){var i=t,a=Math.sqrt(Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2)),e=Math.atan2(this.y-i.y,this.x-i.x);e=e>=0?e:2*Math.PI+e;var n=Math.abs(Math.sin(Math.abs(i.angle-e))*a),h=Math.cos(Math.abs(i.angle-e))*a;return n<=s.Attribute.adsorpChoosed&&h>=-s.Attribute.adsorpChoosed&&h<=i.r+s.Attribute.adsorpChoosed},t.prototype.cirCircular=function(t){var i=t;return Math.sqrt(Math.pow(this.y-i.y,2)+Math.pow(this.x-i.x,2))<=i.r},t.prototype.cirFan=function(t){var i=t;if(Math.sqrt(Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2))>i.r)return!1;var a=Math.atan2(this.y-i.y,this.x-i.x);if(a=a>=0?a:2*Math.PI+a,i.startAngle<=i.endAngle){if(a<i.startAngle||a>i.endAngle)return!1}else if(a>i.endAngle&&a<i.startAngle)return!1;return!0},t.prototype.cirRadius=function(t){var i=t,a=Math.sqrt(Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2)),e=Math.atan2(this.y-i.y,this.x-i.x);e=e>=0?e:2*Math.PI+e;var n=Math.abs(Math.sin(Math.abs(i.angle-e))*a),h=Math.cos(Math.abs(i.angle-e))*a;return n<=s.Attribute.adsorpChoosed&&h>=-s.Attribute.adsorpChoosed&&h<=i.r+s.Attribute.adsorpChoosed},t.prototype.cirDiameter=function(t){var i=t,a=Math.sqrt(Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2)),e=Math.atan2(this.y-i.y,this.x-i.x);e=e>=0?e:2*Math.PI+e;var n=Math.abs(Math.sin(Math.abs(i.angle-e))*a),h=Math.cos(Math.abs(i.angle-e))*a,o=Math.abs(Math.sin(Math.abs(i.angle+Math.PI-e))*a),r=Math.cos(Math.abs(i.angle+Math.PI-e))*a;return n<=s.Attribute.adsorpChoosed&&h>=-s.Attribute.adsorpChoosed&&h<=i.r+s.Attribute.adsorpChoosed||o<=s.Attribute.adsorpChoosed&&r>=-s.Attribute.adsorpChoosed&&r<=i.r+s.Attribute.adsorpChoosed},t.prototype.cirChord=function(t){var i=t;if(!i.isShow)return!1;var a=Math.atan2(i.endY-i.y,i.endX-i.x);a=a>=0?a:2*Math.PI+a;var e=Math.sqrt(Math.pow(i.endX-i.x,2)+Math.pow(i.endY-i.y,2)),n=Math.sqrt(Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2)),h=Math.atan2(this.y-i.y,this.x-i.x);h=h>=0?h:2*Math.PI+h;var o=Math.abs(Math.sin(Math.abs(a-h))*n),r=Math.cos(Math.abs(a-h))*n;return o<=s.Attribute.adsorpChoosed&&r>=-s.Attribute.adsorpChoosed&&r<=e+s.Attribute.adsorpChoosed},t.prototype.cirTangent=function(t){var i=t,a=Math.sqrt(Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2)),e=Math.atan2(this.y-i.y,this.x-i.x);e=e>=0?e:2*Math.PI+e;var n=Math.abs(Math.sin(Math.abs(i.angle-e))*a),h=Math.cos(Math.abs(i.angle-e))*a;return n<=s.Attribute.adsorpChoosed&&h>=-s.Attribute.adsorpChoosed&&h<=i.r+s.Attribute.adsorpChoosed},t.prototype.cirLetterFlag=function(t){var i=t;return this.x>=i.x-s.Attribute.adsorpChoosed&&this.x<=i.x+(s.Attribute.adsorpChoosed+s.Attribute.adsorpChoosed/2)&&this.y>=i.y-(s.Attribute.adsorpChoosed-s.Attribute.adsorpChoosed/2)&&this.y<=i.y+2*s.Attribute.adsorpChoosed},t}();i.CanvasChoosed=e},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=function(){function t(t,i,a,e,n,h,o,r){this.flag=s.ToolsName.fan,this.isMobild=t,this.myCanvas=i,this.myCanvasNode=a,this.eventFlag=!1,this.eventCount=0,this.anticlockwise=!1,this.canvasData=h,this.rePaint=e,this.buttonListen=n,this.isChoosed=!1,this.canvasChoosed=o,this.fillStyle=s.Color.default,this.intersect=r}return t.prototype.startCallBack=function(t){if(this.eventFlag||0!==this.eventCount){if(!this.eventFlag&&2===this.eventCount){this.eventFlag=!0,this.eventCount=3;o=0,r=0;if(this.isMobild){var i=t;o=i.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,r=i.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var a=t;o=a.clientX-this.myCanvasNode.getBoundingClientRect().left,r=a.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();c=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(c[0]).x,this.y=this.canvasData.getData(c[0]).y,this.r=this.canvasData.getData(c[0]).r,(v=(v=Math.atan2(r-this.y,o-this.x))>=0?v:2*Math.PI+v)<this.startAngle&&(v+=2*Math.PI),v-this.startAngle>=3*Math.PI/2&&v-this.startAngle<=2*Math.PI?v=this.startAngle:v-this.startAngle>Math.PI&&v-this.startAngle<3*Math.PI/2&&(v=(this.startAngle+Math.PI)%(2*Math.PI)),v=Math.round(180/Math.PI*v)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.startAngle,this.startAngle,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,v,v,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.arc(this.x,this.y,30,this.startAngle,v,!1),this.myCanvas.stroke();var e=0,n=0,h=0;this.startAngle<=v?(e=180/Math.PI*(v-this.startAngle),n=40*Math.cos((this.startAngle+v)/2)+this.x,h=40*Math.sin((this.startAngle+v)/2)+this.y):(e=180/Math.PI*(2*Math.PI-this.startAngle+v),n=40*Math.cos((this.startAngle+v)/2-Math.PI)+this.x,h=40*Math.sin((this.startAngle+v)/2-Math.PI)+this.y),e=Math.round(e),this.myCanvas.beginPath(),this.myCanvas.font="bold 22px Arial",this.myCanvas.textAlign="center",this.myCanvas.fillStyle="black",this.myCanvas.fillText(e+"",n+22,h+22)}}else{this.hasChord={flag:s.ToolsName.chord,isChoosed:!1,lock:!1,x:0,y:0,endX:0,endY:0,isShow:!1},this.eventFlag=!0,this.eventCount=1;var o=0,r=0;if(this.isMobild){var l=t;o=l.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,r=l.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var y=t;o=y.clientX-this.myCanvasNode.getBoundingClientRect().left,r=y.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var v,c=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(c[0]).x,this.y=this.canvasData.getData(c[0]).y,this.r=this.canvasData.getData(c[0]).r,v=(v=Math.atan2(r-this.y,o-this.x))>=0?v:2*Math.PI+v;var u=Math.round(180/Math.PI*v)*(Math.PI/180);this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,u,u,this.anticlockwise),this.myCanvas.stroke(),this.myCanvas.closePath()}},t.prototype.moveCallBack=function(t){if(this.eventFlag||0!==this.eventCount)if(this.eventFlag&&1===this.eventCount){o=0,r=0;if(this.isMobild){var i=t;o=i.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,r=i.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var a=t;o=a.clientX-this.myCanvasNode.getBoundingClientRect().left,r=a.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();v=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(v[0]).x,this.y=this.canvasData.getData(v[0]).y,this.r=this.canvasData.getData(v[0]).r,p=(p=Math.atan2(r-this.y,o-this.x))>=0?p:2*Math.PI+p;var e=Math.round(180/Math.PI*p)*(Math.PI/180);this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,e,e,this.anticlockwise),this.myCanvas.stroke(),this.myCanvas.closePath()}else if(this.eventFlag||2!==this.eventCount){if(this.eventFlag&&3===this.eventCount){o=0,r=0;if(this.isMobild){var n=t;o=n.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,r=n.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var h=t;o=h.clientX-this.myCanvasNode.getBoundingClientRect().left,r=h.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();v=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(v[0]).x,this.y=this.canvasData.getData(v[0]).y,this.r=this.canvasData.getData(v[0]).r,(p=(p=Math.atan2(r-this.y,o-this.x))>=0?p:2*Math.PI+p)<this.startAngle&&(p+=2*Math.PI),p-this.startAngle>=3*Math.PI/2&&p-this.startAngle<=2*Math.PI?p=this.startAngle:p-this.startAngle>Math.PI&&p-this.startAngle<3*Math.PI/2&&(p=(this.startAngle+Math.PI)%(2*Math.PI)),p=Math.round(180/Math.PI*p)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.startAngle,this.startAngle,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,p,p,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.arc(this.x,this.y,30,this.startAngle,p,!1),this.myCanvas.stroke();c=0,u=40,C=0,d=0;this.startAngle<=p?(c=180/Math.PI*(p-this.startAngle),C=u*Math.cos((this.startAngle+p)/2)+this.x,d=u*Math.sin((this.startAngle+p)/2)+this.y):(c=180/Math.PI*(2*Math.PI-this.startAngle+p),C=u*Math.cos((this.startAngle+p)/2-Math.PI)+this.x,d=u*Math.sin((this.startAngle+p)/2-Math.PI)+this.y),c=Math.round(c),this.myCanvas.beginPath(),this.myCanvas.font="bold 22px Arial",this.myCanvas.textAlign="center",this.myCanvas.fillStyle="black",this.myCanvas.fillText(c+"",C+22,d+22)}}else{var o=0,r=0;if(this.isMobild){var l=t;o=l.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,r=l.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var y=t;o=y.clientX-this.myCanvasNode.getBoundingClientRect().left,r=y.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var v=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(v[0]).x,this.y=this.canvasData.getData(v[0]).y,this.r=this.canvasData.getData(v[0]).r,(p=(p=Math.atan2(r-this.y,o-this.x))>=0?p:2*Math.PI+p)<this.startAngle&&(p+=2*Math.PI),p-this.startAngle>=3*Math.PI/2&&p-this.startAngle<=2*Math.PI?p=this.startAngle:p-this.startAngle>Math.PI&&p-this.startAngle<3*Math.PI/2&&(p=(this.startAngle+Math.PI)%(2*Math.PI)),p=Math.round(180/Math.PI*p)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.startAngle,this.startAngle,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,p,p,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.arc(this.x,this.y,30,this.startAngle,p,!1),this.myCanvas.stroke();var c=0,u=40,C=0,d=0;this.startAngle<=p?(c=180/Math.PI*(p-this.startAngle),C=u*Math.cos((this.startAngle+p)/2)+this.x,d=u*Math.sin((this.startAngle+p)/2)+this.y):(c=180/Math.PI*(2*Math.PI-this.startAngle+p),C=u*Math.cos((this.startAngle+p)/2-Math.PI)+this.x,d=u*Math.sin((this.startAngle+p)/2-Math.PI)+this.y),c=Math.round(c),this.myCanvas.beginPath(),this.myCanvas.font="bold 22px Arial",this.myCanvas.textAlign="center",this.myCanvas.fillStyle="black",this.myCanvas.fillText(c+"",C+22,d+22)}else{var o=0,r=0;if(this.isMobild){var g=t;o=g.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,r=g.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var m=t;o=m.clientX-this.myCanvasNode.getBoundingClientRect().left,r=m.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var p,v=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(v[0]).x,this.y=this.canvasData.getData(v[0]).y,this.r=this.canvasData.getData(v[0]).r,p=(p=Math.atan2(r-this.y,o-this.x))>=0?p:2*Math.PI+p,p=Math.round(180/Math.PI*p)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,p,p,this.anticlockwise),this.myCanvas.stroke(),this.myCanvas.closePath()}},t.prototype.endCallBack=function(t){if(this.eventFlag&&1===this.eventCount){this.eventFlag=!1,this.eventCount=2;var i=0,a=0;if(this.isMobild){var e=t;i=e.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=e.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,a=n.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var h=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(h[0]).x,this.y=this.canvasData.getData(h[0]).y,this.r=this.canvasData.getData(h[0]).r,l=(l=Math.atan2(a-this.y,i-this.x))>=0?l:2*Math.PI+l,this.startAngle=Math.round(180/Math.PI*l)*(Math.PI/180),this.hasChord.x=Math.cos(this.startAngle)*this.r+this.x,this.hasChord.y=Math.sin(this.startAngle)*this.r+this.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.startAngle,this.startAngle,this.anticlockwise),this.myCanvas.stroke(),this.myCanvas.closePath()}else if(this.eventFlag&&3===this.eventCount){this.eventFlag=!1,this.eventCount=0;i=0,a=0;if(this.isMobild){var o=t;i=o.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=o.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var r=t;i=r.clientX-this.myCanvasNode.getBoundingClientRect().left,a=r.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var l;h=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(h[0]).x,this.y=this.canvasData.getData(h[0]).y,this.r=this.canvasData.getData(h[0]).r,(l=(l=Math.atan2(a-this.y,i-this.x))>=0?l:2*Math.PI+l)<this.startAngle&&(l+=2*Math.PI),l-this.startAngle>=3*Math.PI/2&&l-this.startAngle<=2*Math.PI?l=this.startAngle:l-this.startAngle>Math.PI&&l-this.startAngle<3*Math.PI/2&&(l=(this.startAngle+Math.PI)%(2*Math.PI)),this.endAngle=Math.round(180/Math.PI*l)*(Math.PI/180),this.hasChord.endX=Math.cos(this.endAngle)*this.r+this.x,this.hasChord.endY=Math.sin(this.endAngle)*this.r+this.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.startAngle,this.startAngle,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.endAngle,this.endAngle,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.canvasData.getData(this.canvasChoosed.getIndex()[0]).fanAndRadius.push(this.data()),this.buttonListen.recoverButtonFlag(),this.canvasChoosed.recoverIndex()}},t.prototype.data=function(){return{flag:this.flag,isChoosed:this.isChoosed,lock:!1,x:this.x,y:this.y,r:this.r,startAngle:this.startAngle,endAngle:this.endAngle,fillStyle:this.fillStyle,anticlockwise:this.anticlockwise,hasChord:this.hasChord}},t}();i.Fan=e},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=function(){function t(t,i,a,e,n,h,o,r){this.flag=s.ToolsName.radius,this.isMobild=t,this.myCanvas=i,this.myCanvasNode=a,this.eventFlag=!1,this.eventCount=0,this.anticlockwise=!1,this.canvasData=h,this.rePaint=e,this.buttonListen=n,this.isChoosed=!1,this.canvasChoosed=o,this.intersect=r}return t.prototype.startCallBack=function(t){if(!this.eventFlag&&0===this.eventCount){this.eventFlag=!0,this.eventCount=1;var i=0,a=0;if(this.isMobild){var e=t;i=e.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=e.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,a=n.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var h=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(h[0]).x,this.y=this.canvasData.getData(h[0]).y,this.r=this.canvasData.getData(h[0]).r;var o=Math.atan2(a-this.y,i-this.x);o=o>=0?o:2*Math.PI+o,this.angle=Math.round(180/Math.PI*o)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.angle,this.angle,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke()}},t.prototype.moveCallBack=function(t){if(this.eventFlag||0!==this.eventCount){if(this.eventFlag&&1===this.eventCount){e=0,n=0;if(this.isMobild){var i=t;e=i.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,n=i.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var a=t;e=a.clientX-this.myCanvasNode.getBoundingClientRect().left,n=a.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();l=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(l[0]).x,this.y=this.canvasData.getData(l[0]).y,this.r=this.canvasData.getData(l[0]).r,r=(r=Math.atan2(n-this.y,e-this.x))>=0?r:2*Math.PI+r,r=Math.round(180/Math.PI*r)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,r,r,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke()}}else{var e=0,n=0;if(this.isMobild){var h=t;e=h.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,n=h.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var o=t;e=o.clientX-this.myCanvasNode.getBoundingClientRect().left,n=o.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var r,l=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(l[0]).x,this.y=this.canvasData.getData(l[0]).y,this.r=this.canvasData.getData(l[0]).r,r=(r=Math.atan2(n-this.y,e-this.x))>=0?r:2*Math.PI+r,r=Math.round(180/Math.PI*r)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,r,r,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke()}},t.prototype.endCallBack=function(t){if(this.eventFlag&&1===this.eventCount){this.eventFlag=!1,this.eventCount=0;var i=0,a=0;if(this.isMobild){var e=t;i=e.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=e.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,a=n.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var h=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(h[0]).x,this.y=this.canvasData.getData(h[0]).y,this.r=this.canvasData.getData(h[0]).r;var o=Math.atan2(a-this.y,i-this.x);o=o>=0?o:2*Math.PI+o,this.angle=Math.round(180/Math.PI*o)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.angle,this.angle,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.canvasData.getData(this.canvasChoosed.getIndex()[0]).fanAndRadius.push(this.data()),this.buttonListen.recoverButtonFlag(),this.canvasChoosed.recoverIndex()}},t.prototype.data=function(){return{flag:this.flag,isChoosed:this.isChoosed,lock:!1,x:this.x,y:this.y,r:this.r,angle:this.angle,anticlockwise:this.anticlockwise}},t}();i.Radius=e},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=function(){function t(t,i,a,e,n,h,o,r){this.flag=s.ToolsName.diameter,this.isMobild=t,this.myCanvas=i,this.myCanvasNode=a,this.eventFlag=!1,this.eventCount=0,this.anticlockwise=!1,this.canvasData=h,this.rePaint=e,this.buttonListen=n,this.isChoosed=!1,this.canvasChoosed=o,this.intersect=r}return t.prototype.startCallBack=function(t){if(!this.eventFlag&&0===this.eventCount){this.eventFlag=!0,this.eventCount=1;var i=0,a=0;if(this.isMobild){var e=t;i=e.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=e.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,a=n.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var h=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(h[0]).x,this.y=this.canvasData.getData(h[0]).y,this.r=this.canvasData.getData(h[0]).r;var o=Math.atan2(a-this.y,i-this.x);o=o>=0?o:2*Math.PI+o,this.angle=Math.round(180/Math.PI*o)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.angle,this.angle,this.anticlockwise),this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.angle+Math.PI,this.angle+Math.PI,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke()}},t.prototype.moveCallBack=function(t){if(this.eventFlag||0!==this.eventCount){if(this.eventFlag&&1===this.eventCount){e=0,n=0;if(this.isMobild){var i=t;e=i.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,n=i.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var a=t;e=a.clientX-this.myCanvasNode.getBoundingClientRect().left,n=a.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();l=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(l[0]).x,this.y=this.canvasData.getData(l[0]).y,this.r=this.canvasData.getData(l[0]).r,r=(r=Math.atan2(n-this.y,e-this.x))>=0?r:2*Math.PI+r,r=Math.round(180/Math.PI*r)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,r,r,this.anticlockwise),this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,r+Math.PI,r+Math.PI,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke()}}else{var e=0,n=0;if(this.isMobild){var h=t;e=h.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,n=h.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var o=t;e=o.clientX-this.myCanvasNode.getBoundingClientRect().left,n=o.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var r,l=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(l[0]).x,this.y=this.canvasData.getData(l[0]).y,this.r=this.canvasData.getData(l[0]).r,r=(r=Math.atan2(n-this.y,e-this.x))>=0?r:2*Math.PI+r,r=Math.round(180/Math.PI*r)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,r,r,this.anticlockwise),this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,r+Math.PI,r+Math.PI,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke()}},t.prototype.endCallBack=function(t){if(this.eventFlag&&1===this.eventCount){this.eventFlag=!1,this.eventCount=0;var i=0,a=0;if(this.isMobild){var e=t;i=e.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=e.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,a=n.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var h=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(h[0]).x,this.y=this.canvasData.getData(h[0]).y,this.r=this.canvasData.getData(h[0]).r;var o=Math.atan2(a-this.y,i-this.x);o=o>=0?o:2*Math.PI+o,this.angle=Math.round(180/Math.PI*o)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.angle,this.angle,this.anticlockwise),this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.angle+Math.PI,this.angle+Math.PI,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.canvasData.getData(this.canvasChoosed.getIndex()[0]).fanAndRadius.push(this.data()),this.buttonListen.recoverButtonFlag(),this.canvasChoosed.recoverIndex()}},t.prototype.data=function(){return{flag:this.flag,isChoosed:this.isChoosed,lock:!1,x:this.x,y:this.y,r:this.r,angle:this.angle,anticlockwise:this.anticlockwise}},t}();i.Diameter=e},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=function(){function t(t,i,a,e,n,h,o,r){this.flag=s.ToolsName.tangent,this.isMobild=t,this.myCanvas=i,this.myCanvasNode=a,this.eventFlag=!1,this.eventCount=0,this.anticlockwise=!1,this.canvasData=h,this.rePaint=e,this.buttonListen=n,this.isChoosed=!1,this.canvasChoosed=o,this.intersect=r}return t.prototype.startCallBack=function(t){if(!this.eventFlag&&0===this.eventCount){this.eventFlag=!0,this.eventCount=1;var i=0,a=0;if(this.isMobild){var e=t;i=e.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=e.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,a=n.clientY-this.myCanvasNode.getBoundingClientRect().top}i+=s.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint();var h=this.canvasChoosed.getIndex(),o=this.canvasData.getData(h[0]);this.cirX=o.x,this.cirY=o.y,this.cirR=o.r;var r=Math.sqrt(Math.pow(i-this.cirX,2)+Math.pow(a-this.cirY,2)),l=Math.asin(this.cirR/r),y=parseFloat((Math.cos(l)*r/s.Attribute.unitProp).toFixed(1))*s.Attribute.unitProp;y<s.Attribute.unitProp/2&&(y=s.Attribute.unitProp/2);var v=2*y,c=Math.atan2(a-this.cirY,i-this.cirX);c=c>=0?c:2*Math.PI+c;var u=Math.PI-l+c;u=u>=2*Math.PI?u-2*Math.PI:u;var C=Math.cos(u)*y+i,d=Math.sin(u)*y+a;this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(i,a),this.myCanvas.arc(i,a,v,u,u,this.anticlockwise),this.myCanvas.stroke(),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.moveTo(C,d),this.myCanvas.arc(C,d,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()}},t.prototype.moveCallBack=function(t){if(this.eventFlag&&1===this.eventCount){var i=0,a=0;if(this.isMobild){var e=t;i=e.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=e.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,a=n.clientY-this.myCanvasNode.getBoundingClientRect().top}i+=s.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint();var h=Math.sqrt(Math.pow(i-this.cirX,2)+Math.pow(a-this.cirY,2)),o=Math.asin(this.cirR/h),r=parseFloat((Math.cos(o)*h/s.Attribute.unitProp).toFixed(1))*s.Attribute.unitProp;r<s.Attribute.unitProp/2&&(r=s.Attribute.unitProp/2);var l=2*r,y=Math.atan2(a-this.cirY,i-this.cirX);y=y>=0?y:2*Math.PI+y;var v=Math.PI-o+y;v=v>=2*Math.PI?v-2*Math.PI:v;var c=Math.cos(v)*r+i,u=Math.sin(v)*r+a,C=parseFloat((l/s.Attribute.unitProp).toFixed(1));this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(i,a),this.myCanvas.arc(i,a,l,v,v,this.anticlockwise),this.myCanvas.stroke(),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.moveTo(c,u),this.myCanvas.arc(c,u,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(i,a);var d=this.rotatexy(i,a,0,20,v);this.myCanvas.lineTo(d.x,d.y),d=this.rotatexy(i,a,l,20,v),this.myCanvas.lineTo(d.x,d.y),d=this.rotatexy(i,a,l,0,v),this.myCanvas.lineTo(d.x,d.y),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=2;for(var g=10;g<l;g+=10)d=this.rotatexy(i,a,g,0,v),this.myCanvas.moveTo(d.x,d.y),d=this.rotatexy(i,a,g,5,v),this.myCanvas.lineTo(d.x,d.y),(g+=10)<l&&(d=this.rotatexy(i,a,g,0,v),this.myCanvas.moveTo(d.x,d.y),d=this.rotatexy(i,a,g,10,v),this.myCanvas.lineTo(d.x,d.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(i,a),this.myCanvas.rotate(v),this.myCanvas.font=s.Attribute.propFont,this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.fillText(C+"cm",l/2-22,-30),this.myCanvas.restore()}},t.prototype.endCallBack=function(t){if(this.eventFlag&&1===this.eventCount){if(this.eventFlag=!1,this.eventCount=0,this.isMobild){var i=t;this.x=i.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=i.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var a=t;this.x=a.clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=a.clientY-this.myCanvasNode.getBoundingClientRect().top}this.x+=s.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint();var e=Math.sqrt(Math.pow(this.x-this.cirX,2)+Math.pow(this.y-this.cirY,2)),n=Math.asin(this.cirR/e);if(isNaN(n))return this.buttonListen.recoverButtonFlag(),void this.canvasChoosed.recoverIndex();var h=parseFloat((Math.cos(n)*e/s.Attribute.unitProp).toFixed(1))*s.Attribute.unitProp;h<s.Attribute.unitProp/2&&(h=s.Attribute.unitProp/2);var o=Math.atan2(this.y-this.cirY,this.x-this.cirX);o=o>=0?o:2*Math.PI+o;var r=Math.PI-n+o;this.angle=r>=2*Math.PI?r-2*Math.PI:r,this.insePointX=Math.cos(this.angle)*h+this.x,this.insePointY=Math.sin(this.angle)*h+this.y,this.r=2*h;var l=Math.cos(this.angle)*this.r+this.x,y=Math.sin(this.angle)*this.r+this.y;this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.angle,this.angle,this.anticlockwise),this.myCanvas.stroke(),this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.moveTo(this.insePointX,this.insePointY),this.myCanvas.arc(this.insePointX,this.insePointY,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.moveTo(l,y),this.myCanvas.arc(l,y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.canvasData.getData(this.canvasChoosed.getIndex()[0]).fanAndRadius.push(this.data()),this.buttonListen.recoverButtonFlag(),this.canvasChoosed.recoverIndex()}},t.prototype.rotatexy=function(t,i,a,s,e){return{x:a*Math.cos(e)+s*Math.sin(e)+t,y:a*Math.sin(e)-s*Math.cos(e)+i}},t.prototype.data=function(){return{flag:this.flag,isChoosed:this.isChoosed,lock:!1,x:this.x,y:this.y,r:this.r,angle:this.angle,insePointX:this.insePointX,insePointY:this.insePointY,cirX:this.cirX,cirY:this.cirY,cirR:this.cirR,anticlockwise:this.anticlockwise}},t}();i.Tangent=e},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=function(){function t(t,i,a,s){this.canvasChoosed=t,this.canvasData=i,this.rePaint=a,this.textFlag=!1,this.oldtext="",this.index=[],this.intersect=s,this.inputListen(),this.focusListen(),this.blurListen()}return t.prototype.init=function(t,i){this.auxiliaryListen=t,this.buttonListen=i},t.prototype.inputListen=function(){var t=this;document.getElementById(s.Attribute.btnTextValueID).addEventListener("input",function(i){i=i||window.event;var a=document.getElementById(s.Attribute.btnTextValueID),e=a.value;e=e.replace(/[^\d\.]/g,"").replace(/^\./g,"").replace(/\.{1,}/g,".").replace(/^(\d+)\.(\d).*/,"$1.$2"),a.value=e;var n=t.canvasChoosed.getIndex();if(2===n.length)switch(t.canvasData.getData(n[0]).fanAndRadius[n[1]].flag){case s.ToolsName.fan:e=e.replace(/\.{1,}/g,""),a.value=e,parseFloat(e)<=0?a.value="1":parseFloat(e)>=360&&(a.value="359")}},!1)},t.prototype.blurListen=function(){var t=this;document.getElementById(s.Attribute.btnTextValueID).addEventListener("blur",function(i){i=i||FocusEvent.prototype;var a=document.getElementById(s.Attribute.btnTextValueID);if(0===t.index.length){if(0===t.canvasChoosed.getIndex().length)return;if(t.auxiliaryListen.getButtonFlag()!==s.Auxiliary.default||t.buttonListen.getButtonFlag()!==s.ToolsName.default)return}var e=t.index;if(t.textFlag=!1,1===e.length)switch((v=t.canvasData.getData(e[0])).flag){case s.ToolsName.segment:0!==a.value.length&&0!==parseFloat(a.value)||(a.value="0.1"),v.r=parseFloat(a.value)*s.Attribute.unitProp;break;case s.ToolsName.circular:0!==a.value.length&&0!==parseFloat(a.value)||(a.value="0.1"),v.r=parseFloat(a.value)*s.Attribute.unitProp;for(var n=0,h=v.fanAndRadius;n<h.length;n++){var o=h[n];switch(o.flag){case s.ToolsName.fan:var r=o;r.r=parseFloat(a.value)*s.Attribute.unitProp,r.hasChord.x=Math.cos(r.startAngle)*r.r+r.x,r.hasChord.y=Math.sin(r.startAngle)*r.r+r.y,r.hasChord.endX=Math.cos(r.endAngle)*r.r+r.x,r.hasChord.endY=Math.sin(r.endAngle)*r.r+r.y;break;case s.ToolsName.radius:case s.ToolsName.diameter:o.r=parseFloat(a.value)*s.Attribute.unitProp;break;case s.ToolsName.tangent:var l=o,y=Math.atan2(l.insePointY-l.cirY,l.insePointX-l.cirX);y=y>=0?y:2*Math.PI+y,l.cirR=parseFloat(a.value)*s.Attribute.unitProp,l.insePointX=Math.cos(y)*l.cirR+l.cirX,l.insePointY=Math.sin(y)*l.cirR+l.cirY,l.x=l.insePointX-Math.cos(l.angle)*(l.r/2),l.y=l.insePointY-Math.sin(l.angle)*(l.r/2)}}}else if(2===e.length){var v;switch((v=t.canvasData.getData(e[0]).fanAndRadius[e[1]]).flag){case s.ToolsName.fan:0!==a.value.length&&0!==parseInt(a.value,10)||(a.value="1"),v.startAngle<=v.endAngle?v.endAngle=Math.PI/180*parseFloat(a.value)+v.startAngle:v.endAngle=Math.PI/180*parseFloat(a.value)-2*Math.PI+v.startAngle,v.hasChord.x=Math.cos(v.startAngle)*v.r+v.x,v.hasChord.y=Math.sin(v.startAngle)*v.r+v.y,v.hasChord.endX=Math.cos(v.endAngle)*v.r+v.x,v.hasChord.endY=Math.sin(v.endAngle)*v.r+v.y}}t.canvasChoosed.cancleSelected(),t.canvasChoosed.recoverIndex(),t.rePaint.clearCanvas(),setTimeout(function(){t.rePaint.rePaint(),t.intersect.repaintPoint(),a.value="",t.index=[]})},!1)},t.prototype.focusListen=function(){var t=this;document.getElementById(s.Attribute.btnTextValueID).addEventListener("focus",function(i){i=i||FocusEvent.prototype,t.index=[];var a=document.getElementById(s.Attribute.btnTextValueID);if(0!==t.canvasChoosed.getIndex().length)if(t.auxiliaryListen.getButtonFlag()===s.Auxiliary.default&&t.buttonListen.getButtonFlag()===s.ToolsName.default){var e=t.canvasChoosed.getIndex();if(t.textFlag=!0,1===e.length)switch((n=t.canvasData.getData(e[0])).flag){case s.ToolsName.circular:case s.ToolsName.segment:a.value=Math.round(n.r)/s.Attribute.unitProp+"";break;default:a.blur()}else if(2===e.length){var n;switch((n=t.canvasData.getData(e[0]).fanAndRadius[e[1]]).flag){case s.ToolsName.fan:var h=n.startAngle,o=n.endAngle;a.value=h<=o?Math.round(180/Math.PI*(o-h)).toString():Math.round(180/Math.PI*(2*Math.PI-h+o)).toString();break;default:a.blur()}}t.index=e,t.oldtext=a.value}else a.blur();else a.blur()},!1)},t.prototype.getTextFlag=function(){return this.textFlag},t.prototype.recoverTextFlag=function(){this.textFlag=!1},t}();i.TextBox=e},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=function(){function t(t,i,a,s){this.eventClick=t,this.canvasChoosed=i,this.canvasData=a,this.rePaint=s,this.buttonBlack(),this.buttonRed(),this.buttonBlue(),this.buttonGreen(),this.buttonYellow(),this.buttonPurple()}return t.prototype.init=function(t,i){this.auxiliaryListen=t,this.buttonListen=i},t.prototype.colorBtnListen=function(t,i){var a=this;document.getElementById(t).addEventListener(this.eventClick,function(t){if(t=t||window.event,a.auxiliaryListen.getButtonFlag()===s.Auxiliary.default&&a.buttonListen.getButtonFlag()===s.ToolsName.default){var e=a.canvasChoosed.getIndex();if(0!==e.length){if(1===e.length)(n=a.canvasData.getData(e[0])).flag===s.ToolsName.circular&&(n.fillStyle=i),n.isChoosed=!1,a.canvasChoosed.recoverIndex();else if(2===e.length){var n;(n=a.canvasData.getData(e[0]).fanAndRadius[e[1]]).flag===s.ToolsName.fan&&(n.fillStyle=i),n.isChoosed=!1,a.canvasChoosed.recoverIndex()}a.rePaint.clearCanvas(),a.rePaint.rePaint()}}},!1)},t.prototype.buttonBlack=function(){this.colorBtnListen(s.Attribute.colorBlackID,s.Color.black)},t.prototype.buttonRed=function(){this.colorBtnListen(s.Attribute.colorRedID,s.Color.red)},t.prototype.buttonBlue=function(){this.colorBtnListen(s.Attribute.colorBlueID,s.Color.blue)},t.prototype.buttonGreen=function(){this.colorBtnListen(s.Attribute.colorGreenID,s.Color.green)},t.prototype.buttonYellow=function(){this.colorBtnListen(s.Attribute.colorYellowID,s.Color.yellow)},t.prototype.buttonPurple=function(){this.colorBtnListen(s.Attribute.colorPurpleID,s.Color.purple)},t}();i.FillColor=e},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=function(){function t(t,i,a,e,n){this.eventClick=t,this.canvasChoosed=i,this.canvasData=a,this.rePaint=e,this.auxiliaryFlag=s.Auxiliary.default,this.intersect=n,this.buttonRubber(),this.buttonRule(),this.buttonProtractor(),this.buttonRotate(),this.buttonFlag(),this.buttonCancle()}return t.prototype.init=function(t,i){this.buttonListen=t,this.textBox=i},t.prototype.btnListen=function(t,i){var a=this;document.getElementById(t).addEventListener(a.eventClick,function(t){t=t||window.event,a.auxiliaryFlag===s.Auxiliary.default&&a.buttonListen.getButtonFlag()===s.ToolsName.default&&(a.textBox.getTextFlag()||i.call(a,t))},!1)},t.prototype.buttonFlag=function(){this.btnListen(s.Attribute.btnLetFlagID,function(t){this.auxiliaryFlag=s.Auxiliary.flag,t.srcElement.className="choosed",this.canvasChoosed.cancleSelected(),this.canvasChoosed.recoverIndex(),this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.repaintPoint()})},t.prototype.buttonRubber=function(){this.btnListen(s.Attribute.btnRubberID,function(t){var i=this.canvasChoosed.getIndex();0!==i.length&&(this.canvasData.delData(i),this.canvasChoosed.recoverIndex(),this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.recoverButtonFlag(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint())})},t.prototype.buttonRule=function(){this.btnListen(s.Attribute.btnRuleID,function(t){this.auxiliaryFlag=s.Auxiliary.rule,document.getElementById(s.Attribute.btnRuleID).className="choosed",this.canvasChoosed.cancleSelected(),this.canvasChoosed.recoverIndex(),this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.repaintPoint()})},t.prototype.buttonProtractor=function(){this.btnListen(s.Attribute.btnProtractorID,function(t){this.auxiliaryFlag=s.Auxiliary.protractor,t.srcElement.className="choosed",this.canvasChoosed.cancleSelected(),this.canvasChoosed.recoverIndex(),this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.repaintPoint()})},t.prototype.buttonRotate=function(){this.btnListen(s.Attribute.btnRotateID,function(t){var i=this.canvasChoosed.getIndex();if(1===i.length&&this.canvasData.getData(i[0]).flag===s.ToolsName.segment)this.auxiliaryFlag=s.Auxiliary.rotate,t.srcElement.className="choosed";else if(2===i.length&&this.canvasData.getData(i[0]).fanAndRadius[i[1]].flag===s.ToolsName.fan)this.auxiliaryFlag=s.Auxiliary.rotate,t.srcElement.className="choosed";else if(2===i.length&&this.canvasData.getData(i[0]).fanAndRadius[i[1]].flag===s.ToolsName.radius)this.auxiliaryFlag=s.Auxiliary.rotate,t.srcElement.className="choosed";else{if(2!==i.length||this.canvasData.getData(i[0]).fanAndRadius[i[1]].flag!==s.ToolsName.diameter)return;this.auxiliaryFlag=s.Auxiliary.rotate,t.srcElement.className="choosed"}})},t.prototype.buttonCancle=function(){this.btnListen(s.Attribute.btnCancleID,function(t){this.canvasChoosed.cancleSelected(),this.canvasChoosed.recoverIndex();var i=this.canvasData.getData().length;if(0!==i){var a=this.canvasData.getData(i-1);if(a.flag===s.ToolsName.circular){var e=a.fanAndRadius;if(0!==e.length){var n=e[e.length-1];n.flag===s.ToolsName.fan&&n.hasChord.isShow?this.canvasData.delData([i-1,e.length-1,-1]):this.canvasData.delData([i-1,e.length-1])}else this.canvasData.delData([i-1])}else this.canvasData.delData([i-1])}this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.recoverButtonFlag(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint()})},t.prototype.getButtonFlag=function(){return this.auxiliaryFlag},t.prototype.recoverButtonFlag=function(){this.auxiliaryFlag=s.Auxiliary.default,[s.Attribute.btnLetFlagID,s.Attribute.btnRubberID,s.Attribute.btnRuleID,s.Attribute.btnProtractorID,s.Attribute.btnRotateID,s.Attribute.btnCancleID].forEach(function(t){document.getElementById(t.toString()).className="nochoosed"})},t}();i.AuxiliaryListen=e},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=a(1),n=function(){function t(t,i,a,s,n,h,o){this.isMobild=t,this.myCanvas=i,this.myCanvasNode=a,this.rePaint=s,this.eventFlag=!1,this.eventCount=0,this.auxiliaryListen=n,this.canvasData=h,this.intersect=o,this.adsorption=new e.Adsorption(this.canvasData,this.intersect)}return t.prototype.startCallback=function(t){if(this.eventFlag||0!==this.eventCount){if(!this.eventFlag&&2===this.eventCount){this.eventFlag=!0,this.eventCount=3;y=0,v=0;if(this.isMobild){var i=t;y=i.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,v=i.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var a=t;y=a.clientX-this.myCanvasNode.getBoundingClientRect().left,v=a.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),y=(l=this.adsorption.adsorpToXY(y,v)).x,v=l.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill();var e=parseFloat((Math.sqrt(Math.pow(y-this.x,2)+Math.pow(v-this.y,2))/s.Attribute.unitProp).toFixed(1)),n=Math.round(e*s.Attribute.unitProp);n<=4&&(e=.1,n=4);var h=Math.atan2(v-this.y,y-this.x);h=h>=0?h:2*Math.PI+h,this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,n,h,h,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(this.x,this.y);var o=this.rotatexy(this.x,this.y,0,20,h);this.myCanvas.lineTo(o.x,o.y),o=this.rotatexy(this.x,this.y,n,20,h),this.myCanvas.lineTo(o.x,o.y),o=this.rotatexy(this.x,this.y,n,0,h),this.myCanvas.lineTo(o.x,o.y);for(var r=10;r<n;r+=10)o=this.rotatexy(this.x,this.y,r,0,h),this.myCanvas.moveTo(o.x,o.y),o=this.rotatexy(this.x,this.y,r,5,h),this.myCanvas.lineTo(o.x,o.y),(r+=10)<n&&(o=this.rotatexy(this.x,this.y,r,0,h),this.myCanvas.moveTo(o.x,o.y),o=this.rotatexy(this.x,this.y,r,10,h),this.myCanvas.lineTo(o.x,o.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(this.x,this.y),this.myCanvas.rotate(h),this.myCanvas.font=s.Attribute.propFont,this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.fillText(e+"cm",n/2-22,-30),this.myCanvas.restore()}}else{this.eventFlag=!0,this.eventCount=1;var l,y=0,v=0;if(this.isMobild){var c=t;y=c.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,v=c.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var u=t;y=u.clientX-this.myCanvasNode.getBoundingClientRect().left,v=u.clientY-this.myCanvasNode.getBoundingClientRect().top}y=(l=this.adsorption.adsorpToXY(y,v)).x,v=l.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.arc(y,v,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.fill()}},t.prototype.moveCallback=function(t){if(this.eventFlag&&1===this.eventCount){var i=0,a=0;if(this.isMobild){var e=t;i=e.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=e.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,a=n.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(r=this.adsorption.adsorpToXY(i,a)).x,a=r.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.arc(i,a,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.fill()}else if(this.eventFlag||2!==this.eventCount){if(this.eventFlag&&3===this.eventCount){i=0,a=0;if(this.isMobild){var h=t;i=h.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=h.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var o=t;i=o.clientX-this.myCanvasNode.getBoundingClientRect().left,a=o.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(r=this.adsorption.adsorpToXY(i,a)).x,a=r.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill();u=parseFloat((Math.sqrt(Math.pow(i-this.x,2)+Math.pow(a-this.y,2))/s.Attribute.unitProp).toFixed(1));(v=Math.round(u*s.Attribute.unitProp))<=4&&(u=.1,v=4),c=(c=Math.atan2(a-this.y,i-this.x))>=0?c:2*Math.PI+c,this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,v,c,c,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(this.x,this.y);C=this.rotatexy(this.x,this.y,0,20,c);this.myCanvas.lineTo(C.x,C.y),C=this.rotatexy(this.x,this.y,v,20,c),this.myCanvas.lineTo(C.x,C.y),C=this.rotatexy(this.x,this.y,v,0,c),this.myCanvas.lineTo(C.x,C.y);for(d=10;d<v;d+=10)C=this.rotatexy(this.x,this.y,d,0,c),this.myCanvas.moveTo(C.x,C.y),C=this.rotatexy(this.x,this.y,d,5,c),this.myCanvas.lineTo(C.x,C.y),(d+=10)<v&&(C=this.rotatexy(this.x,this.y,d,0,c),this.myCanvas.moveTo(C.x,C.y),C=this.rotatexy(this.x,this.y,d,10,c),this.myCanvas.lineTo(C.x,C.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(this.x,this.y),this.myCanvas.rotate(c),this.myCanvas.font=s.Attribute.propFont,this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.fillText(u+"cm",v/2-22,-30),this.myCanvas.restore()}}else{var r,i=0,a=0;if(this.isMobild){var l=t;i=l.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=l.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var y=t;i=y.clientX-this.myCanvasNode.getBoundingClientRect().left,a=y.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(r=this.adsorption.adsorpToXY(i,a)).x,a=r.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill();var v,c,u=parseFloat((Math.sqrt(Math.pow(i-this.x,2)+Math.pow(a-this.y,2))/s.Attribute.unitProp).toFixed(1));(v=Math.round(u*s.Attribute.unitProp))<=4&&(u=.1,v=4),c=(c=Math.atan2(a-this.y,i-this.x))>=0?c:2*Math.PI+c,this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,v,c,c,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(this.x,this.y);var C=this.rotatexy(this.x,this.y,0,20,c);this.myCanvas.lineTo(C.x,C.y),C=this.rotatexy(this.x,this.y,v,20,c),this.myCanvas.lineTo(C.x,C.y),C=this.rotatexy(this.x,this.y,v,0,c),this.myCanvas.lineTo(C.x,C.y);for(var d=10;d<v;d+=10)C=this.rotatexy(this.x,this.y,d,0,c),this.myCanvas.moveTo(C.x,C.y),C=this.rotatexy(this.x,this.y,d,5,c),this.myCanvas.lineTo(C.x,C.y),(d+=10)<v&&(C=this.rotatexy(this.x,this.y,d,0,c),this.myCanvas.moveTo(C.x,C.y),C=this.rotatexy(this.x,this.y,d,10,c),this.myCanvas.lineTo(C.x,C.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(this.x,this.y),this.myCanvas.rotate(c),this.myCanvas.font=s.Attribute.propFont,this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.fillText(u+"cm",v/2-22,-30),this.myCanvas.restore()}},t.prototype.endCallback=function(t){if(this.eventFlag&&1===this.eventCount){if(this.eventFlag=!1,this.eventCount=2,this.isMobild){var i=t;this.x=i.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=i.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var a=t;this.x=a.clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=a.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var e=this.adsorption.adsorpToXY(this.x,this.y);this.x=e.x,this.y=e.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.arc(this.x,this.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.fill()}else if(this.eventFlag&&3===this.eventCount){this.eventFlag=!1,this.eventCount=0;var n=0,h=0;if(this.isMobild){var o=t;n=o.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,h=o.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var r=t;n=r.clientX-this.myCanvasNode.getBoundingClientRect().left,h=r.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),n=(e=this.adsorption.adsorpToXY(n,h)).x,h=e.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill();var l=parseFloat((Math.sqrt(Math.pow(n-this.x,2)+Math.pow(h-this.y,2))/s.Attribute.unitProp).toFixed(1)),y=Math.round(l*s.Attribute.unitProp);y<=4&&(l=.1,y=4);var v=Math.atan2(h-this.y,n-this.x);v=v>=0?v:2*Math.PI+v,this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,y,v,v,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(this.x,this.y);var c=this.rotatexy(this.x,this.y,0,20,v);this.myCanvas.lineTo(c.x,c.y),c=this.rotatexy(this.x,this.y,y,20,v),this.myCanvas.lineTo(c.x,c.y),c=this.rotatexy(this.x,this.y,y,0,v),this.myCanvas.lineTo(c.x,c.y);for(var u=10;u<y;u+=10)c=this.rotatexy(this.x,this.y,u,0,v),this.myCanvas.moveTo(c.x,c.y),c=this.rotatexy(this.x,this.y,u,5,v),this.myCanvas.lineTo(c.x,c.y),(u+=10)<y&&(c=this.rotatexy(this.x,this.y,u,0,v),this.myCanvas.moveTo(c.x,c.y),c=this.rotatexy(this.x,this.y,u,10,v),this.myCanvas.lineTo(c.x,c.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(this.x,this.y),this.myCanvas.rotate(v),this.myCanvas.font=s.Attribute.propFont,this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.fillText(l+"cm",y/2-22,-30),this.myCanvas.restore(),this.auxiliaryListen.recoverButtonFlag()}},t.prototype.rangePoints=function(t,i,a,s){return{x:t*Math.pow(Math.cos(s),2)+t*Math.pow(Math.sin(s),2)+a*Math.sin(s),y:i*Math.pow(Math.cos(s),2)+i*Math.pow(Math.sin(s),2)+a*Math.cos(s)}},t.prototype.rotatexy=function(t,i,a,s,e){return{x:a*Math.cos(e)+s*Math.sin(e)+t,y:a*Math.sin(e)-s*Math.cos(e)+i}},t}();i.Rule=n},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=a(1),n=function(){function t(t,i,a,s,n,h,o){this.isMobild=t,this.myCanvas=i,this.myCanvasNode=a,this.rePaint=s,this.eventFlag=!1,this.eventCount=0,this.auxiliaryListen=n,this.canvasData=h,this.intersect=o,this.adsorption=new e.Adsorption(this.canvasData,this.intersect)}return t.prototype.startCallback=function(t){if(this.eventFlag||0!==this.eventCount)if(this.eventFlag||2!==this.eventCount){if(!this.eventFlag&&3===this.eventCount){this.eventFlag=!0,this.eventCount=4;r=0,l=0;if(this.isMobild){var i=t;r=i.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,l=i.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var a=t;r=a.clientX-this.myCanvasNode.getBoundingClientRect().left,l=a.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),r=(C=this.adsorption.adsorpToXY(r,l)).x,l=C.y,(c=(c=Math.atan2(l-this.y,r-this.x))>=0?c:2*Math.PI+c)<this.startAngle&&(c+=2*Math.PI),c-this.startAngle>=3*Math.PI/2&&c-this.startAngle<=2*Math.PI?c=this.startAngle:c-this.startAngle>Math.PI&&c-this.startAngle<3*Math.PI/2&&(c=(this.startAngle+Math.PI)%(2*Math.PI));var e=Math.round(180/Math.PI*c)*(Math.PI/180);this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.startAngle,this.startAngle,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,e,e,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.arc(this.x,this.y,30,this.startAngle,e,!1),this.myCanvas.stroke();var n=0,h=0,o=0;this.startAngle<=e?(n=180/Math.PI*(e-this.startAngle),h=40*Math.cos((this.startAngle+e)/2)+this.x,o=40*Math.sin((this.startAngle+e)/2)+this.y):(n=180/Math.PI*(2*Math.PI-this.startAngle+e),h=40*Math.cos((this.startAngle+e)/2-Math.PI)+this.x,o=40*Math.sin((this.startAngle+e)/2-Math.PI)+this.y),n=Math.round(n),this.myCanvas.beginPath(),this.myCanvas.font=s.Attribute.propFont,this.myCanvas.textAlign=s.Attribute.propTextAlign,this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.fillText(n+"",h+22,o+22)}}else{this.eventFlag=!0,this.eventCount=3;var r=0,l=0;if(this.isMobild){var y=t;r=y.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,l=y.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var v=t;r=v.clientX-this.myCanvasNode.getBoundingClientRect().left,l=v.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),r=(C=this.adsorption.adsorpToXY(r,l)).x,l=C.y;var c,u=Math.sqrt(Math.pow(l-this.y,2)+Math.pow(r-this.x,2));c=(c=Math.atan2(l-this.y,r-this.x))>=0?c:2*Math.PI+c,c=Math.round(180/Math.PI*c)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,u,c,c,!1),this.myCanvas.stroke()}else{this.eventFlag=!0,this.eventCount=1;var C,r=0,l=0;if(this.isMobild){var d=t;r=d.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,l=d.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var g=t;r=g.clientX-this.myCanvasNode.getBoundingClientRect().left,l=g.clientY-this.myCanvasNode.getBoundingClientRect().top}r=(C=this.adsorption.adsorpToXY(r,l)).x,l=C.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.arc(r,l,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.fill()}},t.prototype.moveCallback=function(t){if(this.eventFlag&&1===this.eventCount){var i=0,a=0;if(this.isMobild){var e=t;i=e.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=e.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,a=n.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(m=this.adsorption.adsorpToXY(i,a)).x,a=m.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.arc(i,a,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.fill()}else if(this.eventFlag||2!==this.eventCount)if(this.eventFlag&&3===this.eventCount){i=0,a=0;if(this.isMobild){var h=t;i=h.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=h.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var o=t;i=o.clientX-this.myCanvasNode.getBoundingClientRect().left,a=o.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(m=this.adsorption.adsorpToXY(i,a)).x,a=m.y;b=Math.sqrt(Math.pow(a-this.y,2)+Math.pow(i-this.x,2));f=(f=Math.atan2(a-this.y,i-this.x))>=0?f:2*Math.PI+f,f=Math.round(180/Math.PI*f)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,b,f,f,!1),this.myCanvas.stroke()}else if(this.eventFlag||3!==this.eventCount){if(this.eventFlag&&4===this.eventCount){i=0,a=0;if(this.isMobild){var r=t;i=r.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=r.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var l=t;i=l.clientX-this.myCanvasNode.getBoundingClientRect().left,a=l.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(m=this.adsorption.adsorpToXY(i,a)).x,a=m.y,(f=(f=Math.atan2(a-this.y,i-this.x))>=0?f:2*Math.PI+f)<this.startAngle&&(f+=2*Math.PI),f-this.startAngle>=3*Math.PI/2&&f-this.startAngle<=2*Math.PI?f=this.startAngle:f-this.startAngle>Math.PI&&f-this.startAngle<3*Math.PI/2&&(f=(this.startAngle+Math.PI)%(2*Math.PI));c=Math.round(180/Math.PI*f)*(Math.PI/180);this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.startAngle,this.startAngle,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,c,c,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.arc(this.x,this.y,30,this.startAngle,c,!1),this.myCanvas.stroke();u=0,C=40,d=0,g=0;this.startAngle<=c?(u=180/Math.PI*(c-this.startAngle),d=C*Math.cos((this.startAngle+c)/2)+this.x,g=C*Math.sin((this.startAngle+c)/2)+this.y):(u=180/Math.PI*(2*Math.PI-this.startAngle+c),d=C*Math.cos((this.startAngle+c)/2-Math.PI)+this.x,g=C*Math.sin((this.startAngle+c)/2-Math.PI)+this.y),u=Math.round(u),this.myCanvas.beginPath(),this.myCanvas.font=s.Attribute.propFont,this.myCanvas.textAlign=s.Attribute.propTextAlign,this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.fillText(u+"",d+22,g+22)}}else{i=0,a=0;if(this.isMobild){var y=t;i=y.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=y.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var v=t;i=v.clientX-this.myCanvasNode.getBoundingClientRect().left,a=v.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(m=this.adsorption.adsorpToXY(i,a)).x,a=m.y,(f=(f=Math.atan2(a-this.y,i-this.x))>=0?f:2*Math.PI+f)<this.startAngle&&(f+=2*Math.PI),f-this.startAngle>=3*Math.PI/2&&f-this.startAngle<=2*Math.PI?f=this.startAngle:f-this.startAngle>Math.PI&&f-this.startAngle<3*Math.PI/2&&(f=(this.startAngle+Math.PI)%(2*Math.PI));var c=Math.round(180/Math.PI*f)*(Math.PI/180);this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.startAngle,this.startAngle,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,c,c,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.arc(this.x,this.y,30,this.startAngle,c,!1),this.myCanvas.stroke();var u=0,C=40,d=0,g=0;this.startAngle<=c?(u=180/Math.PI*(c-this.startAngle),d=C*Math.cos((this.startAngle+c)/2)+this.x,g=C*Math.sin((this.startAngle+c)/2)+this.y):(u=180/Math.PI*(2*Math.PI-this.startAngle+c),d=C*Math.cos((this.startAngle+c)/2-Math.PI)+this.x,g=C*Math.sin((this.startAngle+c)/2-Math.PI)+this.y),u=Math.round(u),this.myCanvas.beginPath(),this.myCanvas.font=s.Attribute.propFont,this.myCanvas.textAlign=s.Attribute.propTextAlign,this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.fillText(u+"",d+22,g+22)}else{var m,i=0,a=0;if(this.isMobild){var p=t;i=p.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=p.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var x=t;i=x.clientX-this.myCanvasNode.getBoundingClientRect().left,a=x.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(m=this.adsorption.adsorpToXY(i,a)).x,a=m.y;var f,b=Math.sqrt(Math.pow(a-this.y,2)+Math.pow(i-this.x,2));f=(f=Math.atan2(a-this.y,i-this.x))>=0?f:2*Math.PI+f,f=Math.round(180/Math.PI*f)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,b,f,f,!1),this.myCanvas.stroke()}},t.prototype.endCallback=function(t){if(this.eventFlag&&1===this.eventCount){if(this.eventFlag=!1,this.eventCount=2,this.isMobild){var i=t;this.x=i.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=i.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var a=t;this.x=a.clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=a.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var e=this.adsorption.adsorpToXY(this.x,this.y);this.x=e.x,this.y=e.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()}else if(this.eventFlag&&3===this.eventCount){this.eventFlag=!1;var n=0,h=0;if(this.isMobild){var o=t;n=o.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,h=o.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var r=t;n=r.clientX-this.myCanvasNode.getBoundingClientRect().left,h=r.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),n=(e=this.adsorption.adsorpToXY(n,h)).x,h=e.y,this.r=Math.sqrt(Math.pow(h-this.y,2)+Math.pow(n-this.x,2)),l=(l=Math.atan2(h-this.y,n-this.x))>=0?l:2*Math.PI+l,this.startAngle=Math.round(180/Math.PI*l)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.startAngle,this.startAngle,!1),this.myCanvas.stroke()}else if(this.eventFlag&&4===this.eventCount){this.eventFlag=!1,this.eventCount=0;var l;n=0,h=0;if(this.isMobild){var y=t;n=y.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,h=y.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var v=t;n=v.clientX-this.myCanvasNode.getBoundingClientRect().left,h=v.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),n=(e=this.adsorption.adsorpToXY(n,h)).x,h=e.y,(l=(l=Math.atan2(h-this.y,n-this.x))>=0?l:2*Math.PI+l)<this.startAngle&&(l+=2*Math.PI),l-this.startAngle>=3*Math.PI/2&&l-this.startAngle<=2*Math.PI?l=this.startAngle:l-this.startAngle>Math.PI&&l-this.startAngle<3*Math.PI/2&&(l=(this.startAngle+Math.PI)%(2*Math.PI)),this.endAngle=Math.round(180/Math.PI*l)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.startAngle,this.startAngle,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.endAngle,this.endAngle,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=s.Attribute.propWitdh,this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.arc(this.x,this.y,30,this.startAngle,this.endAngle,!1),this.myCanvas.stroke();var c=0,u=0,C=0;this.startAngle<=this.endAngle?(c=180/Math.PI*(this.endAngle-this.startAngle),u=40*Math.cos((this.startAngle+this.endAngle)/2)+this.x,C=40*Math.sin((this.startAngle+this.endAngle)/2)+this.y):(c=180/Math.PI*(2*Math.PI-this.startAngle+this.endAngle),u=40*Math.cos((this.startAngle+this.endAngle)/2-Math.PI)+this.x,C=40*Math.sin((this.startAngle+this.endAngle)/2-Math.PI)+this.y),c=Math.round(c),this.myCanvas.beginPath(),this.myCanvas.font=s.Attribute.propFont,this.myCanvas.textAlign=s.Attribute.propTextAlign,this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.fillText(c+"",u+22,C+22),this.auxiliaryListen.recoverButtonFlag()}},t}();i.Protractor=n},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=function(){function t(t,i,a,s,e,n,h,o){this.isMobild=t,this.myCanvas=i,this.myCanvasNode=a,this.rePaint=s,this.eventFlag=!1,this.eventCount=0,this.auxiliaryListen=e,this.canvasData=n,this.canvasChoosed=h,this.intersect=o}return t.prototype.startCallback=function(t){if(!this.eventFlag&&0===this.eventCount){this.eventFlag=!0,this.eventCount=1;var i=0,a=0;if(this.isMobild){var s=t;i=s.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=s.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var e=t;i=e.clientX-this.myCanvasNode.getBoundingClientRect().left,a=e.clientY-this.myCanvasNode.getBoundingClientRect().top}this.index=this.canvasChoosed.getIndex(),this.x=this.canvasData.getData(this.index[0]).x,this.y=this.canvasData.getData(this.index[0]).y;var n=Math.atan2(a-this.y,i-this.x);this.newAngle=n>=0?n:2*Math.PI+n,this.oldXY=Math.sqrt(Math.pow(i-this.x,2)+Math.pow(a-this.y,2))}},t.prototype.moveCallback=function(t){if(this.eventFlag&&1===this.eventCount){var i=0,a=0;if(this.isMobild){var e=t;i=e.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=e.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,a=n.clientY-this.myCanvasNode.getBoundingClientRect().top}this.oldAngle=this.newAngle;var h=Math.atan2(a-this.y,i-this.x);h=h>=0?h:2*Math.PI+h,this.newAngle=h;var o=Math.round((this.newAngle-this.oldAngle)*(180/Math.PI))*(Math.PI/180),r=Math.sqrt(Math.pow(i-this.x,2)+Math.pow(a-this.y,2)),l=void 0;1===this.index.length?l=this.canvasData.getData(this.index[0]):2===this.index.length&&(l=this.canvasData.getData(this.index[0]).fanAndRadius[this.index[1]]);var y=void 0;if(l.flag===s.ToolsName.fan)(y=l).startAngle=(y.startAngle+o)%(2*Math.PI),y.endAngle=(y.endAngle+o)%(2*Math.PI),y.startAngle=y.startAngle<0?2*Math.PI+y.startAngle:y.startAngle,y.endAngle=y.endAngle<0?2*Math.PI+y.endAngle:y.endAngle,y.hasChord.x=Math.cos(y.startAngle)*y.r+y.x,y.hasChord.y=Math.sin(y.startAngle)*y.r+y.y,y.hasChord.endX=Math.cos(y.endAngle)*y.r+y.x,y.hasChord.endY=Math.sin(y.endAngle)*y.r+y.y,this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint();else if(l.flag===s.ToolsName.radius)(y=l).angle=(y.angle+o)%(2*Math.PI),y.angle=y.angle<0?2*Math.PI+y.angle:y.angle,this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint();else if(l.flag===s.ToolsName.diameter)(y=l).angle=(y.angle+o)%(2*Math.PI),y.angle=y.angle<0?2*Math.PI+y.angle:y.angle,this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint();else if(l.flag===s.ToolsName.segment){(y=l).angle=(y.angle+o)%(2*Math.PI),y.angle=y.angle<0?2*Math.PI+y.angle:y.angle,y.r+=r-this.oldXY,y.r=parseFloat((y.r/s.Attribute.unitProp).toFixed(1)),y.r=Math.round(y.r*s.Attribute.unitProp),y.r<.1*s.Attribute.unitProp&&(y.r=.1*s.Attribute.unitProp),this.oldXY=r,this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.arc(y.x,y.y,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill();var v=Math.cos(y.angle)*y.r+y.x,c=Math.sin(y.angle)*y.r+y.y;this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propNFStyle,this.myCanvas.arc(v,c,s.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(y.x,y.y);var u=this.rotatexy(y.x,y.y,0,20,y.angle);this.myCanvas.lineTo(u.x,u.y),u=this.rotatexy(y.x,y.y,y.r,20,y.angle),this.myCanvas.lineTo(u.x,u.y),u=this.rotatexy(y.x,y.y,y.r,0,y.angle),this.myCanvas.lineTo(u.x,u.y),this.myCanvas.strokeStyle=s.Attribute.propDSStyle,this.myCanvas.lineWidth=2;for(var C=10;C<y.r;C+=10)u=this.rotatexy(y.x,y.y,C,0,y.angle),this.myCanvas.moveTo(u.x,u.y),u=this.rotatexy(y.x,y.y,C,5,y.angle),this.myCanvas.lineTo(u.x,u.y),(C+=10)<y.r&&(u=this.rotatexy(y.x,y.y,C,0,y.angle),this.myCanvas.moveTo(u.x,u.y),u=this.rotatexy(y.x,y.y,C,10,y.angle),this.myCanvas.lineTo(u.x,u.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(y.x,y.y),this.myCanvas.rotate(y.angle),this.myCanvas.font=s.Attribute.propFont,this.myCanvas.fillStyle=s.Attribute.propDFStyle,this.myCanvas.fillText(y.r/s.Attribute.unitProp+"cm",y.r/2-22,-30),this.myCanvas.restore()}}},t.prototype.endCallback=function(t){this.eventFlag&&1===this.eventCount&&(this.eventFlag=!1,this.eventCount=0,this.auxiliaryListen.recoverButtonFlag(),this.canvasChoosed.cancleSelected(),this.canvasChoosed.recoverIndex(),this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint())},t.prototype.rotatexy=function(t,i,a,s,e){return{x:a*Math.cos(e)+s*Math.sin(e)+t,y:a*Math.sin(e)-s*Math.cos(e)+i}},t}();i.Rotate=e},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=function(){function t(t,i,a,e,n){this.flag=s.ToolsName.letterFlag,this.isChoosed=!1,this.eventFlag=!1,this.eventCount=0,this.isMobild=t,this.myCanvas=i,this.myCanvasNode=a,this.auxiliaryListen=e,this.canvasData=n,this.inputListen(),this.focusListen(),this.blurListen()}return t.prototype.startCallback=function(t){if(!this.eventFlag&&0===this.eventCount){if(this.eventFlag=!0,this.eventCount=1,this.isMobild){var i=t;this.x=i.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=i.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var a=t;this.x=a.clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=a.clientY-this.myCanvasNode.getBoundingClientRect().top}this.text="";var e=document.getElementById(s.Attribute.btnInputFlagID);e.value="",e.className="show",e.style.left=this.x+"px",e.style.top=this.y+70+"px",this.endCallback(t)}},t.prototype.moveCallback=function(t){this.eventFlag&&this.eventCount},t.prototype.endCallback=function(t){this.eventFlag&&1===this.eventCount&&(this.eventFlag=!1,this.eventCount=0,this.auxiliaryListen.recoverButtonFlag(),setTimeout(function(){document.getElementById(s.Attribute.btnInputFlagID).focus()},100))},t.prototype.inputListen=function(){document.getElementById(s.Attribute.btnInputFlagID).addEventListener("input",function(t){var i=document.getElementById(t.srcElement.id);i.value=i.value.replace(/[^a-z]/gi,""),i.value.length>1&&(i.value=i.value.slice(0,1))},!1)},t.prototype.focusListen=function(){document.getElementById(s.Attribute.btnInputFlagID).addEventListener("focus",function(t){document.getElementById(t.srcElement.id).value=""},!1)},t.prototype.blurListen=function(){var t=this;document.getElementById(s.Attribute.btnInputFlagID).addEventListener("blur",function(i){var a=document.getElementById(i.srcElement.id);0===a.value.length&&(a.value="A"),t.text=a.value,a.className="hidden",t.canvasData.setData(t.data()),t.myCanvas.beginPath(),t.myCanvas.font=s.Attribute.propFont,t.myCanvas.fillStyle=s.Attribute.propDFStyle,t.myCanvas.fillText(t.text,t.x,t.y)},!1)},t.prototype.data=function(){return{flag:this.flag,isChoosed:this.isChoosed,lock:!1,x:this.x,y:this.y,text:this.text}},t}();i.LetterFlag=e},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=a(1),n=function(){function t(t,i,a,s,n,h){this.myCanvasNode=t,this.isMobild=i,this.rePaint=a,this.canvasChoosed=s,this.canvasData=n,this.startFlag=!1,this.moveFlag=!1,this.x=0,this.y=0,this.intersect=h,this.adsorption=new e.Adsorption(this.canvasData,this.intersect)}return t.prototype.start=function(t){if(this.startFlag=!0,this.moveFlag=!1,this.isMobild){var i=t;this.x=i.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=i.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var a=t;this.x=a.clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=a.clientY-this.myCanvasNode.getBoundingClientRect().top}},t.prototype.end=function(t){if(this.moveFlag){this.startFlag=!1,this.moveFlag=!1;var i=this.canvasChoosed.getIndex();return 1===i.length?this.canvasData.getData(i[0]).isChoosed=!1:2===i.length&&(this.canvasData.getData(i[0]).fanAndRadius[i[1]].isChoosed=!1),this.canvasChoosed.recoverIndex(),this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint(),!0}return this.startFlag=!1,this.moveFlag=!1,!1},t.prototype.movePoint=function(t){if(this.startFlag){this.moveFlag=!0;var i=0,a=0;if(this.isMobild){var s=t;i=s.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=s.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var e=t;i=e.clientX-this.myCanvasNode.getBoundingClientRect().left,a=e.clientY-this.myCanvasNode.getBoundingClientRect().top}var n=this.canvasChoosed.getIndex(),h=this.canvasData.getData(n[0]);h.x+=i-this.x,h.y+=a-this.y;var o=this.adsorption.adsorpToXY(h.x,h.y,n);h.x=o.x,h.y=o.y,this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint(),this.x=i,this.y=a}},t.prototype.moveSegment=function(t){if(this.startFlag){this.moveFlag=!0;var i=0,a=0;if(this.isMobild){var s=t;i=s.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=s.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var e=t;i=e.clientX-this.myCanvasNode.getBoundingClientRect().left,a=e.clientY-this.myCanvasNode.getBoundingClientRect().top}var n=this.canvasChoosed.getIndex(),h=this.canvasData.getData(n[0]);h.x+=i-this.x,h.y+=a-this.y;var o=this.adsorption.adsorpToXY(h.x,h.y,n);h.x=o.x,h.y=o.y,this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint(),this.x=i,this.y=a}},t.prototype.moveCircular=function(t){if(this.startFlag){this.moveFlag=!0;var i=0,a=0;if(this.isMobild){var e=t;i=e.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=e.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,a=n.clientY-this.myCanvasNode.getBoundingClientRect().top}var h=this.canvasChoosed.getIndex(),o=this.canvasData.getData(h[0]);o.x+=i-this.x,o.y+=a-this.y;var r=this.adsorption.adsorpToXY(o.x,o.y,h);o.x=r.x,o.y=r.y;for(var l=0,y=o.fanAndRadius;l<y.length;l++){var v=y[l];if(v.flag!==s.ToolsName.fan&&v.flag!==s.ToolsName.radius&&v.flag!==s.ToolsName.diameter||(v.x=o.x,v.y=o.y),v.flag===s.ToolsName.fan)(c=v).hasChord.x=Math.cos(c.startAngle)*c.r+c.x,c.hasChord.y=Math.sin(c.startAngle)*c.r+c.y,c.hasChord.endX=Math.cos(c.endAngle)*c.r+c.x,c.hasChord.endY=Math.sin(c.endAngle)*c.r+c.y;else if(v.flag===s.ToolsName.tangent){var c;(c=v).x+=o.x-c.cirX,c.y+=o.y-c.cirY,c.insePointX+=o.x-c.cirX,c.insePointY+=o.y-c.cirY,c.cirX=o.x,c.cirY=o.y,c.cirR=o.r}}this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint(),this.x=i,this.y=a}},t.prototype.moveLetterFlag=function(t){if(this.startFlag){this.moveFlag=!0;var i=0,a=0;if(this.isMobild){var s=t;i=s.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,a=s.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var e=t;i=e.clientX-this.myCanvasNode.getBoundingClientRect().left,a=e.clientY-this.myCanvasNode.getBoundingClientRect().top}var n=this.canvasChoosed.getIndex(),h=this.canvasData.getData(n[0]);h.x+=i-this.x,h.y+=a-this.y,this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint(),this.x=i,this.y=a}},t}();i.MoveGraph=n},function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a(0),e=function(){function t(t,i,a){this.pointData=[],this.myCanvas=t,this.canvasChoosed=i,this.canvasData=a}return t.prototype.segment=function(t,i){var a=Math.cos(t.angle)*t.r+t.x,s=Math.sin(t.angle)*t.r+t.y,e=Math.cos(i.angle)*i.r+i.x,n=Math.sin(i.angle)*i.r+i.y;return function(t,i){var a,s,e=0,n=0,h=0,o=0;if(t[0].x===t[1].x&&(e=0),i[0].x===i[1].x?n=0:(e=(t[0].y-t[1].y)/(t[0].x-t[1].x),n=(i[0].y-i[1].y)/(i[0].x-i[1].x)),a=t[0].y-e*t[0].x,s=i[0].y-n*i[0].x,e===n)return{flag:!1,x:0,y:0};h=(s-a)/(e-n),o=(a*n-s*e)/(n-e);var r=[t[0].x,t[1].x],l=[i[0].x,i[1].x];return r.sort(function(t,i){return t-i}),l.sort(function(t,i){return t-i}),r[0]<=h&&h<=r[1]&&l[0]<=h&&h<=l[1]?{flag:!0,x:h,y:o}:{flag:!1,x:0,y:0}}([{x:t.x,y:t.y},{x:a,y:s}],[{x:i.x,y:i.y},{x:e,y:n}])},t.prototype.circular=function(t,i){var a=Math.cos(t.angle)*t.r+t.x,s=Math.sin(t.angle)*t.r+t.y;return function(t,i){var a,s,e,n,h=0,o=0,r=[{x:0,y:0},{x:0,y:0}];if(t[0].x===t[1].x){if(h=0,(n=(s=-2*i.y)*s-4*(a=1)*(e=Math.pow(t[0].x,2)-2*i.x*t[0].x+Math.pow(i.x,2)+Math.pow(i.y,2)-Math.pow(i.r,2)))<0)return{flag:!1,point:[]};if(0===n)return r[0].x=t[0].x,r[0].y=i.y,(y=[t[0].x,t[1].x]).sort(function(t,i){return t-i}),y[0]<=r[0].x&&r[0].x<=y[1]&&i.x-i.r<=r[0].x&&r[0].x<=i.x+i.r?{flag:!0,point:[{x:r[0].x,y:r[0].y}]}:{flag:!1,point:[]};if(n>0){r[0].x=t[0].x,r[0].y=(2*i.y+Math.sqrt(n))/2,r[1].x=t[0].x,r[1].y=(2*i.y-Math.sqrt(n))/2,(y=[t[0].x,t[1].x]).sort(function(t,i){return t-i});var l={flag:!1,point:Array()};return y[0]<=r[0].x&&r[0].x<=y[1]&&i.x-i.r<=r[0].x&&r[0].x<=i.x+i.r&&(l.flag=!0,l.point.push(r[0])),y[0]<=r[1].x&&r[1].x<=y[1]&&i.x-i.r<=r[1].x&&r[1].x<=i.x+i.r?(l.flag=!0,l.point.push(r[1])):l.flag=!1,l}}else t[0].y===t[1].y?(h=0,o=t[0].y,a=1,s=-2*i.x,e=Math.pow(t[0].y,2)-2*i.y*o+Math.pow(i.x,2)+Math.pow(i.y,2)-Math.pow(i.r,2)):(a=1+(h=(t[0].y-t[1].y)/(t[0].x-t[1].x))*h,s=2*(h*(o=t[0].y-h*t[0].x)-i.x-i.y*h),e=o*o-2*i.y*o+i.x*i.x+i.y*i.y-i.r*i.r);if((n=s*s-4*a*e)<0)return{flag:!1,point:[]};if(0===n)return r[0].x=-(2*h*o-2*i.x-2*i.y*h)/(2*(1+h*h)),r[0].y=h*r[0].x+o,(y=[t[0].x,t[1].x]).sort(function(t,i){return t-i}),y[0]<=r[0].x&&r[0].x<=y[1]&&i.x-i.r<=r[0].x&&r[0].x<=i.x+i.r?{flag:!0,point:[{x:r[0].x,y:r[0].y}]}:{flag:!1,point:[]};if(n>0){var y;r[0].x=(-s+Math.sqrt(n))/(2*a),r[0].y=h*r[0].x+o,r[1].x=(-s-Math.sqrt(n))/(2*a),r[1].y=h*r[1].x+o,(y=[t[0].x,t[1].x]).sort(function(t,i){return t-i});l={flag:!1,point:Array()};return y[0]<=r[0].x&&r[0].x<=y[1]&&i.x-i.r<=r[0].x&&r[0].x<=i.x+i.r&&(l.flag=!0,l.point.push(r[0])),y[0]<=r[1].x&&r[1].x<=y[1]&&i.x-i.r<=r[1].x&&r[1].x<=i.x+i.r&&(l.flag=!0,l.point.push(r[1])),l}}([{x:t.x,y:t.y},{x:a,y:s}],{x:i.x,y:i.y,r:i.r})},t.prototype.pointEach=function(t,i){var a,e;if(t.flag===s.ToolsName.segment)for(var n=0,h=i.getData();n<h.length;n++){if((c=h[n]).flag===s.ToolsName.segment)(a=this.segment(t,c)).flag&&this.saveData({x:a.x,y:a.y});else if(c.flag===s.ToolsName.circular&&(e=this.circular(t,c)).flag)for(var o=0,r=e.point;o<r.length;o++){var l=r[o];this.saveData({x:l.x,y:l.y})}}else if(t.flag===s.ToolsName.circular)for(var y=0,v=i.getData();y<v.length;y++){var c;if((c=v[y]).flag===s.ToolsName.segment&&(e=this.circular(c,t)).flag)for(var u=0,C=e.point;u<C.length;u++){l=C[u];this.saveData({x:l.x,y:l.y})}}},t.prototype.pointNoSelEach=function(){this.pointData=[];for(var t=this.canvasChoosed.getIndex(),i=this.canvasData.getData(),a=0;a<i.length;a++)if(!(i[a].flag!==s.ToolsName.segment&&i[a].flag!==s.ToolsName.circular||1===t.length&&t[0]===a))for(var e=a+1;e<i.length;e++)if(!(i[e].flag!==s.ToolsName.segment&&i[e].flag!==s.ToolsName.circular||1===t.length&&t[0]===e)){if(i[a].flag===s.ToolsName.segment)if(i[e].flag===s.ToolsName.segment)(n=this.segment(i[a],i[e])).flag&&this.saveData({x:n.x,y:n.y});else if(i[e].flag===s.ToolsName.circular){var n;if((n=this.circular(i[a],i[e])).flag)for(var h=0,o=n.point;h<o.length;h++){var r=o[h];this.saveData(r)}}if(i[a].flag===s.ToolsName.circular)if(i[e].flag===s.ToolsName.segment)if((n=this.circular(i[e],i[a])).flag)for(var l=0,y=n.point;l<y.length;l++){r=y[l];this.saveData(r)}}},t.prototype.repaintPoint=function(){this.myCanvas.beginPath(),this.myCanvas.fillStyle=s.Attribute.propDFStyle;for(var t=0,i=this.getData();t<i.length;t++){var a=i[t];this.myCanvas.moveTo(a.x,a.y),this.myCanvas.arc(a.x,a.y,s.Attribute.propPointR,0,2*Math.PI,!1)}this.myCanvas.fill()},t.prototype.getData=function(){return this.pointData},t.prototype.delData=function(){},t.prototype.saveData=function(t){this.pointData.push(t)},t}();i.Intersect=e}]);