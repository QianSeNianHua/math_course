!function(t){var i=window.webpackHotUpdate;window.webpackHotUpdate=function(t,e){!function(t,i){if(!x[t]||!f[t])return;for(var e in f[t]=!1,i)Object.prototype.hasOwnProperty.call(i,e)&&(d[e]=i[e]);0==--m&&0===p&&A()}(t,e),i&&i(t,e)};var e,a=!0,s="eb16d78a6be8676cb13c",n=1e4,h={},o=[],r=[];function l(t){var i=D[t];if(!i)return S;var a=function(a){return i.hot.active?(D[a]?-1===D[a].parents.indexOf(t)&&D[a].parents.push(t):(o=[t],e=a),-1===i.children.indexOf(a)&&i.children.push(a)):(console.warn("[HMR] unexpected require("+a+") from disposed module "+t),o=[]),S(a)},s=function(t){return{configurable:!0,enumerable:!0,get:function(){return S[t]},set:function(i){S[t]=i}}};for(var n in S)Object.prototype.hasOwnProperty.call(S,n)&&"e"!==n&&"t"!==n&&Object.defineProperty(a,n,s(n));return a.e=function(t){return"ready"===c&&v("prepare"),p++,S.e(t).then(i,function(t){throw i(),t});function i(){p--,"prepare"===c&&(g[t]||M(t),0===p&&0===m&&A())}},a.t=function(t,i){return 1&i&&(t=a(t)),S.t(t,-2&i)},a}var y=[],c="idle";function v(t){c=t;for(var i=0;i<y.length;i++)y[i].call(null,t)}var u,d,C,m=0,p=0,g={},f={},x={};function b(t){return+t+""===t?+t:t}function P(t){if("idle"!==c)throw new Error("check() is only allowed in idle status");return a=t,v("check"),function(t){return t=t||1e4,new Promise(function(i,e){if("undefined"==typeof XMLHttpRequest)return e(new Error("No browser support"));try{var a=new XMLHttpRequest,n=S.p+""+s+".hot-update.json";a.open("GET",n,!0),a.timeout=t,a.send(null)}catch(t){return e(t)}a.onreadystatechange=function(){if(4===a.readyState)if(0===a.status)e(new Error("Manifest request to "+n+" timed out."));else if(404===a.status)i();else if(200!==a.status&&304!==a.status)e(new Error("Manifest request to "+n+" failed."));else{try{var t=JSON.parse(a.responseText)}catch(t){return void e(t)}i(t)}}})}(n).then(function(t){if(!t)return v("idle"),null;f={},g={},x=t.c,C=t.h,v("prepare");var i=new Promise(function(t,i){u={resolve:t,reject:i}});d={};return M(0),"prepare"===c&&0===p&&0===m&&A(),i})}function M(t){x[t]?(f[t]=!0,m++,function(t){var i=document.getElementsByTagName("head")[0],e=document.createElement("script");e.charset="utf-8",e.src=S.p+""+t+"."+s+".hot-update.js",i.appendChild(e)}(t)):g[t]=!0}function A(){v("ready");var t=u;if(u=null,t)if(a)Promise.resolve().then(function(){return N(a)}).then(function(i){t.resolve(i)},function(i){t.reject(i)});else{var i=[];for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&i.push(b(e));t.resolve(i)}}function N(i){if("ready"!==c)throw new Error("apply() is only allowed in ready status");var e,a,n,r,l;function y(t){for(var i=[t],e={},a=i.slice().map(function(t){return{chain:[t],id:t}});a.length>0;){var s=a.pop(),n=s.id,h=s.chain;if((r=D[n])&&!r.hot._selfAccepted){if(r.hot._selfDeclined)return{type:"self-declined",chain:h,moduleId:n};if(r.hot._main)return{type:"unaccepted",chain:h,moduleId:n};for(var o=0;o<r.parents.length;o++){var l=r.parents[o],y=D[l];if(y){if(y.hot._declinedDependencies[n])return{type:"declined",chain:h.concat([l]),moduleId:n,parentId:l};-1===i.indexOf(l)&&(y.hot._acceptedDependencies[n]?(e[l]||(e[l]=[]),u(e[l],[n])):(delete e[l],i.push(l),a.push({chain:h.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:t,outdatedModules:i,outdatedDependencies:e}}function u(t,i){for(var e=0;e<i.length;e++){var a=i[e];-1===t.indexOf(a)&&t.push(a)}}i=i||{};var m={},p=[],g={},f=function(){console.warn("[HMR] unexpected require("+M.moduleId+") to disposed module")};for(var P in d)if(Object.prototype.hasOwnProperty.call(d,P)){var M;l=b(P);var A=!1,N=!1,T=!1,I="";switch((M=d[P]?y(l):{type:"disposed",moduleId:P}).chain&&(I="\nUpdate propagation: "+M.chain.join(" -> ")),M.type){case"self-declined":i.onDeclined&&i.onDeclined(M),i.ignoreDeclined||(A=new Error("Aborted because of self decline: "+M.moduleId+I));break;case"declined":i.onDeclined&&i.onDeclined(M),i.ignoreDeclined||(A=new Error("Aborted because of declined dependency: "+M.moduleId+" in "+M.parentId+I));break;case"unaccepted":i.onUnaccepted&&i.onUnaccepted(M),i.ignoreUnaccepted||(A=new Error("Aborted because "+l+" is not accepted"+I));break;case"accepted":i.onAccepted&&i.onAccepted(M),N=!0;break;case"disposed":i.onDisposed&&i.onDisposed(M),T=!0;break;default:throw new Error("Unexception type "+M.type)}if(A)return v("abort"),Promise.reject(A);if(N)for(l in g[l]=d[l],u(p,M.outdatedModules),M.outdatedDependencies)Object.prototype.hasOwnProperty.call(M.outdatedDependencies,l)&&(m[l]||(m[l]=[]),u(m[l],M.outdatedDependencies[l]));T&&(u(p,[M.moduleId]),g[l]=f)}var R,k=[];for(a=0;a<p.length;a++)l=p[a],D[l]&&D[l].hot._selfAccepted&&k.push({module:l,errorHandler:D[l].hot._selfAccepted});v("dispose"),Object.keys(x).forEach(function(t){!1===x[t]&&function(t){delete installedChunks[t]}(t)});for(var B,F,w=p.slice();w.length>0;)if(l=w.pop(),r=D[l]){var Y={},X=r.hot._disposeHandlers;for(n=0;n<X.length;n++)(e=X[n])(Y);for(h[l]=Y,r.hot.active=!1,delete D[l],delete m[l],n=0;n<r.children.length;n++){var W=D[r.children[n]];W&&((R=W.parents.indexOf(l))>=0&&W.parents.splice(R,1))}}for(l in m)if(Object.prototype.hasOwnProperty.call(m,l)&&(r=D[l]))for(F=m[l],n=0;n<F.length;n++)B=F[n],(R=r.children.indexOf(B))>=0&&r.children.splice(R,1);for(l in v("apply"),s=C,g)Object.prototype.hasOwnProperty.call(g,l)&&(t[l]=g[l]);var L=null;for(l in m)if(Object.prototype.hasOwnProperty.call(m,l)&&(r=D[l])){F=m[l];var E=[];for(a=0;a<F.length;a++)if(B=F[a],e=r.hot._acceptedDependencies[B]){if(-1!==E.indexOf(e))continue;E.push(e)}for(a=0;a<E.length;a++){e=E[a];try{e(F)}catch(t){i.onErrored&&i.onErrored({type:"accept-errored",moduleId:l,dependencyId:F[a],error:t}),i.ignoreErrored||L||(L=t)}}}for(a=0;a<k.length;a++){var _=k[a];l=_.module,o=[l];try{S(l)}catch(t){if("function"==typeof _.errorHandler)try{_.errorHandler(t)}catch(e){i.onErrored&&i.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:e,originalError:t}),i.ignoreErrored||L||(L=e),L||(L=t)}else i.onErrored&&i.onErrored({type:"self-accept-errored",moduleId:l,error:t}),i.ignoreErrored||L||(L=t)}}return L?(v("fail"),Promise.reject(L)):(v("idle"),new Promise(function(t){t(p)}))}var D={};function S(i){if(D[i])return D[i].exports;var a=D[i]={i:i,l:!1,exports:{},hot:function(t){var i={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:e!==t,active:!0,accept:function(t,e){if(void 0===t)i._selfAccepted=!0;else if("function"==typeof t)i._selfAccepted=t;else if("object"==typeof t)for(var a=0;a<t.length;a++)i._acceptedDependencies[t[a]]=e||function(){};else i._acceptedDependencies[t]=e||function(){}},decline:function(t){if(void 0===t)i._selfDeclined=!0;else if("object"==typeof t)for(var e=0;e<t.length;e++)i._declinedDependencies[t[e]]=!0;else i._declinedDependencies[t]=!0},dispose:function(t){i._disposeHandlers.push(t)},addDisposeHandler:function(t){i._disposeHandlers.push(t)},removeDisposeHandler:function(t){var e=i._disposeHandlers.indexOf(t);e>=0&&i._disposeHandlers.splice(e,1)},check:P,apply:N,status:function(t){if(!t)return c;y.push(t)},addStatusHandler:function(t){y.push(t)},removeStatusHandler:function(t){var i=y.indexOf(t);i>=0&&y.splice(i,1)},data:h[t]};return e=void 0,i}(i),parents:(r=o,o=[],r),children:[]};return t[i].call(a.exports,a,a.exports,l(i)),a.l=!0,a.exports}S.m=t,S.c=D,S.d=function(t,i,e){S.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},S.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},S.t=function(t,i){if(1&i&&(t=S(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(S.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var a in t)S.d(e,a,function(i){return t[i]}.bind(null,a));return e},S.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return S.d(i,"a",i),i},S.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},S.p="",S.h=function(){return s},l("./main.ts")(S.s="./main.ts")}({"./adsorption.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./enum/enum-configlib.ts"),s=function(){function t(t,i){this.canvasData=t,this.intersect=i}return t.prototype.adsorpToXY=function(t,i,e){for(var s,n={x:t,y:i},h=a.Attribute.adsorption,o=0;o<this.canvasData.getData().length;o++){var r=this.canvasData.getData(o);switch(r.flag){case a.ToolsName.point:if(e&&1===e.length&&e[0]===o)break;(s=this.adPoint(t,i,r)).flag&&s.dist<=h&&(h=s.dist,n={x:s.x,y:s.y});break;case a.ToolsName.segment:if(e&&1===e.length&&e[0]===o)break;(s=this.adSegment(t,i,r)).flag&&s.dist<=h&&(h=s.dist,n={x:s.x,y:s.y});break;case a.ToolsName.circular:if(e&&1===e.length&&e[0]===o)break;if((s=this.adCircular(t,i,r)).flag&&s.dist<=h){h=s.dist,n={x:s.x,y:s.y};for(var l=0;l<r.fanAndRadius.length;l++){var y=r.fanAndRadius[l];switch(y.flag){case a.ToolsName.fan:if(e&&2===e.length&&e[1]===l)break;(s=this.adFan(t,i,y)).flag&&(h=s.dist,n={x:s.x,y:s.y});break;case a.ToolsName.radius:if(e&&2===e.length&&e[1]===l)break;(s=this.adRadius(t,i,y)).flag&&(h=s.dist,n={x:s.x,y:s.y});break;case a.ToolsName.diameter:if(e&&2===e.length&&e[1]===l)break;(s=this.adDiameter(t,i,y)).flag&&(h=s.dist,n={x:s.x,y:s.y})}}}break;case a.ToolsName.letterFlag:case a.ToolsName.default:}}return(s=this.adIntePoint(t,i)).flag&&(n={x:s.x,y:s.y}),n},t.prototype.adPoint=function(t,i,e){var s=e,n=Math.sqrt(Math.pow(t-s.x,2)+Math.pow(i-s.y,2));return n<=a.Attribute.adsorption?{x:s.x,y:s.y,flag:!0,dist:n}:{x:t,y:i,flag:!1}},t.prototype.adSegment=function(t,i,e){var s=e,n=Math.sqrt(Math.pow(t-s.x,2)+Math.pow(i-s.y,2)),h=Math.atan2(i-s.y,t-s.x);h=h>=0?h:2*Math.PI+h;var o=Math.abs(Math.sin(Math.abs(s.angle-h))*n),r=Math.cos(Math.abs(s.angle-h))*n;return o<=a.Attribute.adsorption&&r>=0&&r<=s.r?{x:Math.cos(s.angle)*r+s.x,y:Math.sin(s.angle)*r+s.y,flag:!0,dist:o}:o<=a.Attribute.adsorption&&r>=-a.Attribute.adsorption&&r<0?{x:s.x,y:s.y,flag:!0,dist:o}:o<=a.Attribute.adsorption&&r>s.r&&r<=s.r+a.Attribute.adsorption?{x:Math.cos(s.angle)*s.r+s.x,y:Math.sin(s.angle)*s.r+s.y,flag:!0,dist:o}:{x:t,y:i,flag:!1}},t.prototype.adCircular=function(t,i,e){var s=e,n=Math.sqrt(Math.pow(t-s.x,2)+Math.pow(i-s.y,2)),h=Math.atan2(i-s.y,t-s.x);return h=h>=0?h:2*Math.PI+h,n<=a.Attribute.adsorption?{x:s.x,y:s.y,flag:!0,dist:n}:Math.abs(n-s.r)<=a.Attribute.adsorption?{x:Math.cos(h)*s.r+s.x,y:Math.sin(h)*s.r+s.y,flag:!0,dist:Math.abs(n-s.r)}:{x:t,y:i,flag:!1}},t.prototype.adFan=function(t,i,e){var s=e,n=Math.cos(s.startAngle)*s.r+s.x,h=Math.sin(s.startAngle)*s.r+s.y,o=Math.sqrt(Math.pow(t-n,2)+Math.pow(i-h,2)),r=Math.cos(s.endAngle)*s.r+s.x,l=Math.sin(s.endAngle)*s.r+s.y,y=Math.sqrt(Math.pow(t-r,2)+Math.pow(i-l,2));return o<=y?o<=a.Attribute.adsorption?{x:n,y:h,flag:!0,dist:o}:{x:t,y:i,flag:!1}:y<=a.Attribute.adsorption?{x:r,y:l,flag:!0,dist:o}:{x:t,y:i,flag:!1}},t.prototype.adRadius=function(t,i,e){var s=e,n=Math.cos(s.angle)*s.r+s.x,h=Math.sin(s.angle)*s.r+s.y,o=Math.sqrt(Math.pow(t-n,2)+Math.pow(i-h,2));return o<=a.Attribute.adsorption?{x:n,y:h,flag:!0,dist:o}:{x:t,y:i,flag:!1}},t.prototype.adDiameter=function(t,i,e){var s=e,n=Math.cos(s.angle)*s.r+s.x,h=Math.sin(s.angle)*s.r+s.y,o=Math.cos(s.angle+Math.PI)*s.r+s.x,r=Math.sin(s.angle+Math.PI)*s.r+s.y,l=Math.sqrt(Math.pow(t-n,2)+Math.pow(i-h,2)),y=Math.sqrt(Math.pow(t-o,2)+Math.pow(i-r,2));return l<=a.Attribute.adsorption?{x:n,y:h,flag:!0,dist:l}:y<=a.Attribute.adsorption?{x:o,y:r,flag:!0,dist:y}:{x:t,y:i,flag:!1}},t.prototype.adIntePoint=function(t,i){var e=this.intersect.getData(),s={x:t,y:i},n=a.Attribute.adsorption,h=!1;if(0===e.length)return{x:s.x,y:s.y,flag:!1};for(var o=0,r=e;o<r.length;o++){var l=r[o],y=Math.sqrt(Math.pow(t-l.x,2)+Math.pow(i-l.y,2));y<n&&(n=y,s=l,h=!0)}return h?{x:s.x,y:s.y,flag:!0,dist:n}:{x:s.x,y:s.y,flag:!1}},t}();i.Adsorption=s},"./auxiliaryListen.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./enum/enum-configlib.ts"),s=function(){function t(t,i,e,s,n){this.eventClick=t,this.canvasChoosed=i,this.canvasData=e,this.rePaint=s,this.auxiliaryFlag=a.Auxiliary.default,this.intersect=n,this.buttonRubber(),this.buttonRule(),this.buttonProtractor(),this.buttonRotate(),this.buttonFlag(),this.buttonCancle()}return t.prototype.init=function(t,i){this.buttonListen=t,this.textBox=i},t.prototype.btnListen=function(t,i){var e=this;document.getElementById(t).addEventListener(e.eventClick,function(t){t=t||window.event,e.auxiliaryFlag===a.Auxiliary.default&&e.buttonListen.getButtonFlag()===a.ToolsName.default&&(e.textBox.getTextFlag()||i.call(e,t))},!1)},t.prototype.buttonFlag=function(){this.btnListen(a.Attribute.btnLetFlagID,function(t){this.auxiliaryFlag=a.Auxiliary.flag,t.srcElement.className="choosed",this.canvasChoosed.cancleSelected(),this.canvasChoosed.recoverIndex(),this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.repaintPoint()})},t.prototype.buttonRubber=function(){this.btnListen(a.Attribute.btnRubberID,function(t){var i=this.canvasChoosed.getIndex();0!==i.length&&(this.canvasData.delData(i),this.canvasChoosed.recoverIndex(),this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.recoverButtonFlag(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint())})},t.prototype.buttonRule=function(){this.btnListen(a.Attribute.btnRuleID,function(t){this.auxiliaryFlag=a.Auxiliary.rule,document.getElementById(a.Attribute.btnRuleID).className="choosed",this.canvasChoosed.cancleSelected(),this.canvasChoosed.recoverIndex(),this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.repaintPoint()})},t.prototype.buttonProtractor=function(){this.btnListen(a.Attribute.btnProtractorID,function(t){this.auxiliaryFlag=a.Auxiliary.protractor,t.srcElement.className="choosed",this.canvasChoosed.cancleSelected(),this.canvasChoosed.recoverIndex(),this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.repaintPoint()})},t.prototype.buttonRotate=function(){this.btnListen(a.Attribute.btnRotateID,function(t){var i=this.canvasChoosed.getIndex();if(1===i.length&&this.canvasData.getData(i[0]).flag===a.ToolsName.segment)this.auxiliaryFlag=a.Auxiliary.rotate,t.srcElement.className="choosed";else if(2===i.length&&this.canvasData.getData(i[0]).fanAndRadius[i[1]].flag===a.ToolsName.fan)this.auxiliaryFlag=a.Auxiliary.rotate,t.srcElement.className="choosed";else if(2===i.length&&this.canvasData.getData(i[0]).fanAndRadius[i[1]].flag===a.ToolsName.radius)this.auxiliaryFlag=a.Auxiliary.rotate,t.srcElement.className="choosed";else{if(2!==i.length||this.canvasData.getData(i[0]).fanAndRadius[i[1]].flag!==a.ToolsName.diameter)return;this.auxiliaryFlag=a.Auxiliary.rotate,t.srcElement.className="choosed"}})},t.prototype.buttonCancle=function(){this.btnListen(a.Attribute.btnCancleID,function(t){this.canvasChoosed.cancleSelected(),this.canvasChoosed.recoverIndex();var i=this.canvasData.getData().length;if(0!==i){var e=this.canvasData.getData(i-1);if(e.flag===a.ToolsName.circular){var s=e.fanAndRadius;if(0!==s.length){var n=s[s.length-1];n.flag===a.ToolsName.fan&&n.hasChord.isShow?this.canvasData.delData([i-1,s.length-1,-1]):this.canvasData.delData([i-1,s.length-1])}else this.canvasData.delData([i-1])}else this.canvasData.delData([i-1])}this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.recoverButtonFlag(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint()})},t.prototype.getButtonFlag=function(){return this.auxiliaryFlag},t.prototype.recoverButtonFlag=function(){this.auxiliaryFlag=a.Auxiliary.default,[a.Attribute.btnLetFlagID,a.Attribute.btnRubberID,a.Attribute.btnRuleID,a.Attribute.btnProtractorID,a.Attribute.btnRotateID,a.Attribute.btnCancleID].forEach(function(t){document.getElementById(t.toString()).className="nochoosed"})},t}();i.AuxiliaryListen=s},"./buttonListen.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./enum/enum-configlib.ts"),s=function(){function t(t,i,e,s,n){this.buttonFlag=a.ToolsName.default,this.eventClick=t,this.rePaint=i,this.canvasData=e,this.canvasChoosed=s,this.intersect=n,this.buttonPoint(),this.buttonSegment(),this.buttonCircular(),this.buttonFan(),this.buttonRadius(),this.buttonDiameter(),this.buttonChord()}return t.prototype.init=function(t,i){this.auxiliaryTools=t,this.textBox=i},t.prototype.buttonListen=function(t,i,e){var s=this;document.getElementById(t).addEventListener(i,function(t){if(t=t||window.event,s.buttonFlag===a.ToolsName.default&&s.auxiliaryTools.getButtonFlag()===a.Auxiliary.default&&!s.textBox.getTextFlag()){var i=s.canvasChoosed.getIndex();if(e===a.ToolsName.fan||e===a.ToolsName.radius||e===a.ToolsName.diameter){if(1!==i.length)return;if(s.canvasData.getData(i[0]).flag!==a.ToolsName.circular)return;s.canvasChoosed.cancleSelected(),s.buttonFlag=e,t.srcElement.className="choosed"}else if(e===a.ToolsName.chord){if(2!==i.length)return;if(s.canvasData.getData(i[0]).fanAndRadius[i[1]].flag!==a.ToolsName.fan)return;s.canvasData.getData(i[0]).fanAndRadius[i[1]].hasChord.isShow=!0,s.canvasChoosed.cancleSelected(),s.canvasChoosed.recoverIndex(),s.buttonFlag=a.ToolsName.default,t.srcElement.className="nochoosed"}else s.canvasChoosed.cancleSelected(),s.canvasChoosed.recoverIndex(),s.buttonFlag=e,t.srcElement.className="choosed";s.rePaint.clearCanvas(),s.rePaint.rePaint(),s.intersect.repaintPoint()}},!1)},t.prototype.buttonPoint=function(){this.buttonListen(a.Attribute.btnPointID,this.eventClick,a.ToolsName.point)},t.prototype.buttonSegment=function(){this.buttonListen(a.Attribute.btnSegmentID,this.eventClick,a.ToolsName.segment)},t.prototype.buttonCircular=function(){this.buttonListen(a.Attribute.btnCircularID,this.eventClick,a.ToolsName.circular)},t.prototype.buttonFan=function(){this.buttonListen(a.Attribute.btnFanID,this.eventClick,a.ToolsName.fan)},t.prototype.buttonRadius=function(){this.buttonListen(a.Attribute.btnRadiusID,this.eventClick,a.ToolsName.radius)},t.prototype.buttonDiameter=function(){this.buttonListen(a.Attribute.btnDiameterID,this.eventClick,a.ToolsName.diameter)},t.prototype.buttonChord=function(){this.buttonListen(a.Attribute.btnChordID,this.eventClick,a.ToolsName.chord)},t.prototype.buttonTangent=function(){this.buttonListen(a.Attribute.btnTangentID,this.eventClick,a.ToolsName.tangent)},t.prototype.getButtonFlag=function(){return this.buttonFlag},t.prototype.recoverButtonFlag=function(){this.buttonFlag=a.ToolsName.default,[a.Attribute.btnPointID,a.Attribute.btnSegmentID,a.Attribute.btnCircularID,a.Attribute.btnFanID,a.Attribute.btnRadiusID,a.Attribute.btnDiameterID,a.Attribute.btnChordID].forEach(function(t){document.getElementById(t.toString()).className="nochoosed"})},t}();i.ButtonListen=s},"./canvasChoosed.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./enum/enum-configlib.ts"),s=function(){function t(t,i,e){this.offset=20,this.index=[],this.isMobild=t,this.canvasData=i,this.myCanvasNode=e}return t.prototype.canvasClick=function(t){if(this.isMobild){var i=t.detail.gesture;this.x=i.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=i.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var e=t;this.x=e.clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=e.clientY-this.myCanvasNode.getBoundingClientRect().top}this.isChoosed.call(this)},t.prototype.isChoosed=function(){var t=[];this.index=[];for(var i=this.canvasData.getData(),e=i.length-1;e>=0;e--){switch((h=i[e]).flag){case a.ToolsName.point:this.cirPoint(h)?t.push([e]):h.isChoosed=!1;break;case a.ToolsName.segment:this.cirSegment(h)?t.push([e]):h.isChoosed=!1;break;case a.ToolsName.circular:if(this.cirCircular(h)){var s=[];s.push(e);for(var n=h.fanAndRadius.length-1;n>=0;n--){switch((o=h.fanAndRadius[n]).flag){case a.ToolsName.fan:this.cirFan(o)?(s.push(n),this.cirChord(o.hasChord)?(console.log(123),s.push(-1)):o.hasChord.isChoosed=!1):o.isChoosed=!1;break;case a.ToolsName.radius:this.cirRadius(o)?s.push(n):o.isChoosed=!1;break;case a.ToolsName.diameter:this.cirDiameter(o)?s.push(n):o.isChoosed=!1}}t.push(s)}else{h.isChoosed=!1;for(n=h.fanAndRadius.length-1;n>=0;n--){switch((o=h.fanAndRadius[n]).flag){case a.ToolsName.fan:this.cirFan(o)||(o.isChoosed=!1,this.cirChord(o.hasChord)||(o.hasChord.isChoosed=!1));break;case a.ToolsName.radius:this.cirRadius(o)||(o.isChoosed=!1);break;case a.ToolsName.diameter:this.cirDiameter(o)||(o.isChoosed=!1)}}}break;case a.ToolsName.tangent:break;case a.ToolsName.letterFlag:this.cirLetterFlag(h)?t.push([e]):h.isChoosed=!1}}for(e=0;e<t.length;e++){var h;if(1===(h=t[e]).length){if(i[h[0]].isChoosed)return e!==t.length-1?(i[h[0]].isChoosed=!1,this.index.push(t[e+1][0]),void(i[this.index[0]].isChoosed=!0)):(i[h[0]].isChoosed=!1,this.index.push(t[0][0]),void(i[this.index[0]].isChoosed=!0));if(e===t.length-1)return this.index.push(t[0][0]),void(i[this.index[0]].isChoosed=!0)}else if(h.length>1)for(n=0;n<h.length;n++){var o=h[n];if(0===n){if(i[o].isChoosed)return i[o].isChoosed=!1,this.index.push(o),this.index.push(t[e][n+1]),void(i[this.index[0]].fanAndRadius[this.index[1]].isChoosed=!0)}else if(-1===o){if(i[h[0]].fanAndRadius[h[n-1]].hasChord.isChoosed)return n!==h.length-1?(i[h[0]].fanAndRadius[h[n-1]].hasChord.isChoosed=!1,this.index.push(h[0]),this.index.push(t[e][n+1]),void(i[this.index[0]].fanAndRadius[this.index[1]].isChoosed=!0)):e!==t.length-1?(i[h[0]].fanAndRadius[h[n-1]].hasChord.isChoosed=!1,this.index.push(t[e+1][0]),void(i[this.index[0]].isChoosed=!0)):(i[h[0]].fanAndRadius[h[n-1]].hasChord.isChoosed=!1,this.index.push(t[0][0]),void(i[this.index[0]].isChoosed=!0))}else if(i[h[0]].fanAndRadius[o].isChoosed)return n!==h.length-1?(i[h[0]].fanAndRadius[o].isChoosed=!1,this.index.push(h[0]),void(-1===t[e][n+1]?(this.index.push(t[e][n]),this.index.push(t[e][n+1]),i[this.index[0]].fanAndRadius[this.index[1]].hasChord.isChoosed=!0):(this.index.push(t[e][n+1]),i[this.index[0]].fanAndRadius[this.index[1]].isChoosed=!0))):e!==t.length-1?(i[h[0]].fanAndRadius[o].isChoosed=!1,this.index.push(t[e+1][0]),void(i[this.index[0]].isChoosed=!0)):(i[h[0]].fanAndRadius[o].isChoosed=!1,this.index.push(t[0][0]),void(i[this.index[0]].isChoosed=!0));if(e===t.length-1&&n===h.length-1)return this.index.push(t[0][0]),void(i[this.index[0]].isChoosed=!0)}}},t.prototype.getIndex=function(){return this.index},t.prototype.recoverIndex=function(){this.index=[]},t.prototype.cancleSelected=function(){1===this.index.length?this.canvasData.getData(this.index[0]).isChoosed=!1:2===this.index.length?this.canvasData.getData(this.index[0]).fanAndRadius[this.index[1]].isChoosed=!1:3===this.index.length&&(this.canvasData.getData(this.index[0]).fanAndRadius[this.index[1]].hasChord.isChoosed=!1)},t.prototype.cirPoint=function(t){var i=t;return Math.sqrt(Math.pow(this.y-i.y,2)+Math.pow(this.x-i.x,2))<=a.Attribute.adsorpChoosed},t.prototype.cirSegment=function(t){var i=t,e=Math.sqrt(Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2)),s=Math.atan2(this.y-i.y,this.x-i.x);s=s>=0?s:2*Math.PI+s;var n=Math.abs(Math.sin(Math.abs(i.angle-s))*e),h=Math.cos(Math.abs(i.angle-s))*e;return n<=a.Attribute.adsorpChoosed&&h>=-a.Attribute.adsorpChoosed&&h<=i.r+a.Attribute.adsorpChoosed},t.prototype.cirCircular=function(t){var i=t;return Math.sqrt(Math.pow(this.y-i.y,2)+Math.pow(this.x-i.x,2))<=i.r},t.prototype.cirFan=function(t){var i=t;if(Math.sqrt(Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2))>i.r)return!1;var e=Math.atan2(this.y-i.y,this.x-i.x);if(e=e>=0?e:2*Math.PI+e,i.startAngle<=i.endAngle){if(e<i.startAngle||e>i.endAngle)return!1}else if(e>i.endAngle&&e<i.startAngle)return!1;return!0},t.prototype.cirRadius=function(t){var i=t,e=Math.sqrt(Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2)),s=Math.atan2(this.y-i.y,this.x-i.x);s=s>=0?s:2*Math.PI+s;var n=Math.abs(Math.sin(Math.abs(i.angle-s))*e),h=Math.cos(Math.abs(i.angle-s))*e;return n<=a.Attribute.adsorpChoosed&&h>=-a.Attribute.adsorpChoosed&&h<=i.r+a.Attribute.adsorpChoosed},t.prototype.cirDiameter=function(t){var i=t,e=Math.sqrt(Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2)),s=Math.atan2(this.y-i.y,this.x-i.x);s=s>=0?s:2*Math.PI+s;var n=Math.abs(Math.sin(Math.abs(i.angle-s))*e),h=Math.cos(Math.abs(i.angle-s))*e,o=Math.abs(Math.sin(Math.abs(i.angle+Math.PI-s))*e),r=Math.cos(Math.abs(i.angle+Math.PI-s))*e;return n<=a.Attribute.adsorpChoosed&&h>=-a.Attribute.adsorpChoosed&&h<=i.r+a.Attribute.adsorpChoosed||o<=a.Attribute.adsorpChoosed&&r>=-a.Attribute.adsorpChoosed&&r<=i.r+a.Attribute.adsorpChoosed},t.prototype.cirChord=function(t){var i=t;if(!i.isShow)return!1;var e=Math.atan2(i.endY-i.y,i.endX-i.x);e=e>=0?e:2*Math.PI+e;var s=Math.sqrt(Math.pow(i.endX-i.x,2)+Math.pow(i.endY-i.y,2)),n=Math.sqrt(Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2)),h=Math.atan2(this.y-i.y,this.x-i.x);h=h>=0?h:2*Math.PI+h;var o=Math.abs(Math.sin(Math.abs(e-h))*n),r=Math.cos(Math.abs(e-h))*n;return o<=a.Attribute.adsorpChoosed&&r>=-a.Attribute.adsorpChoosed&&r<=s+a.Attribute.adsorpChoosed},t.prototype.cirLetterFlag=function(t){var i=t;return this.x>=i.x-a.Attribute.adsorpChoosed&&this.x<=i.x+(a.Attribute.adsorpChoosed+a.Attribute.adsorpChoosed/2)&&this.y>=i.y-(a.Attribute.adsorpChoosed-a.Attribute.adsorpChoosed/2)&&this.y<=i.y+2*a.Attribute.adsorpChoosed},t}();i.CanvasChoosed=s},"./canvasData.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(){this.data=[]}return t.prototype.setData=function(t){this.data.push(t)},t.prototype.getData=function(t){return void 0!==t&&t<this.data.length?this.data[t]:this.data},t.prototype.delData=function(t){if(!t||0===t.length)return this.data.pop();if(1===t.length&&t[0]<this.data.length){var i=this.getData(t[0]);return this.data.splice(t[0],1),i}if(2===t.length&&t[0]<this.data.length&&t[1]<this.data[t[0]].fanAndRadius.length){i=this.getData(t[0]).fanAndRadius[t[1]];return this.data[t[0]].fanAndRadius.splice(t[1],1),i}if(3===t.length&&t[0]<this.data.length&&t[1]<this.data[t[0]].fanAndRadius.length){i=this.getData(t[0]).fanAndRadius[t[1]].hasChord;return this.data[t[0]].fanAndRadius[t[1]].hasChord.isShow=!1,i}},t}();i.CanvasData=a},"./circular.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./enum/enum-configlib.ts"),s=e("./adsorption.ts"),n=function(){function t(t,i,e,n,h,o,r){this.flag=a.ToolsName.circular,this.isMobild=t,this.myCanvas=i,this.myCanvasNode=e,this.eventFlag=!1,this.eventCount=0,this.anticlockwise=!1,this.canvasData=o,this.rePaint=n,this.buttonListen=h,this.isChoosed=!1,this.fanAndRadius=[],this.fillStyle=a.Color.default,this.intersect=r,this.adsorption=new s.Adsorption(this.canvasData,this.intersect)}return t.prototype.startCallBack=function(t){if(this.eventFlag||0!==this.eventCount){if(this.eventFlag||2!==this.eventCount)return;this.eventFlag=!0;y=0,c=0;if(this.isMobild){var i=t;y=i.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,c=i.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var e=t;y=e.clientX-this.myCanvasNode.getBoundingClientRect().left,c=e.clientY-this.myCanvasNode.getBoundingClientRect().top}y+=a.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint(),y=(l=this.adsorption.adsorpToXY(y,c)).x,c=l.y;var s=parseFloat((Math.sqrt(Math.pow(Math.abs(y-this.x),2)+Math.pow(Math.abs(c-this.y),2))/a.Attribute.unitProp).toFixed(1)),n=Math.round(s*a.Attribute.unitProp);n<=4&&(s=.1,n=4);var h=Math.atan2(c-this.y,y-this.x);h=h>=0?h:2*Math.PI+h,h=Math.round(180/Math.PI*h)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,n,h,h,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.arc(this.x,this.y,n,0,2*Math.PI,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(this.x,this.y);var o=this.rotatexy(this.x,this.y,0,20,h);this.myCanvas.lineTo(o.x,o.y),o=this.rotatexy(this.x,this.y,n,20,h),this.myCanvas.lineTo(o.x,o.y),o=this.rotatexy(this.x,this.y,n,0,h),this.myCanvas.lineTo(o.x,o.y);for(var r=10;r<n;r+=10)o=this.rotatexy(this.x,this.y,r,0,h),this.myCanvas.moveTo(o.x,o.y),o=this.rotatexy(this.x,this.y,r,5,h),this.myCanvas.lineTo(o.x,o.y),(r+=10)<n&&(o=this.rotatexy(this.x,this.y,r,0,h),this.myCanvas.moveTo(o.x,o.y),o=this.rotatexy(this.x,this.y,r,10,h),this.myCanvas.lineTo(o.x,o.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(this.x,this.y),this.myCanvas.rotate(h),this.myCanvas.font="bold 22px Arial",this.myCanvas.fillStyle="black",this.myCanvas.fillText(s+"cm",n/2-22,-30),this.myCanvas.restore()}else{this.eventFlag=!0,this.eventCount=1,this.fanAndRadius=[];var l,y=0,c=0;if(this.isMobild){var v=t;y=v.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,c=v.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var u=t;y=u.clientX-this.myCanvasNode.getBoundingClientRect().left,c=u.clientY-this.myCanvasNode.getBoundingClientRect().top}y+=a.Attribute.mouseOffset,y=(l=this.adsorption.adsorpToXY(y,c)).x,c=l.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propNFStyle,this.myCanvas.arc(y,c,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()}},t.prototype.moveCallBack=function(t){if(this.eventFlag&&1===this.eventCount){var i=0,e=0;if(this.isMobild){var s=t;i=s.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=s.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,e=n.clientY-this.myCanvasNode.getBoundingClientRect().top}i+=a.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(r=this.adsorption.adsorpToXY(i,e)).x,e=r.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propNFStyle,this.myCanvas.arc(i,e,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()}else if(this.eventFlag||2!==this.eventCount){if(!this.eventFlag||2!==this.eventCount)return;i=0,e=0;if(this.isMobild){var h=t;i=h.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=h.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var o=t;i=o.clientX-this.myCanvasNode.getBoundingClientRect().left,e=o.clientY-this.myCanvasNode.getBoundingClientRect().top}i+=a.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(r=this.adsorption.adsorpToXY(i,e)).x,e=r.y;u=parseFloat((Math.sqrt(Math.pow(Math.abs(i-this.x),2)+Math.pow(Math.abs(e-this.y),2))/a.Attribute.unitProp).toFixed(1));(c=Math.round(u*a.Attribute.unitProp))<=4&&(u=.1,c=4),v=(v=Math.atan2(e-this.y,i-this.x))>=0?v:2*Math.PI+v,v=Math.round(180/Math.PI*v)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propNFStyle,this.myCanvas.arc(this.x,this.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,c,v,v,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.arc(this.x,this.y,c,0,2*Math.PI,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(this.x,this.y);d=this.rotatexy(this.x,this.y,0,20,v);this.myCanvas.lineTo(d.x,d.y),d=this.rotatexy(this.x,this.y,c,20,v),this.myCanvas.lineTo(d.x,d.y),d=this.rotatexy(this.x,this.y,c,0,v),this.myCanvas.lineTo(d.x,d.y);for(C=10;C<c;C+=10)d=this.rotatexy(this.x,this.y,C,0,v),this.myCanvas.moveTo(d.x,d.y),d=this.rotatexy(this.x,this.y,C,5,v),this.myCanvas.lineTo(d.x,d.y),(C+=10)<c&&(d=this.rotatexy(this.x,this.y,C,0,v),this.myCanvas.moveTo(d.x,d.y),d=this.rotatexy(this.x,this.y,C,10,v),this.myCanvas.lineTo(d.x,d.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(this.x,this.y),this.myCanvas.rotate(v),this.myCanvas.font="bold 22px Arial",this.myCanvas.fillStyle="black",this.myCanvas.fillText(u+"cm",c/2-22,-30),this.myCanvas.restore()}else{var r,i=0,e=0;if(this.isMobild){var l=t;i=l.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=l.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var y=t;i=y.clientX-this.myCanvasNode.getBoundingClientRect().left,e=y.clientY-this.myCanvasNode.getBoundingClientRect().top}i+=a.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(r=this.adsorption.adsorpToXY(i,e)).x,e=r.y;var c,v,u=parseFloat((Math.sqrt(Math.pow(Math.abs(i-this.x),2)+Math.pow(Math.abs(e-this.y),2))/a.Attribute.unitProp).toFixed(1));(c=Math.round(u*a.Attribute.unitProp))<=4&&(u=.1,c=4),v=(v=Math.atan2(e-this.y,i-this.x))>=0?v:2*Math.PI+v,v=Math.round(180/Math.PI*v)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propNFStyle,this.myCanvas.arc(this.x,this.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,c,v,v,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.arc(this.x,this.y,c,v,2*Math.PI+v,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(this.x,this.y);var d=this.rotatexy(this.x,this.y,0,20,v);this.myCanvas.lineTo(d.x,d.y),d=this.rotatexy(this.x,this.y,c,20,v),this.myCanvas.lineTo(d.x,d.y),d=this.rotatexy(this.x,this.y,c,0,v),this.myCanvas.lineTo(d.x,d.y);for(var C=10;C<c;C+=10)d=this.rotatexy(this.x,this.y,C,0,v),this.myCanvas.moveTo(d.x,d.y),d=this.rotatexy(this.x,this.y,C,5,v),this.myCanvas.lineTo(d.x,d.y),(C+=10)<c&&(d=this.rotatexy(this.x,this.y,C,0,v),this.myCanvas.moveTo(d.x,d.y),d=this.rotatexy(this.x,this.y,C,10,v),this.myCanvas.lineTo(d.x,d.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(this.x,this.y),this.myCanvas.rotate(v),this.myCanvas.font="bold 22px Arial",this.myCanvas.fillStyle="black",this.myCanvas.fillText(u+"cm",c/2-22,-30),this.myCanvas.restore()}},t.prototype.endCallBack=function(t){if(this.eventFlag&&1===this.eventCount){if(this.eventFlag=!1,this.eventCount=2,this.isMobild){var i=t;this.x=i.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=i.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var e=t;this.x=e.clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=e.clientY-this.myCanvasNode.getBoundingClientRect().top}this.x+=a.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint();var s=this.adsorption.adsorpToXY(this.x,this.y);this.x=s.x,this.y=s.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()}else{if(!this.eventFlag||2!==this.eventCount)return;this.eventFlag=!1,this.eventCount=0;var n=0,h=0;if(this.isMobild){var o=t;n=o.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,h=o.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var r=t;n=r.clientX-this.myCanvasNode.getBoundingClientRect().left,h=r.clientY-this.myCanvasNode.getBoundingClientRect().top}n+=a.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint(),n=(s=this.adsorption.adsorpToXY(n,h)).x,h=s.y;var l=parseFloat((Math.sqrt(Math.pow(Math.abs(n-this.x),2)+Math.pow(Math.abs(h-this.y),2))/a.Attribute.unitProp).toFixed(1));this.r=Math.round(l*a.Attribute.unitProp),this.r<=4&&(l=.1,this.r=4);var y=Math.atan2(h-this.y,n-this.x);y=y>=0?y:2*Math.PI+y,y=Math.round(180/Math.PI*y)*(Math.PI/180),this.intersect.pointEach(this.data(),this.canvasData),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.arc(this.x,this.y,this.r,0,2*Math.PI,!1),this.myCanvas.stroke(),this.canvasData.setData(this.data()),this.buttonListen.recoverButtonFlag()}},t.prototype.data=function(){return{flag:this.flag,isChoosed:this.isChoosed,x:this.x,y:this.y,r:this.r,anticlockwise:this.anticlockwise,fillStyle:this.fillStyle,fanAndRadius:this.fanAndRadius}},t.prototype.rotatexy=function(t,i,e,a,s){return{x:e*Math.cos(s)+a*Math.sin(s)+t,y:e*Math.sin(s)-a*Math.cos(s)+i}},t}();i.Circular=n},"./diameter.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./enum/enum-configlib.ts"),s=function(){function t(t,i,e,s,n,h,o,r){this.flag=a.ToolsName.diameter,this.isMobild=t,this.myCanvas=i,this.myCanvasNode=e,this.eventFlag=!1,this.eventCount=0,this.anticlockwise=!1,this.canvasData=h,this.rePaint=s,this.buttonListen=n,this.isChoosed=!1,this.canvasChoosed=o,this.intersect=r}return t.prototype.startCallBack=function(t){if(!this.eventFlag&&0===this.eventCount){this.eventFlag=!0,this.eventCount=1;var i=0,e=0;if(this.isMobild){var s=t;i=s.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=s.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,e=n.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var h=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(h[0]).x,this.y=this.canvasData.getData(h[0]).y,this.r=this.canvasData.getData(h[0]).r;var o=Math.atan2(e-this.y,i-this.x);o=o>=0?o:2*Math.PI+o,this.angle=Math.round(180/Math.PI*o)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.angle,this.angle,this.anticlockwise),this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.angle+Math.PI,this.angle+Math.PI,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke()}},t.prototype.moveCallBack=function(t){if(this.eventFlag||0!==this.eventCount){if(this.eventFlag&&1===this.eventCount){s=0,n=0;if(this.isMobild){var i=t;s=i.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,n=i.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var e=t;s=e.clientX-this.myCanvasNode.getBoundingClientRect().left,n=e.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();l=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(l[0]).x,this.y=this.canvasData.getData(l[0]).y,this.r=this.canvasData.getData(l[0]).r,r=(r=Math.atan2(n-this.y,s-this.x))>=0?r:2*Math.PI+r,r=Math.round(180/Math.PI*r)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,r,r,this.anticlockwise),this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,r+Math.PI,r+Math.PI,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke()}}else{var s=0,n=0;if(this.isMobild){var h=t;s=h.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,n=h.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var o=t;s=o.clientX-this.myCanvasNode.getBoundingClientRect().left,n=o.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var r,l=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(l[0]).x,this.y=this.canvasData.getData(l[0]).y,this.r=this.canvasData.getData(l[0]).r,r=(r=Math.atan2(n-this.y,s-this.x))>=0?r:2*Math.PI+r,r=Math.round(180/Math.PI*r)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,r,r,this.anticlockwise),this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,r+Math.PI,r+Math.PI,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke()}},t.prototype.endCallBack=function(t){if(this.eventFlag&&1===this.eventCount){this.eventFlag=!1,this.eventCount=0;var i=0,e=0;if(this.isMobild){var s=t;i=s.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=s.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,e=n.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var h=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(h[0]).x,this.y=this.canvasData.getData(h[0]).y,this.r=this.canvasData.getData(h[0]).r;var o=Math.atan2(e-this.y,i-this.x);o=o>=0?o:2*Math.PI+o,this.angle=Math.round(180/Math.PI*o)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.angle,this.angle,this.anticlockwise),this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.angle+Math.PI,this.angle+Math.PI,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.canvasData.getData(this.canvasChoosed.getIndex()[0]).fanAndRadius.push(this.data()),this.buttonListen.recoverButtonFlag(),this.canvasChoosed.recoverIndex()}},t.prototype.data=function(){return{flag:this.flag,isChoosed:this.isChoosed,x:this.x,y:this.y,r:this.r,angle:this.angle,anticlockwise:this.anticlockwise}},t}();i.Diameter=s},"./enum/enum-configlib.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),function(t){t.canvasID="myCanvas",t.colorBlackID="colorBlack",t.colorRedID="colorRed",t.colorBlueID="colorBlue",t.colorGreenID="colorGreen",t.colorYellowID="colorYellow",t.colorPurpleID="colorPurple",t.btnLetFlagID="flag",t.btnRubberID="rubber",t.btnRuleID="rule",t.btnProtractorID="protractor",t.btnCancleID="cancle",t.btnRotateID="rotate",t.btnPointID="point",t.btnSegmentID="segment",t.btnCircularID="circular",t.btnFanID="fan",t.btnRadiusID="radius",t.btnDiameterID="diameter",t.btnChordID="chord",t.btnTangentID="tangent",t.btnTextValueID="value",t.btnInputFlagID="inputFlag",t[t.propWitdh=3]="propWitdh",t.propNSStyle="rgba(128, 100, 162, 0.7)",t.propDSStyle="rgb(1, 1, 1)",t[t.propPointR=5]="propPointR",t.propNFStyle="rgba(128, 100, 162, 0.7)",t.propDFStyle="rgb(1, 1, 1)",t.propFont="bold 22px Arial",t.propTextAlign="center",t.propisChoosed="blue",t[t.unitProp=40]="unitProp",t[t.adsorption=20]="adsorption",t[t.adsorpChoosed=20]="adsorpChoosed",t[t.mouseOffset=-30]="mouseOffset"}(i.Attribute||(i.Attribute={})),function(t){t.default="default",t.flag="flag",t.rule="rule",t.protractor="protractor",t.rotate="rotate"}(i.Auxiliary||(i.Auxiliary={})),function(t){t.default="rgba(0, 0, 0, 0)",t.black="rgba(0, 0, 0, 0.7)",t.red="rgba(255, 0, 0, 0.7)",t.blue="rgba(30, 144, 255, 0.7)",t.green="rgba(50, 205, 50, 0.7)",t.yellow="rgba(255, 255, 0, 0.7)",t.purple="rgba(128, 0, 128, 0.7)"}(i.Color||(i.Color={})),function(t){t.default="default",t.point="point",t.segment="segment",t.circular="circular",t.fan="fan",t.radius="radius",t.diameter="diameter",t.chord="chord",t.tangent="tangent",t.letterFlag="letterFlag"}(i.ToolsName||(i.ToolsName={}))},"./fan.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./enum/enum-configlib.ts"),s=function(){function t(t,i,e,s,n,h,o,r){this.flag=a.ToolsName.fan,this.isMobild=t,this.myCanvas=i,this.myCanvasNode=e,this.eventFlag=!1,this.eventCount=0,this.anticlockwise=!1,this.canvasData=h,this.rePaint=s,this.buttonListen=n,this.isChoosed=!1,this.canvasChoosed=o,this.fillStyle=a.Color.default,this.intersect=r}return t.prototype.startCallBack=function(t){if(this.eventFlag||0!==this.eventCount){if(!this.eventFlag&&2===this.eventCount){this.eventFlag=!0,this.eventCount=3;o=0,r=0;if(this.isMobild){var i=t;o=i.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,r=i.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var e=t;o=e.clientX-this.myCanvasNode.getBoundingClientRect().left,r=e.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();v=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(v[0]).x,this.y=this.canvasData.getData(v[0]).y,this.r=this.canvasData.getData(v[0]).r,c=(c=Math.atan2(r-this.y,o-this.x))>=0?c:2*Math.PI+c,c=Math.round(180/Math.PI*c)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.startAngle,this.startAngle,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,c,c,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.arc(this.x,this.y,30,this.startAngle,c,!1),this.myCanvas.stroke();var s=0,n=0,h=0;this.startAngle<=c?(s=180/Math.PI*(c-this.startAngle),n=40*Math.cos((this.startAngle+c)/2)+this.x,h=40*Math.sin((this.startAngle+c)/2)+this.y):(s=180/Math.PI*(2*Math.PI-this.startAngle+c),n=40*Math.cos((this.startAngle+c)/2-Math.PI)+this.x,h=40*Math.sin((this.startAngle+c)/2-Math.PI)+this.y),s=Math.round(s),this.myCanvas.beginPath(),this.myCanvas.font="bold 22px Arial",this.myCanvas.textAlign="center",this.myCanvas.fillStyle="black",this.myCanvas.fillText(s+"°",n+22,h+22)}}else{this.hasChord={flag:a.ToolsName.chord,isChoosed:!1,x:0,y:0,endX:0,endY:0,isShow:!1},this.eventFlag=!0,this.eventCount=1;var o=0,r=0;if(this.isMobild){var l=t;o=l.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,r=l.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var y=t;o=y.clientX-this.myCanvasNode.getBoundingClientRect().left,r=y.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var c,v=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(v[0]).x,this.y=this.canvasData.getData(v[0]).y,this.r=this.canvasData.getData(v[0]).r,c=(c=Math.atan2(r-this.y,o-this.x))>=0?c:2*Math.PI+c;var u=Math.round(180/Math.PI*c)*(Math.PI/180);this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,u,u,this.anticlockwise),this.myCanvas.stroke(),this.myCanvas.closePath()}},t.prototype.moveCallBack=function(t){if(this.eventFlag||0!==this.eventCount)if(this.eventFlag&&1===this.eventCount){o=0,r=0;if(this.isMobild){var i=t;o=i.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,r=i.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var e=t;o=e.clientX-this.myCanvasNode.getBoundingClientRect().left,r=e.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();c=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(c[0]).x,this.y=this.canvasData.getData(c[0]).y,this.r=this.canvasData.getData(c[0]).r,g=(g=Math.atan2(r-this.y,o-this.x))>=0?g:2*Math.PI+g;var s=Math.round(180/Math.PI*g)*(Math.PI/180);this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,s,s,this.anticlockwise),this.myCanvas.stroke(),this.myCanvas.closePath()}else if(this.eventFlag||2!==this.eventCount){if(this.eventFlag&&3===this.eventCount){o=0,r=0;if(this.isMobild){var n=t;o=n.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,r=n.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var h=t;o=h.clientX-this.myCanvasNode.getBoundingClientRect().left,r=h.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();c=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(c[0]).x,this.y=this.canvasData.getData(c[0]).y,this.r=this.canvasData.getData(c[0]).r,g=(g=Math.atan2(r-this.y,o-this.x))>=0?g:2*Math.PI+g,g=Math.round(180/Math.PI*g)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.startAngle,this.startAngle,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,g,g,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.arc(this.x,this.y,30,this.startAngle,g,!1),this.myCanvas.stroke();v=0,u=40,d=0,C=0;this.startAngle<=g?(v=180/Math.PI*(g-this.startAngle),d=u*Math.cos((this.startAngle+g)/2)+this.x,C=u*Math.sin((this.startAngle+g)/2)+this.y):(v=180/Math.PI*(2*Math.PI-this.startAngle+g),d=u*Math.cos((this.startAngle+g)/2-Math.PI)+this.x,C=u*Math.sin((this.startAngle+g)/2-Math.PI)+this.y),v=Math.round(v),this.myCanvas.beginPath(),this.myCanvas.font="bold 22px Arial",this.myCanvas.textAlign="center",this.myCanvas.fillStyle="black",this.myCanvas.fillText(v+"°",d+22,C+22)}}else{var o=0,r=0;if(this.isMobild){var l=t;o=l.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,r=l.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var y=t;o=y.clientX-this.myCanvasNode.getBoundingClientRect().left,r=y.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var c=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(c[0]).x,this.y=this.canvasData.getData(c[0]).y,this.r=this.canvasData.getData(c[0]).r,g=(g=Math.atan2(r-this.y,o-this.x))>=0?g:2*Math.PI+g,g=Math.round(180/Math.PI*g)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.startAngle,this.startAngle,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,g,g,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.arc(this.x,this.y,30,this.startAngle,g,!1),this.myCanvas.stroke();var v=0,u=40,d=0,C=0;this.startAngle<=g?(v=180/Math.PI*(g-this.startAngle),d=u*Math.cos((this.startAngle+g)/2)+this.x,C=u*Math.sin((this.startAngle+g)/2)+this.y):(v=180/Math.PI*(2*Math.PI-this.startAngle+g),d=u*Math.cos((this.startAngle+g)/2-Math.PI)+this.x,C=u*Math.sin((this.startAngle+g)/2-Math.PI)+this.y),v=Math.round(v),this.myCanvas.beginPath(),this.myCanvas.font="bold 22px Arial",this.myCanvas.textAlign="center",this.myCanvas.fillStyle="black",this.myCanvas.fillText(v+"°",d+22,C+22)}else{var o=0,r=0;if(this.isMobild){var m=t;o=m.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,r=m.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var p=t;o=p.clientX-this.myCanvasNode.getBoundingClientRect().left,r=p.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var g,c=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(c[0]).x,this.y=this.canvasData.getData(c[0]).y,this.r=this.canvasData.getData(c[0]).r,g=(g=Math.atan2(r-this.y,o-this.x))>=0?g:2*Math.PI+g,g=Math.round(180/Math.PI*g)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,g,g,this.anticlockwise),this.myCanvas.stroke(),this.myCanvas.closePath()}},t.prototype.endCallBack=function(t){if(this.eventFlag&&1===this.eventCount){this.eventFlag=!1,this.eventCount=2;var i=0,e=0;if(this.isMobild){var s=t;i=s.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=s.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,e=n.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var h=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(h[0]).x,this.y=this.canvasData.getData(h[0]).y,this.r=this.canvasData.getData(h[0]).r,l=(l=Math.atan2(e-this.y,i-this.x))>=0?l:2*Math.PI+l,this.startAngle=Math.round(180/Math.PI*l)*(Math.PI/180),this.hasChord.x=Math.cos(this.startAngle)*this.r+this.x,this.hasChord.y=Math.sin(this.startAngle)*this.r+this.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.startAngle,this.startAngle,this.anticlockwise),this.myCanvas.stroke(),this.myCanvas.closePath()}else if(this.eventFlag&&3===this.eventCount){this.eventFlag=!1,this.eventCount=0;i=0,e=0;if(this.isMobild){var o=t;i=o.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=o.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var r=t;i=r.clientX-this.myCanvasNode.getBoundingClientRect().left,e=r.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var l;h=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(h[0]).x,this.y=this.canvasData.getData(h[0]).y,this.r=this.canvasData.getData(h[0]).r,l=(l=Math.atan2(e-this.y,i-this.x))>=0?l:2*Math.PI+l,this.endAngle=Math.round(180/Math.PI*l)*(Math.PI/180),this.hasChord.endX=Math.cos(this.endAngle)*this.r+this.x,this.hasChord.endY=Math.sin(this.endAngle)*this.r+this.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.startAngle,this.startAngle,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.endAngle,this.endAngle,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.canvasData.getData(this.canvasChoosed.getIndex()[0]).fanAndRadius.push(this.data()),this.buttonListen.recoverButtonFlag(),this.canvasChoosed.recoverIndex()}},t.prototype.data=function(){return{flag:this.flag,isChoosed:this.isChoosed,x:this.x,y:this.y,r:this.r,startAngle:this.startAngle,endAngle:this.endAngle,fillStyle:this.fillStyle,anticlockwise:this.anticlockwise,hasChord:this.hasChord}},t}();i.Fan=s},"./fillColor.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./enum/enum-configlib.ts"),s=function(){function t(t,i,e,a){this.eventClick=t,this.canvasChoosed=i,this.canvasData=e,this.rePaint=a,this.buttonBlack(),this.buttonRed(),this.buttonBlue(),this.buttonGreen(),this.buttonYellow(),this.buttonPurple()}return t.prototype.init=function(t,i){this.auxiliaryListen=t,this.buttonListen=i},t.prototype.colorBtnListen=function(t,i){var e=this;document.getElementById(t).addEventListener(this.eventClick,function(t){if(t=t||window.event,e.auxiliaryListen.getButtonFlag()===a.Auxiliary.default&&e.buttonListen.getButtonFlag()===a.ToolsName.default){var s=e.canvasChoosed.getIndex();if(0!==s.length){if(1===s.length)(n=e.canvasData.getData(s[0])).flag===a.ToolsName.circular&&(n.fillStyle=i),n.isChoosed=!1,e.canvasChoosed.recoverIndex();else if(2===s.length){var n;(n=e.canvasData.getData(s[0]).fanAndRadius[s[1]]).flag===a.ToolsName.fan&&(n.fillStyle=i),n.isChoosed=!1,e.canvasChoosed.recoverIndex()}e.rePaint.clearCanvas(),e.rePaint.rePaint()}}},!1)},t.prototype.buttonBlack=function(){this.colorBtnListen(a.Attribute.colorBlackID,a.Color.black)},t.prototype.buttonRed=function(){this.colorBtnListen(a.Attribute.colorRedID,a.Color.red)},t.prototype.buttonBlue=function(){this.colorBtnListen(a.Attribute.colorBlueID,a.Color.blue)},t.prototype.buttonGreen=function(){this.colorBtnListen(a.Attribute.colorGreenID,a.Color.green)},t.prototype.buttonYellow=function(){this.colorBtnListen(a.Attribute.colorYellowID,a.Color.yellow)},t.prototype.buttonPurple=function(){this.colorBtnListen(a.Attribute.colorPurpleID,a.Color.purple)},t}();i.FillColor=s},"./intersect.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./enum/enum-configlib.ts"),s=function(){function t(t,i,e){this.pointData=[],this.myCanvas=t,this.canvasChoosed=i,this.canvasData=e}return t.prototype.segment=function(t,i){var e=Math.cos(t.angle)*t.r+t.x,a=Math.sin(t.angle)*t.r+t.y,s=Math.cos(i.angle)*i.r+i.x,n=Math.sin(i.angle)*i.r+i.y;return function(t,i){var e,a,s=0,n=0,h=0,o=0;if(t[0].x===t[1].x&&(s=0),i[0].x===i[1].x?n=0:(s=(t[0].y-t[1].y)/(t[0].x-t[1].x),n=(i[0].y-i[1].y)/(i[0].x-i[1].x)),e=t[0].y-s*t[0].x,a=i[0].y-n*i[0].x,s===n)return{flag:!1,x:0,y:0};h=(a-e)/(s-n),o=(e*n-a*s)/(n-s);var r=[t[0].x,t[1].x],l=[i[0].x,i[1].x];return r.sort(function(t,i){return t-i}),l.sort(function(t,i){return t-i}),r[0]<=h&&h<=r[1]&&l[0]<=h&&h<=l[1]?{flag:!0,x:h,y:o}:{flag:!1,x:0,y:0}}([{x:t.x,y:t.y},{x:e,y:a}],[{x:i.x,y:i.y},{x:s,y:n}])},t.prototype.circular=function(t,i){var e=Math.cos(t.angle)*t.r+t.x,a=Math.sin(t.angle)*t.r+t.y;return function(t,i){var e,a,s,n,h=0,o=0,r=[{x:0,y:0},{x:0,y:0}];if(t[0].x===t[1].x){if(h=0,(n=(a=-2*i.y)*a-4*(e=1)*(s=Math.pow(t[0].x,2)-2*i.x*t[0].x+Math.pow(i.x,2)+Math.pow(i.y,2)-Math.pow(i.r,2)))<0)return{flag:!1,point:[]};if(0===n)return r[0].x=t[0].x,r[0].y=i.y,(y=[t[0].x,t[1].x]).sort(function(t,i){return t-i}),y[0]<=r[0].x&&r[0].x<=y[1]&&i.x-i.r<=r[0].x&&r[0].x<=i.x+i.r?{flag:!0,point:[{x:r[0].x,y:r[0].y}]}:{flag:!1,point:[]};if(n>0){r[0].x=t[0].x,r[0].y=(2*i.y+Math.sqrt(n))/2,r[1].x=t[0].x,r[1].y=(2*i.y-Math.sqrt(n))/2,(y=[t[0].x,t[1].x]).sort(function(t,i){return t-i});var l={flag:!1,point:Array()};return y[0]<=r[0].x&&r[0].x<=y[1]&&i.x-i.r<=r[0].x&&r[0].x<=i.x+i.r&&(l.flag=!0,l.point.push(r[0])),y[0]<=r[1].x&&r[1].x<=y[1]&&i.x-i.r<=r[1].x&&r[1].x<=i.x+i.r?(l.flag=!0,l.point.push(r[1])):l.flag=!1,l}}else t[0].y===t[1].y?(h=0,o=t[0].y,e=1,a=-2*i.x,s=Math.pow(t[0].y,2)-2*i.y*o+Math.pow(i.x,2)+Math.pow(i.y,2)-Math.pow(i.r,2)):(e=1+(h=(t[0].y-t[1].y)/(t[0].x-t[1].x))*h,a=2*(h*(o=t[0].y-h*t[0].x)-i.x-i.y*h),s=o*o-2*i.y*o+i.x*i.x+i.y*i.y-i.r*i.r);if((n=a*a-4*e*s)<0)return{flag:!1,point:[]};if(0===n)return r[0].x=-(2*h*o-2*i.x-2*i.y*h)/(2*(1+h*h)),r[0].y=h*r[0].x+o,(y=[t[0].x,t[1].x]).sort(function(t,i){return t-i}),y[0]<=r[0].x&&r[0].x<=y[1]&&i.x-i.r<=r[0].x&&r[0].x<=i.x+i.r?{flag:!0,point:[{x:r[0].x,y:r[0].y}]}:{flag:!1,point:[]};if(n>0){var y;r[0].x=(-a+Math.sqrt(n))/(2*e),r[0].y=h*r[0].x+o,r[1].x=(-a-Math.sqrt(n))/(2*e),r[1].y=h*r[1].x+o,(y=[t[0].x,t[1].x]).sort(function(t,i){return t-i});l={flag:!1,point:Array()};return y[0]<=r[0].x&&r[0].x<=y[1]&&i.x-i.r<=r[0].x&&r[0].x<=i.x+i.r&&(l.flag=!0,l.point.push(r[0])),y[0]<=r[1].x&&r[1].x<=y[1]&&i.x-i.r<=r[1].x&&r[1].x<=i.x+i.r&&(l.flag=!0,l.point.push(r[1])),l}}([{x:t.x,y:t.y},{x:e,y:a}],{x:i.x,y:i.y,r:i.r})},t.prototype.pointEach=function(t,i){var e,s;if(t.flag===a.ToolsName.segment)for(var n=0,h=i.getData();n<h.length;n++){if((v=h[n]).flag===a.ToolsName.segment)(e=this.segment(t,v)).flag&&this.saveData({x:e.x,y:e.y});else if(v.flag===a.ToolsName.circular&&(s=this.circular(t,v)).flag)for(var o=0,r=s.point;o<r.length;o++){var l=r[o];this.saveData({x:l.x,y:l.y})}}else if(t.flag===a.ToolsName.circular)for(var y=0,c=i.getData();y<c.length;y++){var v;if((v=c[y]).flag===a.ToolsName.segment&&(s=this.circular(v,t)).flag)for(var u=0,d=s.point;u<d.length;u++){l=d[u];this.saveData({x:l.x,y:l.y})}}},t.prototype.pointNoSelEach=function(){this.pointData=[];for(var t=this.canvasChoosed.getIndex(),i=this.canvasData.getData(),e=0;e<i.length;e++)if(!(i[e].flag!==a.ToolsName.segment&&i[e].flag!==a.ToolsName.circular||1===t.length&&t[0]===e))for(var s=e+1;s<i.length;s++)if(!(i[s].flag!==a.ToolsName.segment&&i[s].flag!==a.ToolsName.circular||1===t.length&&t[0]===s)){if(i[e].flag===a.ToolsName.segment)if(i[s].flag===a.ToolsName.segment)(n=this.segment(i[e],i[s])).flag&&this.saveData({x:n.x,y:n.y});else if(i[s].flag===a.ToolsName.circular){var n;if((n=this.circular(i[e],i[s])).flag)for(var h=0,o=n.point;h<o.length;h++){var r=o[h];this.saveData(r)}}if(i[e].flag===a.ToolsName.circular)if(i[s].flag===a.ToolsName.segment)if((n=this.circular(i[s],i[e])).flag)for(var l=0,y=n.point;l<y.length;l++){r=y[l];this.saveData(r)}}},t.prototype.repaintPoint=function(){this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propDFStyle;for(var t=0,i=this.getData();t<i.length;t++){var e=i[t];this.myCanvas.moveTo(e.x,e.y),this.myCanvas.arc(e.x,e.y,a.Attribute.propPointR,0,2*Math.PI,!1)}this.myCanvas.fill()},t.prototype.getData=function(){return this.pointData},t.prototype.delData=function(){},t.prototype.saveData=function(t){this.pointData.push(t)},t}();i.Intersect=s},"./letterFlag.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./enum/enum-configlib.ts"),s=function(){function t(t,i,e,s,n){this.flag=a.ToolsName.letterFlag,this.isChoosed=!1,this.eventFlag=!1,this.eventCount=0,this.isMobild=t,this.myCanvas=i,this.myCanvasNode=e,this.AuxiliaryListen=s,this.canvasData=n,this.inputListen(),this.focusListen(),this.blurListen()}return t.prototype.startCallback=function(t){if(!this.eventFlag&&0===this.eventCount){if(this.eventFlag=!0,this.eventCount=1,this.isMobild){var i=t;this.x=i.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=i.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var e=t;this.x=e.clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=e.clientY-this.myCanvasNode.getBoundingClientRect().top}this.text="";var s=document.getElementById(a.Attribute.btnInputFlagID);s.value="",s.className="show",s.style.left=this.x+"px",s.style.top=this.y+70+"px",this.endCallback(t)}},t.prototype.moveCallback=function(t){this.eventFlag&&this.eventCount},t.prototype.endCallback=function(t){this.eventFlag&&1===this.eventCount&&(this.eventFlag=!1,this.eventCount=0,this.AuxiliaryListen.recoverButtonFlag(),setTimeout(function(){document.getElementById(a.Attribute.btnInputFlagID).focus()},100))},t.prototype.inputListen=function(){document.getElementById(a.Attribute.btnInputFlagID).addEventListener("input",function(t){var i=document.getElementById(t.srcElement.id);i.value=i.value.replace(/[^a-z]/gi,""),i.value.length>1&&(i.value=i.value.slice(0,1))},!1)},t.prototype.focusListen=function(){document.getElementById(a.Attribute.btnInputFlagID).addEventListener("focus",function(t){document.getElementById(t.srcElement.id).value=""},!1)},t.prototype.blurListen=function(){var t=this;document.getElementById(a.Attribute.btnInputFlagID).addEventListener("blur",function(i){var e=document.getElementById(i.srcElement.id);0===e.value.length&&(e.value="A"),t.text=e.value,e.className="hidden",t.canvasData.setData(t.data()),t.myCanvas.beginPath(),t.myCanvas.font=a.Attribute.propFont,t.myCanvas.fillStyle=a.Attribute.propDFStyle,t.myCanvas.fillText(t.text,t.x,t.y)},!1)},t.prototype.data=function(){return{flag:this.flag,isChoosed:this.isChoosed,x:this.x,y:this.y,text:this.text}},t}();i.LetterFlag=s},"./main.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./myCanvas.ts");!function(){var t=new a.MyCanvas;t.startListen(),t.moveListen(),t.endListen(),t.clickListen()}()},"./moveGraph.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./enum/enum-configlib.ts"),s=e("./adsorption.ts"),n=function(){function t(t,i,e,a,n,h){this.myCanvasNode=t,this.isMobild=i,this.rePaint=e,this.canvasChoosed=a,this.canvasData=n,this.startFlag=!1,this.moveFlag=!1,this.x=0,this.y=0,this.intersect=h,this.adsorption=new s.Adsorption(this.canvasData,this.intersect)}return t.prototype.start=function(t){if(this.startFlag=!0,this.moveFlag=!1,this.isMobild){var i=t;this.x=i.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=i.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var e=t;this.x=e.clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=e.clientY-this.myCanvasNode.getBoundingClientRect().top}},t.prototype.end=function(t){if(this.moveFlag){this.startFlag=!1,this.moveFlag=!1;var i=this.canvasChoosed.getIndex();return 1===i.length?this.canvasData.getData(i[0]).isChoosed=!1:2===i.length&&(this.canvasData.getData(i[0]).fanAndRadius[i[1]].isChoosed=!1),this.canvasChoosed.recoverIndex(),this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint(),!0}return this.startFlag=!1,this.moveFlag=!1,!1},t.prototype.movePoint=function(t){if(this.startFlag){this.moveFlag=!0;var i=0,e=0;if(this.isMobild){var a=t;i=a.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=a.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var s=t;i=s.clientX-this.myCanvasNode.getBoundingClientRect().left,e=s.clientY-this.myCanvasNode.getBoundingClientRect().top}var n=this.canvasChoosed.getIndex(),h=this.canvasData.getData(n[0]);h.x+=i-this.x,h.y+=e-this.y;var o=this.adsorption.adsorpToXY(h.x,h.y,n);h.x=o.x,h.y=o.y,this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint(),this.x=i,this.y=e}},t.prototype.moveSegment=function(t){if(this.startFlag){this.moveFlag=!0;var i=0,e=0;if(this.isMobild){var a=t;i=a.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=a.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var s=t;i=s.clientX-this.myCanvasNode.getBoundingClientRect().left,e=s.clientY-this.myCanvasNode.getBoundingClientRect().top}var n=this.canvasChoosed.getIndex(),h=this.canvasData.getData(n[0]);h.x+=i-this.x,h.y+=e-this.y;var o=this.adsorption.adsorpToXY(h.x,h.y,n);h.x=o.x,h.y=o.y,this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint(),this.x=i,this.y=e}},t.prototype.moveCircular=function(t){if(this.startFlag){this.moveFlag=!0;var i=0,e=0;if(this.isMobild){var s=t;i=s.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=s.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,e=n.clientY-this.myCanvasNode.getBoundingClientRect().top}var h=this.canvasChoosed.getIndex(),o=this.canvasData.getData(h[0]);o.x+=i-this.x,o.y+=e-this.y;var r=this.adsorption.adsorpToXY(o.x,o.y,h);o.x=r.x,o.y=r.y;for(var l=0,y=o.fanAndRadius;l<y.length;l++){var c=y[l];if(c.x=o.x,c.y=o.y,c.flag===a.ToolsName.fan){var v=c;v.hasChord.x=Math.cos(v.startAngle)*v.r+v.x,v.hasChord.y=Math.sin(v.startAngle)*v.r+v.y,v.hasChord.endX=Math.cos(v.endAngle)*v.r+v.x,v.hasChord.endY=Math.sin(v.endAngle)*v.r+v.y}}this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint(),this.x=i,this.y=e}},t.prototype.moveLetterFlag=function(t){if(this.startFlag){this.moveFlag=!0;var i=0,e=0;if(this.isMobild){var a=t;i=a.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=a.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var s=t;i=s.clientX-this.myCanvasNode.getBoundingClientRect().left,e=s.clientY-this.myCanvasNode.getBoundingClientRect().top}var n=this.canvasChoosed.getIndex(),h=this.canvasData.getData(n[0]);h.x+=i-this.x,h.y+=e-this.y,this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint(),this.x=i,this.y=e}},t}();i.MoveGraph=n},"./myCanvas.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./enum/enum-configlib.ts"),s=e("./point.ts"),n=e("./canvasData.ts"),h=e("./rePaint.ts"),o=e("./buttonListen.ts"),r=e("./segment.ts"),l=e("./circular.ts"),y=e("./canvasChoosed.ts"),c=e("./fan.ts"),v=e("./radius.ts"),u=e("./textBox.ts"),d=e("./fillColor.ts"),C=e("./auxiliaryListen.ts"),m=e("./rule.ts"),p=e("./protractor.ts"),g=e("./rotate.ts"),f=e("./letterFlag.ts"),x=e("./moveGraph.ts"),b=e("./intersect.ts"),P=e("./diameter.ts"),M=function(){function t(){this.eventClick=this.isMobile()?"tap":"click",this.eventStart=this.isMobile()?"touchstart":"mousedown",this.eventMove=this.isMobile()?"touchmove":"mousemove",this.eventEnd=this.isMobile()?"touchend":"mouseup",this.myCanvasNode=document.getElementById(a.Attribute.canvasID),this.myCanvas=this.myCanvasNode.getContext("2d"),this.myCanvas.fillStyle="white",this.myCanvas.fillRect(0,0,this.myCanvasNode.clientWidth,this.myCanvasNode.clientHeight),this.canvasData=new n.CanvasData,this.rePaint=new h.RePaint(this.myCanvas,this.myCanvasNode,this.canvasData.getData()),this.cvsClick=!1,this.canvasChoosed=new y.CanvasChoosed(this.isMobile(),this.canvasData,this.myCanvasNode),this.intersect=new b.Intersect(this.myCanvas,this.canvasChoosed,this.canvasData),this.buttonListen=new o.ButtonListen(this.eventClick,this.rePaint,this.canvasData,this.canvasChoosed,this.intersect),this.textBox=new u.TextBox(this.canvasChoosed,this.canvasData,this.rePaint,this.intersect),this.fillColor=new d.FillColor(this.eventClick,this.canvasChoosed,this.canvasData,this.rePaint),this.auxiliaryListen=new C.AuxiliaryListen(this.eventClick,this.canvasChoosed,this.canvasData,this.rePaint,this.intersect),this.moveGraph=new x.MoveGraph(this.myCanvasNode,this.isMobile(),this.rePaint,this.canvasChoosed,this.canvasData,this.intersect),this.newTools(),this.auxiTools(),this.buttonListen.init(this.auxiliaryListen,this.textBox),this.auxiliaryListen.init(this.buttonListen,this.textBox),this.textBox.init(this.auxiliaryListen,this.buttonListen),this.fillColor.init(this.auxiliaryListen,this.buttonListen)}return t.prototype.isMobile=function(){var t=navigator.userAgent.toLowerCase(),i=/ipad/i.test(t),e=/iphone os/i.test(t),a=/midp/i.test(t),s=/rv:1.2.3.4/i.test(t),n=/ucweb/i.test(t),h=/android/i.test(t),o=/windows ce/i.test(t),r=/windows mobile/i.test(t);return!!(i||e||a||s||n||h||o||r)},t.prototype.newTools=function(){this.point=new s.Point(this.isMobile(),this.myCanvas,this.myCanvasNode,this.rePaint,this.canvasData,this.buttonListen,this.intersect),this.segment=new r.Segment(this.isMobile(),this.myCanvas,this.myCanvasNode,this.rePaint,this.buttonListen,this.canvasData,this.intersect),this.circular=new l.Circular(this.isMobile(),this.myCanvas,this.myCanvasNode,this.rePaint,this.buttonListen,this.canvasData,this.intersect),this.fan=new c.Fan(this.isMobile(),this.myCanvas,this.myCanvasNode,this.rePaint,this.buttonListen,this.canvasData,this.canvasChoosed,this.intersect),this.radius=new v.Radius(this.isMobile(),this.myCanvas,this.myCanvasNode,this.rePaint,this.buttonListen,this.canvasData,this.canvasChoosed,this.intersect),this.diameter=new P.Diameter(this.isMobile(),this.myCanvas,this.myCanvasNode,this.rePaint,this.buttonListen,this.canvasData,this.canvasChoosed,this.intersect)},t.prototype.auxiTools=function(){this.rule=new m.Rule(this.isMobile(),this.myCanvas,this.myCanvasNode,this.rePaint,this.auxiliaryListen,this.canvasData,this.intersect),this.protractor=new p.Protractor(this.isMobile(),this.myCanvas,this.myCanvasNode,this.rePaint,this.auxiliaryListen,this.canvasData,this.intersect),this.rotate=new g.Rotate(this.isMobile(),this.myCanvas,this.myCanvasNode,this.rePaint,this.auxiliaryListen,this.canvasData,this.canvasChoosed,this.intersect),this.letterFlag=new f.LetterFlag(this.isMobile(),this.myCanvas,this.myCanvasNode,this.auxiliaryListen,this.canvasData)},t.prototype.startListen=function(){var t=this;this.myCanvasNode.addEventListener(this.eventStart,function(i){switch(i=i||window.event,t.cvsClick=!1,t.buttonListen.getButtonFlag()){case a.ToolsName.point:return void t.point.startCallBack(i);case a.ToolsName.segment:return void t.segment.startCallBack(i);case a.ToolsName.fan:return void t.fan.startCallBack(i);case a.ToolsName.circular:return void t.circular.startCallBack(i);case a.ToolsName.radius:return void t.radius.startCallBack(i);case a.ToolsName.diameter:return void t.diameter.startCallBack(i);case a.ToolsName.tangent:return;case a.ToolsName.default:t.cvsClick=!0;break;default:return}switch(t.cvsClick=!1,t.auxiliaryListen.getButtonFlag()){case a.Auxiliary.rule:return void t.rule.startCallback(i);case a.Auxiliary.flag:return void t.letterFlag.startCallback(i);case a.Auxiliary.protractor:return void t.protractor.startCallback(i);case a.Auxiliary.rotate:return void t.rotate.startCallback(i);case a.Auxiliary.default:t.cvsClick=!0;break;default:return}t.moveGraph.start(i)},!1)},t.prototype.moveListen=function(){var t=this;this.myCanvasNode.addEventListener(this.eventMove,function(i){switch(i=i||window.event,t.buttonListen.getButtonFlag()){case a.ToolsName.point:t.point.moveCallBack(i);break;case a.ToolsName.segment:t.segment.moveCallBack(i);break;case a.ToolsName.fan:t.fan.moveCallBack(i);break;case a.ToolsName.circular:t.circular.moveCallBack(i);break;case a.ToolsName.radius:t.radius.moveCallBack(i);break;case a.ToolsName.diameter:t.diameter.moveCallBack(i);break;case a.ToolsName.tangent:case a.ToolsName.default:break;default:return}switch(t.auxiliaryListen.getButtonFlag()){case a.Auxiliary.rule:t.rule.moveCallback(i);break;case a.Auxiliary.flag:return void t.letterFlag.moveCallback(i);case a.Auxiliary.protractor:t.protractor.moveCallback(i);break;case a.Auxiliary.rotate:t.rotate.moveCallback(i);break;case a.Auxiliary.default:break;default:return}var e=t.canvasChoosed.getIndex();if(1===e.length)switch(t.canvasData.getData(e[0]).flag){case a.ToolsName.point:return void t.moveGraph.movePoint(i);case a.ToolsName.segment:return void t.moveGraph.moveSegment(i);case a.ToolsName.circular:return void t.moveGraph.moveCircular(i);case a.ToolsName.letterFlag:return void t.moveGraph.moveLetterFlag(i);case a.ToolsName.default:break;default:return}},!1)},t.prototype.endListen=function(){var t=this;this.myCanvasNode.addEventListener(this.eventEnd,function(i){switch(i=i||window.event,t.buttonListen.getButtonFlag()){case a.ToolsName.point:return void t.point.endCallBack(i);case a.ToolsName.segment:return void t.segment.endCallBack(i);case a.ToolsName.fan:return void t.fan.endCallBack(i);case a.ToolsName.circular:return void t.circular.endCallBack(i);case a.ToolsName.radius:return void t.radius.endCallBack(i);case a.ToolsName.diameter:return void t.diameter.endCallBack(i);case a.ToolsName.tangent:return;case a.ToolsName.default:break;default:return}switch(t.auxiliaryListen.getButtonFlag()){case a.Auxiliary.rule:return void t.rule.endCallback(i);case a.Auxiliary.flag:return void t.letterFlag.endCallback(i);case a.Auxiliary.protractor:return void t.protractor.endCallback(i);case a.Auxiliary.rotate:return void t.rotate.endCallback(i);case a.Auxiliary.default:break;default:return}t.moveGraph.end(i)&&(t.cvsClick=!1)},!1)},t.prototype.clickListen=function(){var t=this;this.myCanvasNode.addEventListener(this.eventClick,function(i){i=i||window.event,t.cvsClick&&(t.cvsClick=!1,t.canvasChoosed.canvasClick(i),t.rePaint.clearCanvas(),t.rePaint.rePaint(),t.intersect.repaintPoint())},!1)},t}();i.MyCanvas=M},"./point.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./enum/enum-configlib.ts"),s=e("./adsorption.ts"),n=function(){function t(t,i,e,n,h,o,r){this.flag=a.ToolsName.point,this.isMobild=t,this.myCanvas=i,this.myCanvasNode=e,this.eventFlag=!1,this.canvasData=h,this.rePaint=n,this.buttonListen=o,this.isChoosed=!1,this.intersect=r,this.adsorption=new s.Adsorption(this.canvasData,this.intersect)}return t.prototype.startCallBack=function(t){this.eventFlag=!0;var i=0,e=0;if(this.isMobild){var s=t;i=s.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=s.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,e=n.clientY-this.myCanvasNode.getBoundingClientRect().top}i+=a.Attribute.mouseOffset;var h=this.adsorption.adsorpToXY(i,e);i=h.x,e=h.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propNFStyle,this.myCanvas.arc(i,e,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()},t.prototype.moveCallBack=function(t){if(this.eventFlag){var i=0,e=0;if(this.isMobild){var s=t;i=s.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=s.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,e=n.clientY-this.myCanvasNode.getBoundingClientRect().top}i+=a.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint();var h=this.adsorption.adsorpToXY(i,e);i=h.x,e=h.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propNFStyle,this.myCanvas.arc(i,e,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()}},t.prototype.endCallBack=function(t){if(this.eventFlag){if(this.isMobild){var i=t;this.x=i.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=i.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var e=t;this.x=e.clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=e.clientY-this.myCanvasNode.getBoundingClientRect().top}this.x+=a.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint();var s=this.adsorption.adsorpToXY(this.x,this.y);this.x=s.x,this.y=s.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.canvasData.setData(this.data()),this.buttonListen.recoverButtonFlag(),this.eventFlag=!1}},t.prototype.data=function(){return{flag:this.flag,isChoosed:this.isChoosed,x:this.x,y:this.y}},t}();i.Point=n},"./protractor.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./enum/enum-configlib.ts"),s=e("./adsorption.ts"),n=function(){function t(t,i,e,a,n,h,o){this.isMobild=t,this.myCanvas=i,this.myCanvasNode=e,this.rePaint=a,this.eventFlag=!1,this.eventCount=0,this.AuxiliaryListen=n,this.canvasData=h,this.intersect=o,this.adsorption=new s.Adsorption(this.canvasData,this.intersect)}return t.prototype.startCallback=function(t){if(this.eventFlag||0!==this.eventCount)if(this.eventFlag||2!==this.eventCount){if(!this.eventFlag&&3===this.eventCount){this.eventFlag=!0,this.eventCount=4;r=0,l=0;if(this.isMobild){var i=t;r=i.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,l=i.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var e=t;r=e.clientX-this.myCanvasNode.getBoundingClientRect().left,l=e.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),r=(d=this.adsorption.adsorpToXY(r,l)).x,l=d.y,v=(v=Math.atan2(l-this.y,r-this.x))>=0?v:2*Math.PI+v;var s=Math.round(180/Math.PI*v)*(Math.PI/180);this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.startAngle,this.startAngle,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,s,s,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.arc(this.x,this.y,30,this.startAngle,s,!1),this.myCanvas.stroke();var n=0,h=0,o=0;this.startAngle<=s?(n=180/Math.PI*(s-this.startAngle),h=40*Math.cos((this.startAngle+s)/2)+this.x,o=40*Math.sin((this.startAngle+s)/2)+this.y):(n=180/Math.PI*(2*Math.PI-this.startAngle+s),h=40*Math.cos((this.startAngle+s)/2-Math.PI)+this.x,o=40*Math.sin((this.startAngle+s)/2-Math.PI)+this.y),n=Math.round(n),this.myCanvas.beginPath(),this.myCanvas.font=a.Attribute.propFont,this.myCanvas.textAlign=a.Attribute.propTextAlign,this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.fillText(n+"°",h+22,o+22)}}else{this.eventFlag=!0,this.eventCount=3;var r=0,l=0;if(this.isMobild){var y=t;r=y.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,l=y.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var c=t;r=c.clientX-this.myCanvasNode.getBoundingClientRect().left,l=c.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),r=(d=this.adsorption.adsorpToXY(r,l)).x,l=d.y;var v,u=Math.sqrt(Math.pow(l-this.y,2)+Math.pow(r-this.x,2));v=(v=Math.atan2(l-this.y,r-this.x))>=0?v:2*Math.PI+v,v=Math.round(180/Math.PI*v)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,u,v,v,!1),this.myCanvas.stroke()}else{this.eventFlag=!0,this.eventCount=1;var d,r=0,l=0;if(this.isMobild){var C=t;r=C.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,l=C.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var m=t;r=m.clientX-this.myCanvasNode.getBoundingClientRect().left,l=m.clientY-this.myCanvasNode.getBoundingClientRect().top}r=(d=this.adsorption.adsorpToXY(r,l)).x,l=d.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.arc(r,l,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fillStyle=a.Attribute.propNFStyle,this.myCanvas.fill()}},t.prototype.moveCallback=function(t){if(this.eventFlag&&1===this.eventCount){var i=0,e=0;if(this.isMobild){var s=t;i=s.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=s.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,e=n.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(p=this.adsorption.adsorpToXY(i,e)).x,e=p.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.arc(i,e,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fillStyle=a.Attribute.propNFStyle,this.myCanvas.fill()}else if(this.eventFlag||2!==this.eventCount)if(this.eventFlag&&3===this.eventCount){i=0,e=0;if(this.isMobild){var h=t;i=h.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=h.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var o=t;i=o.clientX-this.myCanvasNode.getBoundingClientRect().left,e=o.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(p=this.adsorption.adsorpToXY(i,e)).x,e=p.y;b=Math.sqrt(Math.pow(e-this.y,2)+Math.pow(i-this.x,2));x=(x=Math.atan2(e-this.y,i-this.x))>=0?x:2*Math.PI+x,x=Math.round(180/Math.PI*x)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,b,x,x,!1),this.myCanvas.stroke()}else if(this.eventFlag||3!==this.eventCount){if(this.eventFlag&&4===this.eventCount){i=0,e=0;if(this.isMobild){var r=t;i=r.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=r.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var l=t;i=l.clientX-this.myCanvasNode.getBoundingClientRect().left,e=l.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(p=this.adsorption.adsorpToXY(i,e)).x,e=p.y,x=(x=Math.atan2(e-this.y,i-this.x))>=0?x:2*Math.PI+x;v=Math.round(180/Math.PI*x)*(Math.PI/180);this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.startAngle,this.startAngle,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,v,v,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.arc(this.x,this.y,30,this.startAngle,v,!1),this.myCanvas.stroke();u=0,d=40,C=0,m=0;this.startAngle<=v?(u=180/Math.PI*(v-this.startAngle),C=d*Math.cos((this.startAngle+v)/2)+this.x,m=d*Math.sin((this.startAngle+v)/2)+this.y):(u=180/Math.PI*(2*Math.PI-this.startAngle+v),C=d*Math.cos((this.startAngle+v)/2-Math.PI)+this.x,m=d*Math.sin((this.startAngle+v)/2-Math.PI)+this.y),u=Math.round(u),this.myCanvas.beginPath(),this.myCanvas.font=a.Attribute.propFont,this.myCanvas.textAlign=a.Attribute.propTextAlign,this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.fillText(u+"°",C+22,m+22)}}else{i=0,e=0;if(this.isMobild){var y=t;i=y.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=y.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var c=t;i=c.clientX-this.myCanvasNode.getBoundingClientRect().left,e=c.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(p=this.adsorption.adsorpToXY(i,e)).x,e=p.y,x=(x=Math.atan2(e-this.y,i-this.x))>=0?x:2*Math.PI+x;var v=Math.round(180/Math.PI*x)*(Math.PI/180);this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.startAngle,this.startAngle,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,v,v,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.arc(this.x,this.y,30,this.startAngle,v,!1),this.myCanvas.stroke();var u=0,d=40,C=0,m=0;this.startAngle<=v?(u=180/Math.PI*(v-this.startAngle),C=d*Math.cos((this.startAngle+v)/2)+this.x,m=d*Math.sin((this.startAngle+v)/2)+this.y):(u=180/Math.PI*(2*Math.PI-this.startAngle+v),C=d*Math.cos((this.startAngle+v)/2-Math.PI)+this.x,m=d*Math.sin((this.startAngle+v)/2-Math.PI)+this.y),u=Math.round(u),this.myCanvas.beginPath(),this.myCanvas.font=a.Attribute.propFont,this.myCanvas.textAlign=a.Attribute.propTextAlign,this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.fillText(u+"°",C+22,m+22)}else{var p,i=0,e=0;if(this.isMobild){var g=t;i=g.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=g.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var f=t;i=f.clientX-this.myCanvasNode.getBoundingClientRect().left,e=f.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(p=this.adsorption.adsorpToXY(i,e)).x,e=p.y;var x,b=Math.sqrt(Math.pow(e-this.y,2)+Math.pow(i-this.x,2));x=(x=Math.atan2(e-this.y,i-this.x))>=0?x:2*Math.PI+x,x=Math.round(180/Math.PI*x)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,b,x,x,!1),this.myCanvas.stroke()}},t.prototype.endCallback=function(t){if(this.eventFlag&&1===this.eventCount){if(this.eventFlag=!1,this.eventCount=2,this.isMobild){var i=t;this.x=i.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=i.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var e=t;this.x=e.clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=e.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var s=this.adsorption.adsorpToXY(this.x,this.y);this.x=s.x,this.y=s.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()}else if(this.eventFlag&&3===this.eventCount){this.eventFlag=!1;var n=0,h=0;if(this.isMobild){var o=t;n=o.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,h=o.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var r=t;n=r.clientX-this.myCanvasNode.getBoundingClientRect().left,h=r.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),n=(s=this.adsorption.adsorpToXY(n,h)).x,h=s.y,this.r=Math.sqrt(Math.pow(h-this.y,2)+Math.pow(n-this.x,2)),l=(l=Math.atan2(h-this.y,n-this.x))>=0?l:2*Math.PI+l,this.startAngle=Math.round(180/Math.PI*l)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.startAngle,this.startAngle,!1),this.myCanvas.stroke()}else if(this.eventFlag&&4===this.eventCount){this.eventFlag=!1,this.eventCount=0;var l;n=0,h=0;if(this.isMobild){var y=t;n=y.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,h=y.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var c=t;n=c.clientX-this.myCanvasNode.getBoundingClientRect().left,h=c.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),n=(s=this.adsorption.adsorpToXY(n,h)).x,h=s.y,l=(l=Math.atan2(h-this.y,n-this.x))>=0?l:2*Math.PI+l,this.endAngle=Math.round(180/Math.PI*l)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.startAngle,this.startAngle,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.endAngle,this.endAngle,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.arc(this.x,this.y,30,this.startAngle,this.endAngle,!1),this.myCanvas.stroke();var v=0,u=0,d=0;this.startAngle<=this.endAngle?(v=180/Math.PI*(this.endAngle-this.startAngle),u=40*Math.cos((this.startAngle+this.endAngle)/2)+this.x,d=40*Math.sin((this.startAngle+this.endAngle)/2)+this.y):(v=180/Math.PI*(2*Math.PI-this.startAngle+this.endAngle),u=40*Math.cos((this.startAngle+this.endAngle)/2-Math.PI)+this.x,d=40*Math.sin((this.startAngle+this.endAngle)/2-Math.PI)+this.y),v=Math.round(v),this.myCanvas.beginPath(),this.myCanvas.font=a.Attribute.propFont,this.myCanvas.textAlign=a.Attribute.propTextAlign,this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.fillText(v+"°",u+22,d+22),this.AuxiliaryListen.recoverButtonFlag()}},t}();i.Protractor=n},"./radius.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./enum/enum-configlib.ts"),s=function(){function t(t,i,e,s,n,h,o,r){this.flag=a.ToolsName.radius,this.isMobild=t,this.myCanvas=i,this.myCanvasNode=e,this.eventFlag=!1,this.eventCount=0,this.anticlockwise=!1,this.canvasData=h,this.rePaint=s,this.buttonListen=n,this.isChoosed=!1,this.canvasChoosed=o,this.intersect=r}return t.prototype.startCallBack=function(t){if(!this.eventFlag&&0===this.eventCount){this.eventFlag=!0,this.eventCount=1;var i=0,e=0;if(this.isMobild){var s=t;i=s.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=s.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,e=n.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var h=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(h[0]).x,this.y=this.canvasData.getData(h[0]).y,this.r=this.canvasData.getData(h[0]).r;var o=Math.atan2(e-this.y,i-this.x);o=o>=0?o:2*Math.PI+o,this.angle=Math.round(180/Math.PI*o)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.angle,this.angle,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke()}},t.prototype.moveCallBack=function(t){if(this.eventFlag||0!==this.eventCount){if(this.eventFlag&&1===this.eventCount){s=0,n=0;if(this.isMobild){var i=t;s=i.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,n=i.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var e=t;s=e.clientX-this.myCanvasNode.getBoundingClientRect().left,n=e.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();l=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(l[0]).x,this.y=this.canvasData.getData(l[0]).y,this.r=this.canvasData.getData(l[0]).r,r=(r=Math.atan2(n-this.y,s-this.x))>=0?r:2*Math.PI+r,r=Math.round(180/Math.PI*r)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,r,r,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke()}}else{var s=0,n=0;if(this.isMobild){var h=t;s=h.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,n=h.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var o=t;s=o.clientX-this.myCanvasNode.getBoundingClientRect().left,n=o.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var r,l=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(l[0]).x,this.y=this.canvasData.getData(l[0]).y,this.r=this.canvasData.getData(l[0]).r,r=(r=Math.atan2(n-this.y,s-this.x))>=0?r:2*Math.PI+r,r=Math.round(180/Math.PI*r)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,r,r,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke()}},t.prototype.endCallBack=function(t){if(this.eventFlag&&1===this.eventCount){this.eventFlag=!1,this.eventCount=0;var i=0,e=0;if(this.isMobild){var s=t;i=s.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=s.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,e=n.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var h=this.canvasChoosed.getIndex();this.x=this.canvasData.getData(h[0]).x,this.y=this.canvasData.getData(h[0]).y,this.r=this.canvasData.getData(h[0]).r;var o=Math.atan2(e-this.y,i-this.x);o=o>=0?o:2*Math.PI+o,this.angle=Math.round(180/Math.PI*o)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.angle,this.angle,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.canvasData.getData(this.canvasChoosed.getIndex()[0]).fanAndRadius.push(this.data()),this.buttonListen.recoverButtonFlag(),this.canvasChoosed.recoverIndex()}},t.prototype.data=function(){return{flag:this.flag,isChoosed:this.isChoosed,x:this.x,y:this.y,r:this.r,angle:this.angle,anticlockwise:this.anticlockwise}},t}();i.Radius=s},"./rePaint.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./enum/enum-configlib.ts"),s=function(){function t(t,i,e){this.myCanvas=t,this.myCanvasNode=i,this.data=e}return t.prototype.paintPoint=function(t){this.myCanvas.beginPath(),t.isChoosed?this.myCanvas.fillStyle=a.Attribute.propisChoosed:this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.arc(t.x,t.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()},t.prototype.paintSegment=function(t){t.anticlockwise=!!t.anticlockwise&&t.anticlockwise;var i=Math.cos(t.angle)*t.r+t.x,e=Math.sin(t.angle)*t.r+t.y;this.myCanvas.beginPath(),t.isChoosed?(this.myCanvas.strokeStyle=a.Attribute.propisChoosed,this.myCanvas.fillStyle=a.Attribute.propisChoosed):(this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.strokeStyle=a.Attribute.propDSStyle),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(t.x,t.y),this.myCanvas.arc(t.x,t.y,t.r,t.angle,t.angle,t.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.moveTo(t.x,t.y),this.myCanvas.arc(t.x,t.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.moveTo(i,e),this.myCanvas.arc(i,e,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()},t.prototype.paintFan=function(t){t.anticlockwise=!!t.anticlockwise&&t.anticlockwise,this.myCanvas.beginPath(),t.isChoosed?this.myCanvas.strokeStyle=a.Attribute.propisChoosed:this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.fillStyle=t.fillStyle,this.myCanvas.moveTo(t.x,t.y),this.myCanvas.arc(t.x,t.y,t.r,t.startAngle,t.endAngle,t.anticlockwise),this.myCanvas.closePath(),this.myCanvas.fill(),this.myCanvas.stroke()},t.prototype.paintCircular=function(t){t.anticlockwise=!!t.anticlockwise&&t.anticlockwise,this.myCanvas.beginPath(),t.isChoosed?this.myCanvas.strokeStyle=a.Attribute.propisChoosed:this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.fillStyle=t.fillStyle,this.myCanvas.arc(t.x,t.y,t.r,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.stroke(),this.myCanvas.beginPath(),t.isChoosed?this.myCanvas.fillStyle=a.Attribute.propisChoosed:this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.arc(t.x,t.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()},t.prototype.paintRadius=function(t){t.anticlockwise=!!t.anticlockwise&&t.anticlockwise,this.myCanvas.beginPath(),t.isChoosed?this.myCanvas.strokeStyle=a.Attribute.propisChoosed:this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(t.x,t.y),this.myCanvas.arc(t.x,t.y,t.r,t.angle,t.angle,t.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke()},t.prototype.paintDiameter=function(t){t.anticlockwise=!!t.anticlockwise&&t.anticlockwise,this.myCanvas.beginPath(),t.isChoosed?this.myCanvas.strokeStyle=a.Attribute.propisChoosed:this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(t.x,t.y),this.myCanvas.arc(t.x,t.y,t.r,t.angle,t.angle,t.anticlockwise),this.myCanvas.moveTo(t.x,t.y),this.myCanvas.arc(t.x,t.y,t.r,t.angle+Math.PI,t.angle+Math.PI,t.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke()},t.prototype.paintChord=function(t){this.myCanvas.beginPath(),t.isChoosed?(this.myCanvas.strokeStyle=a.Attribute.propisChoosed,this.myCanvas.fillStyle=a.Attribute.propisChoosed):(this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.fillStyle=a.Attribute.propDFStyle),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.moveTo(t.x,t.y),this.myCanvas.lineTo(t.endX,t.endY),this.myCanvas.stroke(),this.myCanvas.moveTo(t.x,t.y),this.myCanvas.arc(t.x,t.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.moveTo(t.endX,t.endY),this.myCanvas.arc(t.endX,t.endY,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()},t.prototype.paintTangent=function(){},t.prototype.paintLetterFlag=function(t){this.myCanvas.beginPath(),this.myCanvas.font=a.Attribute.propFont,t.isChoosed?this.myCanvas.fillStyle=a.Attribute.propisChoosed:this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.fillText(t.text,t.x,t.y)},t.prototype.rePaint=function(){for(var t=0,i=this.data;t<i.length;t++){var e=i[t];switch(e.flag){case a.ToolsName.point:this.paintPoint(e);break;case a.ToolsName.segment:this.paintSegment(e);break;case a.ToolsName.circular:this.paintCircular(e);for(var s=0,n=e.fanAndRadius;s<n.length;s++){var h=n[s];switch(h.flag){case a.ToolsName.fan:this.paintFan(h);var o=h.hasChord;o.isShow&&this.paintChord(o);break;case a.ToolsName.radius:this.paintRadius(h);break;case a.ToolsName.diameter:this.paintDiameter(h)}}break;case a.ToolsName.tangent:this.paintTangent();break;case a.ToolsName.letterFlag:this.paintLetterFlag(e)}}},t.prototype.clearCanvas=function(){this.myCanvas.clearRect(0,0,this.myCanvasNode.clientWidth,this.myCanvasNode.clientHeight-5),this.myCanvas.fillStyle="white",this.myCanvas.fillRect(0,0,this.myCanvasNode.clientWidth,this.myCanvasNode.clientHeight)},t}();i.RePaint=s},"./rotate.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./enum/enum-configlib.ts"),s=function(){function t(t,i,e,a,s,n,h,o){this.isMobild=t,this.myCanvas=i,this.myCanvasNode=e,this.rePaint=a,this.eventFlag=!1,this.eventCount=0,this.AuxiliaryListen=s,this.canvasData=n,this.canvasChoosed=h,this.intersect=o}return t.prototype.startCallback=function(t){if(!this.eventFlag&&0===this.eventCount){this.eventFlag=!0,this.eventCount=1;var i=0,e=0;if(this.isMobild){var a=t;i=a.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=a.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var s=t;i=s.clientX-this.myCanvasNode.getBoundingClientRect().left,e=s.clientY-this.myCanvasNode.getBoundingClientRect().top}this.index=this.canvasChoosed.getIndex(),this.x=this.canvasData.getData(this.index[0]).x,this.y=this.canvasData.getData(this.index[0]).y;var n=Math.atan2(e-this.y,i-this.x);this.newAngle=n>=0?n:2*Math.PI+n,this.oldXY=Math.sqrt(Math.pow(i-this.x,2)+Math.pow(e-this.y,2))}},t.prototype.moveCallback=function(t){if(this.eventFlag&&1===this.eventCount){var i=0,e=0;if(this.isMobild){var s=t;i=s.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=s.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,e=n.clientY-this.myCanvasNode.getBoundingClientRect().top}this.oldAngle=this.newAngle;var h=Math.atan2(e-this.y,i-this.x);h=h>=0?h:2*Math.PI+h,this.newAngle=h;var o=Math.round((this.newAngle-this.oldAngle)*(180/Math.PI))*(Math.PI/180),r=Math.sqrt(Math.pow(i-this.x,2)+Math.pow(e-this.y,2)),l=void 0;1===this.index.length?l=this.canvasData.getData(this.index[0]):2===this.index.length&&(l=this.canvasData.getData(this.index[0]).fanAndRadius[this.index[1]]);var y=void 0;if(l.flag===a.ToolsName.fan)(y=l).startAngle=(y.startAngle+o)%(2*Math.PI),y.endAngle=(y.endAngle+o)%(2*Math.PI),y.startAngle=y.startAngle<0?2*Math.PI+y.startAngle:y.startAngle,y.endAngle=y.endAngle<0?2*Math.PI+y.endAngle:y.endAngle,y.hasChord.x=Math.cos(y.startAngle)*y.r+y.x,y.hasChord.y=Math.sin(y.startAngle)*y.r+y.y,y.hasChord.endX=Math.cos(y.endAngle)*y.r+y.x,y.hasChord.endY=Math.sin(y.endAngle)*y.r+y.y,this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint();else if(l.flag===a.ToolsName.radius)(y=l).angle=(y.angle+o)%(2*Math.PI),y.angle=y.angle<0?2*Math.PI+y.angle:y.angle,this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint();else if(l.flag===a.ToolsName.diameter)(y=l).angle=(y.angle+o)%(2*Math.PI),y.angle=y.angle<0?2*Math.PI+y.angle:y.angle,this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint();else if(l.flag===a.ToolsName.segment){(y=l).angle=(y.angle+o)%(2*Math.PI),y.angle=y.angle<0?2*Math.PI+y.angle:y.angle,y.r+=r-this.oldXY,y.r=parseFloat((y.r/a.Attribute.unitProp).toFixed(1)),y.r=Math.round(y.r*a.Attribute.unitProp),y.r<.1*a.Attribute.unitProp&&(y.r=.1*a.Attribute.unitProp),this.oldXY=r,this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propNFStyle,this.myCanvas.arc(y.x,y.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill();var c=Math.cos(y.angle)*y.r+y.x,v=Math.sin(y.angle)*y.r+y.y;this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propNFStyle,this.myCanvas.arc(c,v,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(y.x,y.y);var u=this.rotatexy(y.x,y.y,0,20,y.angle);this.myCanvas.lineTo(u.x,u.y),u=this.rotatexy(y.x,y.y,y.r,20,y.angle),this.myCanvas.lineTo(u.x,u.y),u=this.rotatexy(y.x,y.y,y.r,0,y.angle),this.myCanvas.lineTo(u.x,u.y),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=2;for(var d=10;d<y.r;d+=10)u=this.rotatexy(y.x,y.y,d,0,y.angle),this.myCanvas.moveTo(u.x,u.y),u=this.rotatexy(y.x,y.y,d,5,y.angle),this.myCanvas.lineTo(u.x,u.y),(d+=10)<y.r&&(u=this.rotatexy(y.x,y.y,d,0,y.angle),this.myCanvas.moveTo(u.x,u.y),u=this.rotatexy(y.x,y.y,d,10,y.angle),this.myCanvas.lineTo(u.x,u.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(y.x,y.y),this.myCanvas.rotate(y.angle),this.myCanvas.font=a.Attribute.propFont,this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.fillText(y.r/a.Attribute.unitProp+"cm",y.r/2-22,-30),this.myCanvas.restore()}}},t.prototype.endCallback=function(t){this.eventFlag&&1===this.eventCount&&(this.eventFlag=!1,this.eventCount=0,this.AuxiliaryListen.recoverButtonFlag(),this.canvasChoosed.cancleSelected(),this.canvasChoosed.recoverIndex(),this.rePaint.clearCanvas(),this.rePaint.rePaint(),this.intersect.pointNoSelEach(),this.intersect.repaintPoint())},t.prototype.rotatexy=function(t,i,e,a,s){return{x:e*Math.cos(s)+a*Math.sin(s)+t,y:e*Math.sin(s)-a*Math.cos(s)+i}},t}();i.Rotate=s},"./rule.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./enum/enum-configlib.ts"),s=e("./adsorption.ts"),n=function(){function t(t,i,e,a,n,h,o){this.isMobild=t,this.myCanvas=i,this.myCanvasNode=e,this.rePaint=a,this.eventFlag=!1,this.eventCount=0,this.AuxiliaryListen=n,this.canvasData=h,this.intersect=o,this.adsorption=new s.Adsorption(this.canvasData,this.intersect)}return t.prototype.startCallback=function(t){if(this.eventFlag||0!==this.eventCount){if(!this.eventFlag&&2===this.eventCount){this.eventFlag=!0,this.eventCount=3;y=0,c=0;if(this.isMobild){var i=t;y=i.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,c=i.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var e=t;y=e.clientX-this.myCanvasNode.getBoundingClientRect().left,c=e.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),y=(l=this.adsorption.adsorpToXY(y,c)).x,c=l.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill();var s=parseFloat((Math.sqrt(Math.pow(y-this.x,2)+Math.pow(c-this.y,2))/a.Attribute.unitProp).toFixed(1)),n=Math.round(s*a.Attribute.unitProp);n<=4&&(s=.1,n=4);var h=Math.atan2(c-this.y,y-this.x);h=h>=0?h:2*Math.PI+h,this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,n,h,h,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(this.x,this.y);var o=this.rotatexy(this.x,this.y,0,20,h);this.myCanvas.lineTo(o.x,o.y),o=this.rotatexy(this.x,this.y,n,20,h),this.myCanvas.lineTo(o.x,o.y),o=this.rotatexy(this.x,this.y,n,0,h),this.myCanvas.lineTo(o.x,o.y);for(var r=10;r<n;r+=10)o=this.rotatexy(this.x,this.y,r,0,h),this.myCanvas.moveTo(o.x,o.y),o=this.rotatexy(this.x,this.y,r,5,h),this.myCanvas.lineTo(o.x,o.y),(r+=10)<n&&(o=this.rotatexy(this.x,this.y,r,0,h),this.myCanvas.moveTo(o.x,o.y),o=this.rotatexy(this.x,this.y,r,10,h),this.myCanvas.lineTo(o.x,o.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(this.x,this.y),this.myCanvas.rotate(h),this.myCanvas.font=a.Attribute.propFont,this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.fillText(s+"cm",n/2-22,-30),this.myCanvas.restore()}}else{this.eventFlag=!0,this.eventCount=1;var l,y=0,c=0;if(this.isMobild){var v=t;y=v.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,c=v.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var u=t;y=u.clientX-this.myCanvasNode.getBoundingClientRect().left,c=u.clientY-this.myCanvasNode.getBoundingClientRect().top}y=(l=this.adsorption.adsorpToXY(y,c)).x,c=l.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.arc(y,c,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fillStyle=a.Attribute.propNFStyle,this.myCanvas.fill()}},t.prototype.moveCallback=function(t){if(this.eventFlag&&1===this.eventCount){var i=0,e=0;if(this.isMobild){var s=t;i=s.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=s.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,e=n.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(r=this.adsorption.adsorpToXY(i,e)).x,e=r.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.arc(i,e,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fillStyle=a.Attribute.propNFStyle,this.myCanvas.fill()}else if(this.eventFlag||2!==this.eventCount){if(this.eventFlag&&3===this.eventCount){i=0,e=0;if(this.isMobild){var h=t;i=h.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=h.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var o=t;i=o.clientX-this.myCanvasNode.getBoundingClientRect().left,e=o.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(r=this.adsorption.adsorpToXY(i,e)).x,e=r.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill();u=parseFloat((Math.sqrt(Math.pow(i-this.x,2)+Math.pow(e-this.y,2))/a.Attribute.unitProp).toFixed(1));(c=Math.round(u*a.Attribute.unitProp))<=4&&(u=.1,c=4),v=(v=Math.atan2(e-this.y,i-this.x))>=0?v:2*Math.PI+v,this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,c,v,v,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(this.x,this.y);d=this.rotatexy(this.x,this.y,0,20,v);this.myCanvas.lineTo(d.x,d.y),d=this.rotatexy(this.x,this.y,c,20,v),this.myCanvas.lineTo(d.x,d.y),d=this.rotatexy(this.x,this.y,c,0,v),this.myCanvas.lineTo(d.x,d.y);for(C=10;C<c;C+=10)d=this.rotatexy(this.x,this.y,C,0,v),this.myCanvas.moveTo(d.x,d.y),d=this.rotatexy(this.x,this.y,C,5,v),this.myCanvas.lineTo(d.x,d.y),(C+=10)<c&&(d=this.rotatexy(this.x,this.y,C,0,v),this.myCanvas.moveTo(d.x,d.y),d=this.rotatexy(this.x,this.y,C,10,v),this.myCanvas.lineTo(d.x,d.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(this.x,this.y),this.myCanvas.rotate(v),this.myCanvas.font=a.Attribute.propFont,this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.fillText(u+"cm",c/2-22,-30),this.myCanvas.restore()}}else{var r,i=0,e=0;if(this.isMobild){var l=t;i=l.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=l.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var y=t;i=y.clientX-this.myCanvasNode.getBoundingClientRect().left,e=y.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(r=this.adsorption.adsorpToXY(i,e)).x,e=r.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill();var c,v,u=parseFloat((Math.sqrt(Math.pow(i-this.x,2)+Math.pow(e-this.y,2))/a.Attribute.unitProp).toFixed(1));(c=Math.round(u*a.Attribute.unitProp))<=4&&(u=.1,c=4),v=(v=Math.atan2(e-this.y,i-this.x))>=0?v:2*Math.PI+v,this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,c,v,v,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(this.x,this.y);var d=this.rotatexy(this.x,this.y,0,20,v);this.myCanvas.lineTo(d.x,d.y),d=this.rotatexy(this.x,this.y,c,20,v),this.myCanvas.lineTo(d.x,d.y),d=this.rotatexy(this.x,this.y,c,0,v),this.myCanvas.lineTo(d.x,d.y);for(var C=10;C<c;C+=10)d=this.rotatexy(this.x,this.y,C,0,v),this.myCanvas.moveTo(d.x,d.y),d=this.rotatexy(this.x,this.y,C,5,v),this.myCanvas.lineTo(d.x,d.y),(C+=10)<c&&(d=this.rotatexy(this.x,this.y,C,0,v),this.myCanvas.moveTo(d.x,d.y),d=this.rotatexy(this.x,this.y,C,10,v),this.myCanvas.lineTo(d.x,d.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(this.x,this.y),this.myCanvas.rotate(v),this.myCanvas.font=a.Attribute.propFont,this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.fillText(u+"cm",c/2-22,-30),this.myCanvas.restore()}},t.prototype.endCallback=function(t){if(this.eventFlag&&1===this.eventCount){if(this.eventFlag=!1,this.eventCount=2,this.isMobild){var i=t;this.x=i.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=i.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var e=t;this.x=e.clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=e.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint();var s=this.adsorption.adsorpToXY(this.x,this.y);this.x=s.x,this.y=s.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.arc(this.x,this.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.fill()}else if(this.eventFlag&&3===this.eventCount){this.eventFlag=!1,this.eventCount=0;var n=0,h=0;if(this.isMobild){var o=t;n=o.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,h=o.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var r=t;n=r.clientX-this.myCanvasNode.getBoundingClientRect().left,h=r.clientY-this.myCanvasNode.getBoundingClientRect().top}this.rePaint.clearCanvas(),this.rePaint.rePaint(),n=(s=this.adsorption.adsorpToXY(n,h)).x,h=s.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill();var l=parseFloat((Math.sqrt(Math.pow(n-this.x,2)+Math.pow(h-this.y,2))/a.Attribute.unitProp).toFixed(1)),y=Math.round(l*a.Attribute.unitProp);y<=4&&(l=.1,y=4);var c=Math.atan2(h-this.y,n-this.x);c=c>=0?c:2*Math.PI+c,this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,y,c,c,!1),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(this.x,this.y);var v=this.rotatexy(this.x,this.y,0,20,c);this.myCanvas.lineTo(v.x,v.y),v=this.rotatexy(this.x,this.y,y,20,c),this.myCanvas.lineTo(v.x,v.y),v=this.rotatexy(this.x,this.y,y,0,c),this.myCanvas.lineTo(v.x,v.y);for(var u=10;u<y;u+=10)v=this.rotatexy(this.x,this.y,u,0,c),this.myCanvas.moveTo(v.x,v.y),v=this.rotatexy(this.x,this.y,u,5,c),this.myCanvas.lineTo(v.x,v.y),(u+=10)<y&&(v=this.rotatexy(this.x,this.y,u,0,c),this.myCanvas.moveTo(v.x,v.y),v=this.rotatexy(this.x,this.y,u,10,c),this.myCanvas.lineTo(v.x,v.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(this.x,this.y),this.myCanvas.rotate(c),this.myCanvas.font=a.Attribute.propFont,this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.fillText(l+"cm",y/2-22,-30),this.myCanvas.restore(),this.AuxiliaryListen.recoverButtonFlag()}},t.prototype.rangePoints=function(t,i,e,a){return{x:t*Math.pow(Math.cos(a),2)+t*Math.pow(Math.sin(a),2)+e*Math.sin(a),y:i*Math.pow(Math.cos(a),2)+i*Math.pow(Math.sin(a),2)+e*Math.cos(a)}},t.prototype.rotatexy=function(t,i,e,a,s){return{x:e*Math.cos(s)+a*Math.sin(s)+t,y:e*Math.sin(s)-a*Math.cos(s)+i}},t}();i.Rule=n},"./segment.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./enum/enum-configlib.ts"),s=e("./adsorption.ts"),n=function(){function t(t,i,e,n,h,o,r){this.flag=a.ToolsName.segment,this.isMobild=t,this.myCanvas=i,this.myCanvasNode=e,this.eventFlag=!1,this.eventCount=0,this.anticlockwise=!1,this.canvasData=o,this.rePaint=n,this.buttonListen=h,this.isChoosed=!1,this.intersect=r,this.adsorption=new s.Adsorption(this.canvasData,this.intersect)}return t.prototype.startCallBack=function(t){if(this.eventFlag||0!==this.eventCount){if(this.eventFlag||2!==this.eventCount)return;this.eventFlag=!0;y=0,c=0;if(this.isMobild){var i=t;y=i.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,c=i.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var e=t;y=e.clientX-this.myCanvasNode.getBoundingClientRect().left,c=e.clientY-this.myCanvasNode.getBoundingClientRect().top}y+=a.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint(),y=(l=this.adsorption.adsorpToXY(y,c)).x,c=l.y;var s=parseFloat((Math.sqrt(Math.pow(Math.abs(y-this.x),2)+Math.pow(Math.abs(c-this.y),2))/a.Attribute.unitProp).toFixed(1)),n=Math.round(s*a.Attribute.unitProp);n<=4&&(s=.1,n=4);var h=Math.atan2(c-this.y,y-this.x);h=h>=0?h:2*Math.PI+h,h=Math.round(180/Math.PI*h)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,n,h,h,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propNFStyle,this.myCanvas.arc(this.x,this.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propNFStyle,this.myCanvas.arc(y,c,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(this.x,this.y);var o=this.rotatexy(this.x,this.y,0,20,h);this.myCanvas.lineTo(o.x,o.y),o=this.rotatexy(this.x,this.y,n,20,h),this.myCanvas.lineTo(o.x,o.y),o=this.rotatexy(this.x,this.y,n,0,h),this.myCanvas.lineTo(o.x,o.y),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=2;for(var r=10;r<n;r+=10)o=this.rotatexy(this.x,this.y,r,0,h),this.myCanvas.moveTo(o.x,o.y),o=this.rotatexy(this.x,this.y,r,5,h),this.myCanvas.lineTo(o.x,o.y),(r+=10)<n&&(o=this.rotatexy(this.x,this.y,r,0,h),this.myCanvas.moveTo(o.x,o.y),o=this.rotatexy(this.x,this.y,r,10,h),this.myCanvas.lineTo(o.x,o.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(this.x,this.y),this.myCanvas.rotate(h),this.myCanvas.font=a.Attribute.propFont,this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.fillText(s+"cm",n/2-22,-30),this.myCanvas.restore()}else{this.eventFlag=!0,this.eventCount=1;var l,y=0,c=0;if(this.isMobild){var v=t;y=v.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,c=v.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var u=t;y=u.clientX-this.myCanvasNode.getBoundingClientRect().left,c=u.clientY-this.myCanvasNode.getBoundingClientRect().top}y+=a.Attribute.mouseOffset,y=(l=this.adsorption.adsorpToXY(y,c)).x,c=l.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propNFStyle,this.myCanvas.arc(y,c,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()}},t.prototype.moveCallBack=function(t){if(this.eventFlag&&1===this.eventCount){var i=0,e=0;if(this.isMobild){var s=t;i=s.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=s.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var n=t;i=n.clientX-this.myCanvasNode.getBoundingClientRect().left,e=n.clientY-this.myCanvasNode.getBoundingClientRect().top}i+=a.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(r=this.adsorption.adsorpToXY(i,e)).x,e=r.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propNFStyle,this.myCanvas.arc(i,e,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()}else if(this.eventFlag||2!==this.eventCount){if(!this.eventFlag||2!==this.eventCount)return;i=0,e=0;if(this.isMobild){var h=t;i=h.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=h.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var o=t;i=o.clientX-this.myCanvasNode.getBoundingClientRect().left,e=o.clientY-this.myCanvasNode.getBoundingClientRect().top}i+=a.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(r=this.adsorption.adsorpToXY(i,e)).x,e=r.y;u=parseFloat((Math.sqrt(Math.pow(Math.abs(i-this.x),2)+Math.pow(Math.abs(e-this.y),2))/a.Attribute.unitProp).toFixed(1));(c=Math.round(u*a.Attribute.unitProp))<=.1*a.Attribute.unitProp&&(u=.1,c=.1*a.Attribute.unitProp),v=(v=Math.atan2(e-this.y,i-this.x))>=0?v:2*Math.PI+v,v=Math.round(180/Math.PI*v)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,c,v,v,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propNFStyle,this.myCanvas.arc(this.x,this.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),i=Math.cos(v)*c+this.x,e=Math.sin(v)*c+this.y,this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propNFStyle,this.myCanvas.arc(i,e,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(this.x,this.y);d=this.rotatexy(this.x,this.y,0,20,v);this.myCanvas.lineTo(d.x,d.y),d=this.rotatexy(this.x,this.y,c,20,v),this.myCanvas.lineTo(d.x,d.y),d=this.rotatexy(this.x,this.y,c,0,v),this.myCanvas.lineTo(d.x,d.y),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=2;for(C=10;C<c;C+=10)d=this.rotatexy(this.x,this.y,C,0,v),this.myCanvas.moveTo(d.x,d.y),d=this.rotatexy(this.x,this.y,C,5,v),this.myCanvas.lineTo(d.x,d.y),(C+=10)<c&&(d=this.rotatexy(this.x,this.y,C,0,v),this.myCanvas.moveTo(d.x,d.y),d=this.rotatexy(this.x,this.y,C,10,v),this.myCanvas.lineTo(d.x,d.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(this.x,this.y),this.myCanvas.rotate(v),this.myCanvas.font=a.Attribute.propFont,this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.fillText(u+"cm",c/2-22,-30),this.myCanvas.restore()}else{var r,i=0,e=0;if(this.isMobild){var l=t;i=l.touches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,e=l.touches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var y=t;i=y.clientX-this.myCanvasNode.getBoundingClientRect().left,e=y.clientY-this.myCanvasNode.getBoundingClientRect().top}i+=a.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint(),i=(r=this.adsorption.adsorpToXY(i,e)).x,e=r.y;var c,v,u=parseFloat((Math.sqrt(Math.pow(Math.abs(i-this.x),2)+Math.pow(Math.abs(e-this.y),2))/a.Attribute.unitProp).toFixed(1));(c=Math.round(u*a.Attribute.unitProp))<=4&&(u=.1,c=4),v=(v=Math.atan2(e-this.y,i-this.x))>=0?v:2*Math.PI+v,v=Math.round(180/Math.PI*v)*(Math.PI/180),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propNSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,c,v,v,this.anticlockwise),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propNFStyle,this.myCanvas.arc(this.x,this.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),i=Math.cos(v)*c+this.x,e=Math.sin(v)*c+this.y,this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propNFStyle,this.myCanvas.arc(i,e,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.myCanvas.beginPath(),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=2,this.myCanvas.moveTo(this.x,this.y);var d=this.rotatexy(this.x,this.y,0,20,v);this.myCanvas.lineTo(d.x,d.y),d=this.rotatexy(this.x,this.y,c,20,v),this.myCanvas.lineTo(d.x,d.y),d=this.rotatexy(this.x,this.y,c,0,v),this.myCanvas.lineTo(d.x,d.y),this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.lineWidth=2;for(var C=10;C<c;C+=10)d=this.rotatexy(this.x,this.y,C,0,v),this.myCanvas.moveTo(d.x,d.y),d=this.rotatexy(this.x,this.y,C,5,v),this.myCanvas.lineTo(d.x,d.y),(C+=10)<c&&(d=this.rotatexy(this.x,this.y,C,0,v),this.myCanvas.moveTo(d.x,d.y),d=this.rotatexy(this.x,this.y,C,10,v),this.myCanvas.lineTo(d.x,d.y));this.myCanvas.stroke(),this.myCanvas.save(),this.myCanvas.beginPath(),this.myCanvas.translate(this.x,this.y),this.myCanvas.rotate(v),this.myCanvas.font=a.Attribute.propFont,this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.fillText(u+"cm",c/2-22,-30),this.myCanvas.restore()}},t.prototype.endCallBack=function(t){if(this.eventFlag&&1===this.eventCount){if(this.eventFlag=!1,this.eventCount=2,this.isMobild){var i=t;this.x=i.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=i.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var e=t;this.x=e.clientX-this.myCanvasNode.getBoundingClientRect().left,this.y=e.clientY-this.myCanvasNode.getBoundingClientRect().top}this.x+=a.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint();var s=this.adsorption.adsorpToXY(this.x,this.y);this.x=s.x,this.y=s.y,this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill()}else{if(!this.eventFlag||2!==this.eventCount)return;this.eventFlag=!1,this.eventCount=0;var n=0,h=0;if(this.isMobild){var o=t;n=o.changedTouches[0].clientX-this.myCanvasNode.getBoundingClientRect().left,h=o.changedTouches[0].clientY-this.myCanvasNode.getBoundingClientRect().top}else{var r=t;n=r.clientX-this.myCanvasNode.getBoundingClientRect().left,h=r.clientY-this.myCanvasNode.getBoundingClientRect().top}n+=a.Attribute.mouseOffset,this.rePaint.clearCanvas(),this.rePaint.rePaint(),n=(s=this.adsorption.adsorpToXY(n,h)).x,h=s.y;var l=parseFloat((Math.sqrt(Math.pow(Math.abs(n-this.x),2)+Math.pow(Math.abs(h-this.y),2))/a.Attribute.unitProp).toFixed(1));this.r=Math.round(l*a.Attribute.unitProp),this.r<=4&&(l=.1,this.r=4);var y=Math.atan2(h-this.y,n-this.x);y=y>=0?y:2*Math.PI+y,this.angle=Math.round(180/Math.PI*y)*(Math.PI/180),this.intersect.pointEach(this.data(),this.canvasData),this.intersect.repaintPoint(),this.myCanvas.beginPath(),this.myCanvas.lineWidth=a.Attribute.propWitdh,this.myCanvas.strokeStyle=a.Attribute.propDSStyle,this.myCanvas.moveTo(this.x,this.y),this.myCanvas.arc(this.x,this.y,this.r,this.angle,this.angle,this.anticlockwise),this.myCanvas.closePath(),this.myCanvas.stroke(),this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.arc(this.x,this.y,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),n=Math.cos(this.angle)*this.r+this.x,h=Math.sin(this.angle)*this.r+this.y,this.myCanvas.beginPath(),this.myCanvas.fillStyle=a.Attribute.propDFStyle,this.myCanvas.arc(n,h,a.Attribute.propPointR,0,2*Math.PI,!1),this.myCanvas.fill(),this.canvasData.setData(this.data()),this.buttonListen.recoverButtonFlag()}},t.prototype.data=function(){return{flag:this.flag,isChoosed:this.isChoosed,x:this.x,y:this.y,r:this.r,angle:this.angle,anticlockwise:this.anticlockwise}},t.prototype.rotatexy=function(t,i,e,a,s){return{x:e*Math.cos(s)+a*Math.sin(s)+t,y:e*Math.sin(s)-a*Math.cos(s)+i}},t}();i.Segment=n},"./textBox.ts":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./enum/enum-configlib.ts"),s=e("./enum/enum-configlib.ts"),n=function(){function t(t,i,e,a){this.canvasChoosed=t,this.canvasData=i,this.rePaint=e,this.textFlag=!1,this.oldtext="",this.index=[],this.intersect=a,this.inputListen(),this.focusListen(),this.blurListen()}return t.prototype.init=function(t,i){this.auxiliaryListen=t,this.buttonListen=i},t.prototype.inputListen=function(){var t=this;document.getElementById(s.Attribute.btnTextValueID).addEventListener("input",function(i){i=i||window.event;var e=document.getElementById(s.Attribute.btnTextValueID),n=e.value;n=n.replace(/[^\d\.]/g,"").replace(/^\./g,"").replace(/\.{1,}/g,".").replace(/^(\d+)\.(\d).*/,"$1.$2"),e.value=n;var h=t.canvasChoosed.getIndex();if(2===h.length)switch(t.canvasData.getData(h[0]).fanAndRadius[h[1]].flag){case a.ToolsName.fan:n=n.replace(/\.{1,}/g,""),e.value=n,parseFloat(n)<=0?e.value="1":parseFloat(n)>=360&&(e.value="359")}},!1)},t.prototype.blurListen=function(){var t=this;document.getElementById(s.Attribute.btnTextValueID).addEventListener("blur",function(i){i=i||FocusEvent.prototype;var e=document.getElementById(s.Attribute.btnTextValueID);if(0===t.index.length){if(0===t.canvasChoosed.getIndex().length)return;if(t.auxiliaryListen.getButtonFlag()!==a.Auxiliary.default||t.buttonListen.getButtonFlag()!==a.ToolsName.default)return}var n=t.index;if(t.textFlag=!1,1===n.length)switch((y=t.canvasData.getData(n[0])).flag){case a.ToolsName.segment:0!==e.value.length&&0!==parseFloat(e.value)||(e.value="0.1"),y.r=parseFloat(e.value)*s.Attribute.unitProp;break;case a.ToolsName.circular:0!==e.value.length&&0!==parseFloat(e.value)||(e.value="0.1"),y.r=parseFloat(e.value)*s.Attribute.unitProp;for(var h=0,o=y.fanAndRadius;h<o.length;h++){var r=o[h];switch(r.flag){case a.ToolsName.fan:var l=r;l.r=parseFloat(e.value)*s.Attribute.unitProp,l.hasChord.x=Math.cos(l.startAngle)*l.r+l.x,l.hasChord.y=Math.sin(l.startAngle)*l.r+l.y,l.hasChord.endX=Math.cos(l.endAngle)*l.r+l.x,l.hasChord.endY=Math.sin(l.endAngle)*l.r+l.y;break;case a.ToolsName.radius:case a.ToolsName.diameter:r.r=parseFloat(e.value)*s.Attribute.unitProp}}}else if(2===n.length){var y;switch((y=t.canvasData.getData(n[0]).fanAndRadius[n[1]]).flag){case a.ToolsName.fan:0!==e.value.length&&0!==parseInt(e.value)||(e.value="1"),y.startAngle<=y.endAngle?y.endAngle=Math.PI/180*parseFloat(e.value)+y.startAngle:y.endAngle=Math.PI/180*parseFloat(e.value)-2*Math.PI+y.startAngle,y.hasChord.x=Math.cos(y.startAngle)*y.r+y.x,y.hasChord.y=Math.sin(y.startAngle)*y.r+y.y,y.hasChord.endX=Math.cos(y.endAngle)*y.r+y.x,y.hasChord.endY=Math.sin(y.endAngle)*y.r+y.y}}t.canvasChoosed.cancleSelected(),t.canvasChoosed.recoverIndex(),t.rePaint.clearCanvas(),t.rePaint.rePaint(),t.intersect.repaintPoint(),e.value="",t.index=[]},!1)},t.prototype.focusListen=function(){var t=this;document.getElementById(s.Attribute.btnTextValueID).addEventListener("focus",function(i){i=i||FocusEvent.prototype,t.index=[];var e=document.getElementById(s.Attribute.btnTextValueID);if(0!==t.canvasChoosed.getIndex().length)if(t.auxiliaryListen.getButtonFlag()===a.Auxiliary.default&&t.buttonListen.getButtonFlag()===a.ToolsName.default){var n=t.canvasChoosed.getIndex();if(t.textFlag=!0,1===n.length)switch((h=t.canvasData.getData(n[0])).flag){case a.ToolsName.circular:case a.ToolsName.segment:e.value=Math.round(h.r)/s.Attribute.unitProp+"";break;default:e.blur()}else if(2===n.length){var h;switch((h=t.canvasData.getData(n[0]).fanAndRadius[n[1]]).flag){case a.ToolsName.fan:var o=h.startAngle,r=h.endAngle;e.value=o<=r?Math.round(180/Math.PI*(r-o)).toString():Math.round(180/Math.PI*(2*Math.PI-o+r)).toString();break;default:e.blur()}}t.index=n,t.oldtext=e.value}else e.blur();else e.blur()},!1)},t.prototype.getTextFlag=function(){return this.textFlag},t.prototype.recoverTextFlag=function(){this.textFlag=!1},t}();i.TextBox=n}});
//# sourceMappingURL=main.bundle.js.map